import {Constants} from "../Constants";

/**
* @class
* @constructor
*/
export class PanelNode {
    constructor() {
        this.html = '<span style="font-weight:bold" id="DIVID_StormEditNode_name"></span>'+
            '<div id="DIVID_StormEditNode_edits"></div>';
        this.panel = new StormPanel({"id": 'DIVID_StormPanelEditNode',
            "paneltitle": 'NODE',
            "html": this.html});
    }

	/**
	 * show
	* @param {Node} selectedNode
	*/
	show(selectedNode) {
        this.panel.show();

        PanelNode.updateNearNode(selectedNode);
	};

	/**
	* updateNearNode
	* @param {Node} selectedNode
	* @private
	*/
	static updateNearNode(selectedNode) {
	    let elEdits = $('#DIVID_StormEditNode_edits');
		if(selectedNode === undefined || selectedNode === null) {
			$('#DIVID_StormEditNode_name').html("");
            elEdits.html('');
		} else {
			if(selectedNode.getName() !== "") $('#DIVID_StormEditNode_name').html(selectedNode.getName());
            elEdits.html('');
			
			for(let compTypeKey in Constants.COMPONENT_TYPES) {
				for(let nodeCompKey in selectedNode.getComponents()) {
					if(nodeCompKey === Constants.COMPONENT_TYPES[compTypeKey]) {
						let str = 	"<div id='DIVID_component_"+compTypeKey+"' class='component StormShadow02 StormRound'>"+
										compTypeKey+
									"</div>";
                        elEdits.append(str);
						
						if(nodeCompKey === Constants.COMPONENT_TYPES.GPU) {
							new UIComponentGPU(compTypeKey, selectedNode);
						} else if(nodeCompKey === Constants.COMPONENT_TYPES.PROJECTION) {
							
						}
					}
				}	
			}
				
		
		}
	};
}
global.PanelNode = PanelNode;
module.exports.PanelNode = PanelNode;