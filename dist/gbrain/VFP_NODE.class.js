(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){
(function (global){
!function(){function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}return e}()({1:[function(e,t,n){(function(t){!function(){function t(n,r,o){function i(a,l){if(!r[a]){if(!n[a]){var u="function"==typeof e&&e;if(!l&&u)return u(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[a]={exports:{}};n[a][0].call(h.exports,function(e){return i(n[a][1][e]||e)},h,h.exports,t,n,r,o)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}return t}()({1:[function(e,n,r){(function(t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.WebCLGL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./WebCLGLBuffer.class"),a=e("./WebCLGLKernel.class"),l=e("./WebCLGLVertexFragmentProgram.class"),u=e("./WebCLGLUtils.class"),c=r.WebCLGL=function(){function e(t){o(this,e),this.utils=new u.WebCLGLUtils,this._gl=null,this.e=null,void 0===t||null===t?(this.e=document.createElement("canvas"),this.e.width=32,this.e.height=32,this._gl=u.WebCLGLUtils.getWebGLContextFromCanvas(this.e,{antialias:!1})):this._gl=t,this._arrExt={OES_texture_float:null,OES_texture_float_linear:null,OES_element_index_uint:null,WEBGL_draw_buffers:null};for(var n in this._arrExt)this._arrExt[n]=this._gl.getExtension(n),null==this._arrExt[n]&&console.error("extension "+n+" not available");this._maxDrawBuffers=null,this._arrExt.hasOwnProperty("WEBGL_draw_buffers")&&null!=this._arrExt.WEBGL_draw_buffers?(this._maxDrawBuffers=this._gl.getParameter(this._arrExt.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL),console.log("Max draw buffers: "+this._maxDrawBuffers)):console.log("Max draw buffers: 1");var r=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);this.precision=0!==r.precision?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n",this._currentTextureUnit=0,this._bufferWidth=0;var i=this.utils.loadQuad(void 0,1,1);this.vertexBuffer_QUAD=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this.vertexBuffer_QUAD),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(i.vertexArray),this._gl.STATIC_DRAW),this.indexBuffer_QUAD=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer_QUAD),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(i.indexArray),this._gl.STATIC_DRAW),this.arrayCopyTex=[];var s=this.precision+"attribute vec3 aVertexPosition;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nvCoord = aVertexPosition.xy*0.5+0.5;\n}\n",a=this.precision+"uniform sampler2D sampler_buffer;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_FragColor = texture2D(sampler_buffer, vCoord);}\n";this.shader_readpixels=this._gl.createProgram(),this.utils.createShader(this._gl,"CLGLREADPIXELS",s,a,this.shader_readpixels),this.attr_VertexPos=this._gl.getAttribLocation(this.shader_readpixels,"aVertexPosition"),this.sampler_buffer=this._gl.getUniformLocation(this.shader_readpixels,"sampler_buffer");var l=function(){return void 0!==this._maxDrawBuffers&&null!==this._maxDrawBuffers?"#extension GL_EXT_draw_buffers : require\n":""}.bind(this),c=(function(){for(var e="",t=0,n=this._maxDrawBuffers;t<n;t++)e+="layout(location = "+t+") out vec4 outCol"+t+";\n";return e}.bind(this),function(){for(var e="",t=0,n=this._maxDrawBuffers;t<n;t++)e+="gl_FragData["+t+"] = texture2D(uArrayCT["+t+"], vCoord);\n";return e}.bind(this));s=this.precision+"attribute vec3 aVertexPosition;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nvCoord = aVertexPosition.xy*0.5+0.5;\n}",a=l()+this.precision+"uniform sampler2D uArrayCT["+this._maxDrawBuffers+"];\nvarying vec2 vCoord;\nvoid main(void) {\n"+c()+"}",this.shader_copyTexture=this._gl.createProgram(),this.utils.createShader(this._gl,"CLGLCOPYTEXTURE",s,a,this.shader_copyTexture),this.attr_copyTexture_pos=this._gl.getAttribLocation(this.shader_copyTexture,"aVertexPosition");for(var h=0,f=this._maxDrawBuffers;h<f;h++)this.arrayCopyTex[h]=this._gl.getUniformLocation(this.shader_copyTexture,"uArrayCT["+h+"]");this.textureDataAux=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this.textureDataAux),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,2,2,0,this._gl.RGBA,this._gl.FLOAT,new Float32Array([1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1])),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,null)}return i(e,[{key:"getContext",value:function(){return this._gl}},{key:"getMaxDrawBuffers",value:function(){return this._maxDrawBuffers}},{key:"checkFramebufferStatus",value:function(){var e=this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER),t={};return t[this._gl.FRAMEBUFFER_COMPLETE]=!0,t[this._gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT: The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete",t[this._gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: There is no attachment",t[this._gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS: Height and width of the attachment are not the same",t[this._gl.FRAMEBUFFER_UNSUPPORTED]="FRAMEBUFFER_UNSUPPORTED: The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer",!0===t[e]&&null!==t[e]||(console.log(t[e]),!1)}},{key:"copy",value:function(e,t){if(void 0!==t&&null!==t)if(void 0!==t[0]&&null!==t[0]){this._gl.viewport(0,0,t[0].W,t[0].H),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,t[0].fBuffer);for(var n=[],r=0,o=t.length;r<o;r++)void 0!==t[r]&&null!==t[r]?(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._arrExt.WEBGL_draw_buffers["COLOR_ATTACHMENT"+r+"_WEBGL"],this._gl.TEXTURE_2D,t[r].textureData,0),n[r]=this._arrExt.WEBGL_draw_buffers["COLOR_ATTACHMENT"+r+"_WEBGL"]):n[r]=this._gl.NONE;if(this._arrExt.WEBGL_draw_buffers.drawBuffersWEBGL(n),!0===this.checkFramebufferStatus()){this._gl.useProgram(this.shader_copyTexture);for(var i=0,s=t.length;i<s;i++)this._gl.activeTexture(this._gl["TEXTURE"+i]),void 0!==t[i]&&null!==t[i]?this._gl.bindTexture(this._gl.TEXTURE_2D,t[i].textureDataTemp):this._gl.bindTexture(this._gl.TEXTURE_2D,this.textureDataAux),this._gl.uniform1i(this.arrayCopyTex[i],i);this.copyNow(t)}}else this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null);else this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}},{key:"copyNow",value:function(e){this._gl.enableVertexAttribArray(this.attr_copyTexture_pos),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this.vertexBuffer_QUAD),this._gl.vertexAttribPointer(this.attr_copyTexture_pos,3,this._gl.FLOAT,!1,0,0),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer_QUAD),this._gl.drawElements(this._gl.TRIANGLES,6,this._gl.UNSIGNED_SHORT,0)}},{key:"createBuffer",value:function(e,t,n){return new s.WebCLGLBuffer(this._gl,e,t,n)}},{key:"createKernel",value:function(e,t){return new a.WebCLGLKernel(this._gl,e,t)}},{key:"createVertexFragmentProgram",value:function(e,t,n,r){return new l.WebCLGLVertexFragmentProgram(this._gl,e,t,n,r)}},{key:"fillBuffer",value:function(e,t,n){this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,n),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._arrExt.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL,this._gl.TEXTURE_2D,e,0);var r=[this._arrExt.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL];this._arrExt.WEBGL_draw_buffers.drawBuffersWEBGL(r),void 0!==t&&null!==t&&this._gl.clearColor(t[0],t[1],t[2],t[3]),this._gl.clear(this._gl.COLOR_BUFFER_BIT)}},{key:"bindAttributeValue",value:function(e,t){void 0!==t&&null!==t?"float4_fromAttr"===e.type?(this._gl.enableVertexAttribArray(e.location[0]),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,t.vertexData0),this._gl.vertexAttribPointer(e.location[0],4,this._gl.FLOAT,!1,0,0)):"float_fromAttr"===e.type&&(this._gl.enableVertexAttribArray(e.location[0]),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,t.vertexData0),this._gl.vertexAttribPointer(e.location[0],1,this._gl.FLOAT,!1,0,0)):this._gl.disableVertexAttribArray(e.location[0])}},{key:"bindSamplerValue",value:function(e,t,n){this._currentTextureUnit<16?this._gl.activeTexture(this._gl["TEXTURE"+this._currentTextureUnit]):this._gl.activeTexture(this._gl.TEXTURE16),void 0!==n&&null!==n?(this._gl.bindTexture(this._gl.TEXTURE_2D,n.textureData),0===this._bufferWidth&&(this._bufferWidth=n.W,this._gl.uniform1f(e,this._bufferWidth))):this._gl.bindTexture(this._gl.TEXTURE_2D,this.textureDataAux),this._gl.uniform1i(t.location[0],this._currentTextureUnit),this._currentTextureUnit++}},{key:"bindUniformValue",value:function(e,t){void 0!==t&&null!==t&&("float"===e.type?t.constructor===Array?this._gl.uniform1fv(e.location[0],t):this._gl.uniform1f(e.location[0],t):"float4"===e.type?this._gl.uniform4f(e.location[0],t[0],t[1],t[2],t[3]):"mat4"===e.type&&this._gl.uniformMatrix4fv(e.location[0],!1,t))}},{key:"bindValue",value:function(e,t,n){switch(t.expectedMode){case"ATTRIBUTE":this.bindAttributeValue(t,n);break;case"SAMPLER":this.bindSamplerValue(e.uBufferWidth,t,n);break;case"UNIFORM":this.bindUniformValue(t,n)}}},{key:"bindFB",value:function(e,t){if(void 0!==e&&null!==e){if(void 0!==e[0]&&null!==e[0]){this._gl.viewport(0,0,e[0].W,e[0].H),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,!0===t?e[0].fBufferTemp:e[0].fBuffer);for(var n=[],r=0,o=e.length;r<o;r++)if(void 0!==e[r]&&null!==e[r]){var i=!0===t?e[r].textureDataTemp:e[r].textureData;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._arrExt.WEBGL_draw_buffers["COLOR_ATTACHMENT"+r+"_WEBGL"],this._gl.TEXTURE_2D,i,0),n[r]=this._arrExt.WEBGL_draw_buffers["COLOR_ATTACHMENT"+r+"_WEBGL"]}else n[r]=this._gl.NONE;return this._arrExt.WEBGL_draw_buffers.drawBuffersWEBGL(n),this.checkFramebufferStatus()}return this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),!0}return this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),!0}},{key:"enqueueNDRangeKernel",value:function(e,t,n,r){if(this._bufferWidth=0,this._gl.useProgram(e.kernel),!0===this.bindFB(t,n)){this._currentTextureUnit=0;for(var o in e.in_values)this.bindValue(e,e.in_values[o],r[o]);this._gl.enableVertexAttribArray(e.attr_VertexPos),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this.vertexBuffer_QUAD),this._gl.vertexAttribPointer(e.attr_VertexPos,3,this._gl.FLOAT,!1,0,0),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer_QUAD),this._gl.drawElements(this._gl.TRIANGLES,6,this._gl.UNSIGNED_SHORT,0)}}},{key:"enqueueVertexFragmentProgram",value:function(e,t,n,r,o,i){this._bufferWidth=0,this._gl.useProgram(e.vertexFragmentProgram);var s=void 0!==n&&null!==n?n:4;if(!0===this.bindFB(r,o)&&void 0!==t&&null!==t){this._currentTextureUnit=0;for(var a in e.in_vertex_values)this.bindValue(e,e.in_vertex_values[a],i[a]);for(var l in e.in_fragment_values)this.bindValue(e,e.in_fragment_values[l],i[l]);"VERTEX_INDEX"===t.mode?(this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,t.vertexData0),this._gl.drawElements(s,t.length,this._gl.UNSIGNED_SHORT,0)):this._gl.drawArrays(s,0,t.length)}}},{key:"readBuffer",value:function(e){void 0!==this.e&&null!==this.e&&(this.e.width=e.W,this.e.height=e.H),this._gl.useProgram(this.shader_readpixels),this._gl.viewport(0,0,e.W,e.H),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,e.fBufferTemp),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._arrExt.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL,this._gl.TEXTURE_2D,e.textureDataTemp,0);var t=[this._arrExt.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL];if(this._arrExt.WEBGL_draw_buffers.drawBuffersWEBGL(t),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,e.textureData),this._gl.uniform1i(this.sampler_buffer,0),this._gl.enableVertexAttribArray(this.attr_VertexPos),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this.vertexBuffer_QUAD),this._gl.vertexAttribPointer(this.attr_VertexPos,3,e._supportFormat,!1,0,0),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer_QUAD),this._gl.drawElements(this._gl.TRIANGLES,6,this._gl.UNSIGNED_SHORT,0),void 0!==e.outArrayFloat&&null!==e.outArrayFloat||(e.outArrayFloat=new Float32Array(e.W*e.H*4)),this._gl.readPixels(0,0,e.W,e.H,this._gl.RGBA,this._gl.FLOAT,e.outArrayFloat),"FLOAT"===e.type){for(var n=new Float32Array(e.outArrayFloat.length/4),r=0,o=e.outArrayFloat.length/4;r<o;r++)n[r]=e.outArrayFloat[4*r];e.outArrayFloat=n}return e.outArrayFloat}}],[{key:"enqueueReadBuffer_WebGLTexture",value:function(e){return e.textureData}}]),e}();t.WebCLGL=c,n.exports.WebCLGL=c}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./WebCLGLBuffer.class":2,"./WebCLGLKernel.class":4,"./WebCLGLUtils.class":5,"./WebCLGLVertexFragmentProgram.class":6}],2:[function(e,n,r){(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=r.WebCLGLBuffer=function(){function e(n,r,o,i){t(this,e),this._gl=n,this.type=void 0!==r||null!==r?r:"FLOAT",this._supportFormat=this._gl.FLOAT,this.linear=void 0===o&&null===o||o,this.mode=void 0!==i||null!==i?i:"SAMPLER",this.W=null,this.H=null,this.textureData=null,this.textureDataTemp=null,this.vertexData0=null,this.fBuffer=null,this.renderBuffer=null,this.fBufferTemp=null,this.renderBufferTemp=null,"SAMPLER"===this.mode&&(this.textureData=this._gl.createTexture(),this.textureDataTemp=this._gl.createTexture()),"SAMPLER"!==this.mode&&"ATTRIBUTE"!==this.mode&&"VERTEX_INDEX"!==this.mode||(this.vertexData0=this._gl.createBuffer())}return o(e,[{key:"createFramebufferAndRenderbuffer",value:function(){var e=function(){var e=this._gl.createRenderbuffer();return this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,e),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this.W,this.H),this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,null),e}.bind(this);null!=this.fBuffer&&(this._gl.deleteFramebuffer(this.fBuffer),this._gl.deleteFramebuffer(this.fBufferTemp),this._gl.deleteRenderbuffer(this.renderBuffer),this._gl.deleteRenderbuffer(this.renderBufferTemp)),this.fBuffer=this._gl.createFramebuffer(),this.renderBuffer=e(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this.fBuffer),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,this.renderBuffer),this.fBufferTemp=this._gl.createFramebuffer(),this.renderBufferTemp=e(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this.fBufferTemp),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,this.renderBufferTemp)}},{key:"writeWebGLTextureBuffer",value:function(e,t){var n=function(e,t){!1===t||void 0===t||null===t?this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,!1):this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,!0),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this._gl.bindTexture(this._gl.TEXTURE_2D,e)}.bind(this),r=function(e){e instanceof HTMLImageElement?"FLOAT4"===this.type&&this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._supportFormat,e):this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this.W,this.H,0,this._gl.RGBA,this._supportFormat,e)}.bind(this),o=function(){this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)}.bind(this);e instanceof WebGLTexture?(this.textureData=e,this.textureDataTemp=e):(n(this.textureData,t),r(e),o(),n(this.textureDataTemp,t),r(e),o()),this._gl.bindTexture(this._gl.TEXTURE_2D,null)}},{key:"writeBuffer",value:function(e,t,n){var r=function(e){if(!(e instanceof HTMLImageElement))if(this.length.constructor===Array?(this.length=this.length[0]*this.length[1],this.W=this.length[0],this.H=this.length[1]):(this.W=Math.ceil(Math.sqrt(this.length)),this.H=this.W),"FLOAT4"===this.type){e=e instanceof Float32Array?e:new Float32Array(e);var t=this.W*this.H*4;if(e.length!==t){for(var n=new Float32Array(t),r=0;r<t;r++)n[r]=null!=e[r]?e[r]:0;e=n}}else if("FLOAT"===this.type){for(var o=this.W*this.H*4,i=new Float32Array(o),s=0,a=this.W*this.H;s<a;s++){var l=4*s;i[l]=null!=e[s]?e[s]:0,i[l+1]=0,i[l+2]=0,i[l+3]=0}e=i}return e}.bind(this);void 0===n||null===n?e instanceof HTMLImageElement?this.length=e.width*e.height:this.length="FLOAT4"===this.type?e.length/4:e.length:this.length=[n[0],n[1]],"SAMPLER"===this.mode&&this.writeWebGLTextureBuffer(r(e),t),"SAMPLER"!==this.mode&&"ATTRIBUTE"!==this.mode||(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this.vertexData0),this._gl.bufferData(this._gl.ARRAY_BUFFER,e instanceof Float32Array?e:new Float32Array(e),this._gl.STATIC_DRAW)),"VERTEX_INDEX"===this.mode&&(this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this.vertexData0),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),this._gl.STATIC_DRAW)),this.createFramebufferAndRenderbuffer()}},{key:"remove",value:function(){"SAMPLER"===this.mode&&(this._gl.deleteTexture(this.textureData),this._gl.deleteTexture(this.textureDataTemp)),"SAMPLER"!==this.mode&&"ATTRIBUTE"!==this.mode&&"VERTEX_INDEX"!==this.mode||this._gl.deleteBuffer(this.vertexData0),this._gl.deleteFramebuffer(this.fBuffer),this._gl.deleteFramebuffer(this.fBufferTemp),this._gl.deleteRenderbuffer(this.renderBuffer),this._gl.deleteRenderbuffer(this.renderBufferTemp)}}]),e}();e.WebCLGLBuffer=i,n.exports.WebCLGLBuffer=i}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,r){(function(t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=new u,t=null;return arguments[0]instanceof WebGLRenderingContext?(t=arguments[0],e.setCtx(t),e._webCLGL=new a.WebCLGL(t),e.iniG(arguments),e):arguments[0]instanceof HTMLCanvasElement?(t=l.WebCLGLUtils.getWebGLContextFromCanvas(arguments[0]),e.setCtx(t),e._webCLGL=new a.WebCLGL(t),e.iniG(arguments),e):(t=l.WebCLGLUtils.getWebGLContextFromCanvas(document.createElement("canvas"),{antialias:!1}),e.setCtx(t),e._webCLGL=new a.WebCLGL(t),e.ini(arguments))}Object.defineProperty(r,"__esModule",{value:!0}),r.WebCLGLFor=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();r.gpufor=i;var a=e("./WebCLGL.class"),l=e("./WebCLGLUtils.class"),u=r.WebCLGLFor=function(){function e(t){o(this,e),this.kernels={},this.vertexFragmentPrograms={},this._args={},this._argsValues={},this.calledArgs={},this._webCLGL=null,this._gl=null}return s(e,[{key:"defineOutputTempModes",value:function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=null!=e[r]&&function(e,t){var n=!1;for(var r in t)if("indices"!==r){var o=r.split(" ");if(o.length>0&&o[1]===e){n=!0;break}}return n}(e[r],t);return n}},{key:"prepareReturnCode",value:function(e,t){var n=[],r=e.match(new RegExp(/return.*$/gm)),o=(r=r[0].replace("return ","")).match(new RegExp(/\[/gm));if(null!=o&&o.length>=1){r=r.split("[")[1].split("]")[0];for(var i="",s=0,a=0;a<r.length;a++)","===r[a]&&0===s?(n.push(i),i=""):i+=r[a],"("===r[a]&&s++,")"===r[a]&&s--;n.push(i)}else n.push(r.replace(/;$/gm,""));for(var l="",u=0;u<t.length;u++){var c=!1;for(var h in this._args)if("indices"!==h){var f=h.split(" ");if(f[1]===t[u]){var d=f[0].match(new RegExp("float4","gm"));l+=null!=d&&d.length>0?"out"+u+"_float4 = "+n[u]+";\n":"out"+u+"_float = "+n[u]+";\n",c=!0;break}}!1===c&&(l+="out"+u+"_float4 = "+n[u]+";\n")}return l}},{key:"addKernel",value:function(e){var t=e.config,n=t[0],r=t[1]instanceof Array?t[1]:[t[1]],o=t[2],i=t[3],s=this._webCLGL.createKernel(),a=[];for(var l in this._args){var u=l.split(" ")[1];if(void 0!==u&&null!==u){var c=(o+i).match(new RegExp(u.replace(/\[\d.*/,""),"gm"));"indices"!==l&&null!=c&&c.length>0&&(s.in_values[u]={},a.push(l.replace("*attr ","* ").replace(/\[\d.*/,"")))}}i="void main("+a.toString()+") {vec2 "+n+" = get_global_id();"+i.replace(/return.*$/gm,this.prepareReturnCode(i,r))+"}",s.name=e.name,s.viewSource=null!=e.viewSource&&e.viewSource,s.setKernelSource(i,o),s.output=r,s.outputTempModes=this.defineOutputTempModes(r,this._args),s.enabled=!0,s.drawMode=null!=e.drawMode?e.drawMode:4,s.depthTest=null==e.depthTest||e.depthTest,s.blend=null!=e.blend&&e.blend,s.blendEquation=null!=e.blendEquation?e.blendEquation:"FUNC_ADD",s.blendSrcMode=null!=e.blendSrcMode?e.blendSrcMode:"SRC_ALPHA",s.blendDstMode=null!=e.blendDstMode?e.blendDstMode:"ONE_MINUS_SRC_ALPHA",this.kernels[Object.keys(this.kernels).length.toString()]=s}},{key:"addGraphic",value:function(e){var t=e.config,n=[null],r=void 0,o=void 0,i=void 0,s=void 0;5===t.length?(n=t[0]instanceof Array?t[0]:[t[0]],r=t[1],o=t[2],i=t[3],s=t[4]):(r=t[0],o=t[1],i=t[2],s=t[3]);var a=this._webCLGL.createVertexFragmentProgram(),l=[],u=[];for(var c in this._args){var h=c.split(" ")[1];if(void 0!==h&&null!==h){var f=(r+o).match(new RegExp(h.replace(/\[\d.*/,""),"gm"));"indices"!==c&&null!=f&&f.length>0&&(a.in_vertex_values[h]={},l.push(c.replace(/\[\d.*/,"")))}}for(var d in this._args){var g=d.split(" ")[1];if(void 0!==g&&null!==g){var _=(i+s).match(new RegExp(g.replace(/\[\d.*/,""),"gm"));"indices"!==d&&null!=_&&_.length>0&&(a.in_fragment_values[g]={},u.push(d.replace(/\[\d.*/,"")))}}o="void main("+l.toString()+") {"+o+"}",s="void main("+u.toString()+") {"+s.replace(/return.*$/gm,this.prepareReturnCode(s,n))+"}",a.name=e.name,a.viewSource=null!=e.viewSource&&e.viewSource,a.setVertexSource(o,r),a.setFragmentSource(s,i),a.output=n,a.outputTempModes=this.defineOutputTempModes(n,this._args),a.enabled=!0,a.drawMode=null!=e.drawMode?e.drawMode:4,a.depthTest=null==e.depthTest||e.depthTest,a.blend=null==e.blend||e.blend,a.blendEquation=null!=e.blendEquation?e.blendEquation:"FUNC_ADD",a.blendSrcMode=null!=e.blendSrcMode?e.blendSrcMode:"SRC_ALPHA",a.blendDstMode=null!=e.blendDstMode?e.blendDstMode:"ONE_MINUS_SRC_ALPHA",this.vertexFragmentPrograms[Object.keys(this.vertexFragmentPrograms).length.toString()]=a}},{key:"checkArg",value:function(e,t,n){var r=[],o=!1,i=!1;for(var s in t)for(var a in t[s].in_values)if(t[s].in_values[a],a===e){r.push(t[s]);break}for(var l in n){for(var u in n[l].in_vertex_values)if(n[l].in_vertex_values[u],u===e){o=!0;break}for(var c in n[l].in_fragment_values)if(n[l].in_fragment_values[c],c===e){i=!0;break}}return{usedInVertex:o,usedInFragment:i,kernelPr:r}}},{key:"fillArg",value:function(e,t){this._webCLGL.fillBuffer(this._argsValues[e].textureData,t,this._argsValues[e].fBuffer),this._webCLGL.fillBuffer(this._argsValues[e].textureDataTemp,t,this._argsValues[e].fBufferTemp)}},{key:"getAllArgs",value:function(){return this._argsValues}},{key:"addArg",value:function(e){this._args[e]=null}},{key:"getGPUForArg",value:function(e,t){!1===this.calledArgs.hasOwnProperty(e)&&(this.calledArgs[e]=[]),-1===this.calledArgs[e].indexOf(t)&&this.calledArgs[e].push(t),!1===t.calledArgs.hasOwnProperty(e)&&(t.calledArgs[e]=[]),-1===t.calledArgs[e].indexOf(this)&&t.calledArgs[e].push(this);for(var n in t._args){var r=n.split(" ")[1];if(r===e){this._args[n]=t._args[n],this._argsValues[r]=t._argsValues[r];break}}}},{key:"setArg",value:function(e,t,n,r){if("indices"===e)this.setIndices(t);else for(var o in this._args){var i=o.split(" ")[1];if(void 0!==i&&i.replace(/\[\d.*/,"")===e){i!==e&&(e=i);var s=!1;if(null!=o.match(/\*/gm)){var a=this.checkArg(e,this.kernels,this.vertexFragmentPrograms),l="SAMPLER";!0===a.usedInVertex&&0===a.kernelPr.length&&!1===a.usedInFragment&&(l="ATTRIBUTE");var u=o.split("*")[0].toUpperCase();void 0!==r&&null!==r&&(u=r),void 0!==t&&null!==t?((!1===this._argsValues.hasOwnProperty(e)||!0===this._argsValues.hasOwnProperty(e)&&null==this._argsValues[e])&&(this._argsValues[e]=this._webCLGL.createBuffer(u,!1,l),this._argsValues[e].argument=e,s=!0),this._argsValues[e].writeBuffer(t,!1,n)):this._argsValues[e]=null}else void 0!==t&&null!==t&&(this._argsValues[e]=t),s=!0;if(!0===s&&!0===this.calledArgs.hasOwnProperty(e))for(var c=0;c<this.calledArgs[e].length;c++)this.calledArgs[e][c]._argsValues[e]=this._argsValues[e];break}}return t}},{key:"readArg",value:function(e){return this._webCLGL.readBuffer(this._argsValues[e])}},{key:"setIndices",value:function(e){this.CLGL_bufferIndices=this._webCLGL.createBuffer("FLOAT",!1,"VERTEX_INDEX"),this.CLGL_bufferIndices.writeBuffer(e)}},{key:"getCtx",value:function(){return this._webCLGL.getContext()}},{key:"setCtx",value:function(e){this._gl=e}},{key:"getWebCLGL",value:function(){return this._webCLGL}},{key:"onPreProcessKernel",value:function(e,t){this.kernels[e].onpre=t}},{key:"onPostProcessKernel",value:function(e,t){this.kernels[e].onpost=t}},{key:"enableKernel",value:function(e){this.kernels["0"|e.toString()].enabled=!0}},{key:"disableKernel",value:function(e){this.kernels["0"|e.toString()].enabled=!1}},{key:"getKernel",value:function(e){for(var t in this.kernels)if(t===e)return this.kernels[t];return null}},{key:"getAllKernels",value:function(){return this.kernels}},{key:"onPreProcessGraphic",value:function(e,t){this.vertexFragmentPrograms[e].onpre=t}},{key:"onPostProcessGraphic",value:function(e,t){this.vertexFragmentPrograms[e].onpost=t}},{key:"enableGraphic",value:function(e){this.vertexFragmentPrograms["0"|e.toString()].enabled=!0}},{key:"disableGraphic",value:function(e){this.vertexFragmentPrograms["0"|e.toString()].enabled=!1}},{key:"getVertexFragmentProgram",value:function(e){for(var t in this.vertexFragmentPrograms)if(t===e)return this.vertexFragmentPrograms[t];return null}},{key:"getAllVertexFragmentProgram",value:function(){return this.vertexFragmentPrograms}},{key:"processKernel",value:function(e,t,n){if(!0===e.enabled){if(void 0!==n&&null!==n&&!0===n&&(this.arrMakeCopy=[]),!0===e.depthTest?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),!0===e.blend?this._gl.enable(this._gl.BLEND):this._gl.disable(this._gl.BLEND),this._gl.blendFunc(this._gl[e.blendSrcMode],this._gl[e.blendDstMode]),this._gl.blendEquation(this._gl[e.blendEquation]),void 0!==e.onpre&&null!==e.onpre&&e.onpre(),void 0===t||null===t||!0===t){for(var r=!1,o=0;o<e.output.length;o++)if(null!=e.output[o]&&!0===e.outputTempModes[o]){r=!0;break}!0===r?(this._webCLGL.enqueueNDRangeKernel(e,l.WebCLGLUtils.getOutputBuffers(e,this._argsValues),!0,this._argsValues),this.arrMakeCopy.push(e)):this._webCLGL.enqueueNDRangeKernel(e,l.WebCLGLUtils.getOutputBuffers(e,this._argsValues),!1,this._argsValues)}else this._webCLGL.enqueueNDRangeKernel(e,l.WebCLGLUtils.getOutputBuffers(e,this._argsValues),!1,this._argsValues);void 0!==e.onpost&&null!==e.onpost&&e.onpost(),void 0!==n&&null!==n&&!0===n&&this.processCopies()}}},{key:"processCopies",value:function(e){for(var t=0;t<this.arrMakeCopy.length;t++)this._webCLGL.copy(this.arrMakeCopy[t],l.WebCLGLUtils.getOutputBuffers(this.arrMakeCopy[t],this._argsValues))}},{key:"processKernels",value:function(e){this.arrMakeCopy=[];for(var t in this.kernels)this.processKernel(this.kernels[t],e);this.processCopies()}},{key:"processGraphic",value:function(e){var t=[];for(var n in this.vertexFragmentPrograms){var r=this.vertexFragmentPrograms[n];if(!0===r.enabled){var o=void 0!==e&&null!==e||void 0===this.CLGL_bufferIndices||null===this.CLGL_bufferIndices?this._argsValues[e]:this.CLGL_bufferIndices;if(void 0!==o&&null!==o&&o.length>0){!0===r.depthTest?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),!0===r.blend?this._gl.enable(this._gl.BLEND):this._gl.disable(this._gl.BLEND),this._gl.blendFunc(this._gl[r.blendSrcMode],this._gl[r.blendDstMode]),this._gl.blendEquation(this._gl[r.blendEquation]),void 0!==r.onpre&&null!==r.onpre&&r.onpre();for(var i=!1,s=0;s<r.output.length;s++)if(null!=r.output[s]&&!0===r.outputTempModes[s]){i=!0;break}!0===i?(this._webCLGL.enqueueVertexFragmentProgram(r,o,r.drawMode,l.WebCLGLUtils.getOutputBuffers(r,this._argsValues),!0,this._argsValues),t.push(r)):this._webCLGL.enqueueVertexFragmentProgram(r,o,r.drawMode,l.WebCLGLUtils.getOutputBuffers(r,this._argsValues),!1,this._argsValues),void 0!==r.onpost&&null!==r.onpost&&r.onpost()}}}for(var a=0;a<t.length;a++)this._webCLGL.copy(t[a],l.WebCLGLUtils.getOutputBuffers(t[a],this._argsValues))}},{key:"ini",value:function(){var e=arguments[0],t=void 0,n=void 0,r=void 0;e.length>3?(this._args=e[0],t=e[1],n=e[2],r=e[3]):(this._args=e[0],t=e[1],n="FLOAT",r=e[2]);var o=0;for(var i in this._args){var s=this._args[i];this.setArg(i.split(" ")[1],s),0===o&&(s instanceof Array||s instanceof Float32Array||s instanceof Uint8Array||s instanceof HTMLImageElement)&&(o=s.length)}return"FLOAT"===n?this.addArg("float* result"):this.addArg("float4* result"),this.setArg("result",new Float32Array(o),null,n),this.addKernel({type:"KERNEL",name:"SIMPLE_KERNEL",viewSource:!1,config:[t,["result"],"",r]}),this.processKernels(),this._webCLGL.readBuffer(this._argsValues.result)}},{key:"iniG",value:function(){this._webCLGL.getContext().depthFunc(this._webCLGL.getContext().LEQUAL),this._webCLGL.getContext().clearDepth(1);var e=arguments[0];this._args=e[1];for(var t=2;t<e.length;t++)"KERNEL"===e[t].type?this.addKernel(e[t]):"GRAPHIC"===e[t].type&&this.addGraphic(e[t]);for(var n in this._args){var r=this._args[n];"indices"===n?null!==r&&this.setIndices(r):this.setArg(n.split(" ")[1],r)}}}]),e}();t.WebCLGLFor=u,n.exports.WebCLGLFor=u,t.gpufor=i,n.exports.gpufor=i}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./WebCLGL.class":1,"./WebCLGLUtils.class":5}],4:[function(e,n,r){(function(t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.WebCLGLKernel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./WebCLGLUtils.class"),a=r.WebCLGLKernel=function(){function e(t,n,r){o(this,e),this._gl=t;var i=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);this._precision=0!==i.precision?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var s=this._gl.getExtension("WEBGL_draw_buffers");this._maxDrawBuffers=null,null!=s&&(this._maxDrawBuffers=this._gl.getParameter(s.MAX_DRAW_BUFFERS_WEBGL)),this.name="",this.enabled=!0,this.depthTest=null,this.blend=null,this.blendSrcMode=null,this.blendDstMode=null,this.blendEquation=null,this.onpre=null,this.onpost=null,this.viewSource=!1,this.in_values={},this.output=null,this.outputTempModes=null,this.fBuffer=null,this.fBufferTemp=null,this.fBufferLength=0,this.fBufferCount=0,void 0!==n&&null!==n&&this.setKernelSource(n,r)}return i(e,[{key:"setKernelSource",value:function(e,t){for(var n=function(){var e=this._precision+"attribute vec3 aVertexPosition;\nvarying vec2 global_id;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nglobal_id = aVertexPosition.xy*0.5+0.5;\n}\n",t="#extension GL_EXT_draw_buffers : require\n"+this._precision+s.WebCLGLUtils.lines_fragment_attrs(this.in_values)+"varying vec2 global_id;\nuniform float uBufferWidth;vec2 get_global_id() {\nreturn global_id;\n}\n"+s.WebCLGLUtils.get_global_id3_GLSLFunctionString()+s.WebCLGLUtils.get_global_id2_GLSLFunctionString()+this._head+"void main(void) {\n"+s.WebCLGLUtils.lines_drawBuffersInit(8)+this._source+s.WebCLGLUtils.lines_drawBuffersWrite(8)+"}\n";this.kernel=this._gl.createProgram(),(new s.WebCLGLUtils).createShader(this._gl,"WEBCLGL",e,t,this.kernel),this.attr_VertexPos=this._gl.getAttribLocation(this.kernel,"aVertexPosition"),this.uBufferWidth=this._gl.getUniformLocation(this.kernel,"uBufferWidth");for(var n in this.in_values){var r={float4_fromSampler:"SAMPLER",float_fromSampler:"SAMPLER",float:"UNIFORM",float4:"UNIFORM",mat4:"UNIFORM"}[this.in_values[n].type];s.WebCLGLUtils.checkArgNameInitialization(this.in_values,n),this.in_values[n].location=[this._gl.getUniformLocation(this.kernel,n.replace(/\[\d.*/,""))],this.in_values[n].expectedMode=r}return"VERTEX PROGRAM\n"+e+"\n FRAGMENT PROGRAM\n"+t}.bind(this),r=e.split(")")[0].split("(")[1].split(","),o=0,i=r.length;o<i;o++)if(null!==r[o].match(/\*/gm)){var a=r[o].split("*")[1].trim();s.WebCLGLUtils.checkArgNameInitialization(this.in_values,a),null!=r[o].match(/float4/gm)?this.in_values[a].type="float4_fromSampler":null!=r[o].match(/float/gm)&&(this.in_values[a].type="float_fromSampler")}else if(""!==r[o]){var l=r[o].split(" ")[1].trim();for(var u in this.in_values)if(u.replace(/\[\d.*/,"")===l){l=u;break}s.WebCLGLUtils.checkArgNameInitialization(this.in_values,l),null!=r[o].match(/float4/gm)?this.in_values[l].type="float4":null!=r[o].match(/float/gm)?this.in_values[l].type="float":null!=r[o].match(/mat4/gm)&&(this.in_values[l].type="mat4")}this._head=void 0!==t&&null!==t?t:"",this._head=this._head.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this._head=s.WebCLGLUtils.parseSource(this._head,this.in_values),this._source=e.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this._source=this._source.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this._source=s.WebCLGLUtils.parseSource(this._source,this.in_values);var c=n();!0===this.viewSource&&(console.log("%c KERNEL: "+this.name,"font-size: 20px; color: blue"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+t+e,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+c,"color: darkgray"))}}]),e}();t.WebCLGLKernel=a,n.exports.WebCLGLKernel=a}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./WebCLGLUtils.class":5}],5:[function(e,n,r){(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=r.WebCLGLUtils=function(){function e(){t(this,e)}return o(e,[{key:"loadQuad",value:function(e,t,n){var r=void 0===t||null===t?.5:t,o=void 0===n||null===n?.5:n;this.vertexArray=[-r,-o,0,r,-o,0,r,o,0,-r,o,0],this.textureArray=[0,0,0,1,0,0,1,1,0,0,1,0],this.indexArray=[0,1,2,0,2,3];var i={};return i.vertexArray=this.vertexArray,i.textureArray=this.textureArray,i.indexArray=this.indexArray,i}},{key:"createShader",value:function(e,t,n,r,o){var i=!1,s=!1,a=function(t,n){console.log(t);for(var r=[],o=t.split("\n"),i=0,s=o.length;i<s;i++)if(null!=o[i].match(/^ERROR/gim)){var a=o[i].split(":"),l=parseInt(a[2]);r.push([l,o[i]])}var u=e.getShaderSource(n).split("\n");u.unshift("");for(var c=0,h=u.length;c<h;c++){for(var f=!1,d="",g=0,_=r.length;g<_;g++)if(c===r[g][0]){f=!0,d=r[g][1];break}!1===f?console.log("%c"+c+" %c"+u[c],"color:black","color:blue"):console.log("%c►►%c"+c+" %c"+u[c]+"\n%c"+d,"color:red","color:black","color:blue","color:red")}}.bind(this),l=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(l,n),e.compileShader(l),e.getShaderParameter(l,e.COMPILE_STATUS))e.attachShader(o,l),i=!0;else{var u=e.getShaderInfoLog(l);console.log("%c"+t+" ERROR (vertex program)","color:red"),void 0!==u&&null!==u&&a(u,l)}var c=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(c,r),e.compileShader(c),e.getShaderParameter(c,e.COMPILE_STATUS))e.attachShader(o,c),s=!0;else{var h=e.getShaderInfoLog(c);console.log("%c"+t+" ERROR (fragment program)","color:red"),void 0!==h&&null!==h&&a(h,c)}if(!0===i&&!0===s){if(e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS))return!0;console.log("Error shader program "+t+":\n ");var f=e.getProgramInfoLog(o);return void 0!==f&&null!==f&&console.log(f),!1}return!1}},{key:"pack",value:function(e){var t=[1/255,1/255,1/255,0],n=e,r=this.fract(255*n),o=this.fract(255*r),i=[n,r,o,this.fract(255*o)],s=[i[1]*t[0],i[2]*t[1],i[3]*t[2],i[3]*t[3]];return[i[0]-s[0],i[1]-s[1],i[2]-s[2],i[3]-s[3]]}},{key:"unpack",value:function(e){var t=[1,1/255,1/65025,1/16581375];return this.dot4(e,t)}}],[{key:"getWebGLContextFromCanvas",value:function(e,t){var n=null;if(null==n)try{n=void 0===t||null===t?e.getContext("webgl"):e.getContext("webgl",t),console.log(null==n?"no webgl":"using webgl")}catch(e){n=null}if(null==n)try{n=void 0===t||null===t?e.getContext("experimental-webgl"):e.getContext("experimental-webgl",t),console.log(null==n?"no experimental-webgl":"using experimental-webgl")}catch(e){n=null}return null==n&&(n=!1),n}},{key:"getUint8ArrayFromHTMLImageElement",value:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height).data}},{key:"dot4",value:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},{key:"fract",value:function(e){return e>0?e-Math.floor(e):e-Math.ceil(e)}},{key:"packGLSLFunctionString",value:function(){return"vec4 pack (float depth) {\nconst vec4 bias = vec4(1.0 / 255.0,\n1.0 / 255.0,\n1.0 / 255.0,\n0.0);\nfloat r = depth;\nfloat g = fract(r * 255.0);\nfloat b = fract(g * 255.0);\nfloat a = fract(b * 255.0);\nvec4 colour = vec4(r, g, b, a);\nreturn colour - (colour.yzww * bias);\n}\n"}},{key:"unpackGLSLFunctionString",value:function(){return"float unpack (vec4 colour) {\nconst vec4 bitShifts = vec4(1.0,\n1.0 / 255.0,\n1.0 / (255.0 * 255.0),\n1.0 / (255.0 * 255.0 * 255.0));\nreturn dot(colour, bitShifts);\n}\n"}},{key:"getOutputBuffers",value:function(e,t){var n=null;if(void 0!==e.output&&null!==e.output)if(n=[],null!=e.output[0])for(var r=0;r<e.output.length;r++)n[r]=t[e.output[r]];else n=null;return n}},{key:"parseSource",value:function(e,t){for(var n in t){var r=new RegExp(n+"\\[(?!\\d).*?\\]","gm"),o=e.match(r);if(null!=o)for(var i=0,s=o.length;i<s;i++){var a=new RegExp("```(s|\t)*gl.*"+o[i]+".*```[^```(s|\t)*gl]","gm");if(null==e.match(a)){var l=o[i].split("[")[0],u=o[i].split("[")[1].split("]")[0];e={float4_fromSampler:e.replace(l+"["+u+"]","texture2D("+l+","+u+")"),float_fromSampler:e.replace(l+"["+u+"]","texture2D("+l+","+u+").x"),float4_fromAttr:e.replace(l+"["+u+"]",l),float_fromAttr:e.replace(l+"["+u+"]",l)}[t[n].type]}}}return e=e.replace(/```(\s|\t)*gl/gi,"").replace(/```/gi,"").replace(/;/gi,";\n").replace(/}/gi,"}\n").replace(/{/gi,"{\n")}},{key:"lines_vertex_attrs",value:function(e){var t="";for(var n in e)t+={float4_fromSampler:"uniform sampler2D "+n+";",float_fromSampler:"uniform sampler2D "+n+";",float4_fromAttr:"attribute vec4 "+n+";",float_fromAttr:"attribute float "+n+";",float:"uniform float "+n+";",float4:"uniform vec4 "+n+";",mat4:"uniform mat4 "+n+";"}[e[n].type]+"\n";return t}},{key:"lines_fragment_attrs",value:function(e){var t="";for(var n in e)t+={float4_fromSampler:"uniform sampler2D "+n+";",float_fromSampler:"uniform sampler2D "+n+";",float:"uniform float "+n+";",float4:"uniform vec4 "+n+";",mat4:"uniform mat4 "+n+";"}[e[n].type]+"\n";return t}},{key:"lines_drawBuffersInit",value:function(e){for(var t="",n=0,r=e;n<r;n++)t+="float out"+n+"_float = -999.99989;\nvec4 out"+n+"_float4;\n";return t}},{key:"lines_drawBuffersWriteInit",value:function(e){for(var t="",n=0,r=e;n<r;n++)t+="layout(location = "+n+") out vec4 outCol"+n+";\n";return t}},{key:"lines_drawBuffersWrite",value:function(e){for(var t="",n=0,r=e;n<r;n++)t+="if(out"+n+"_float != -999.99989) gl_FragData["+n+"] = vec4(out"+n+"_float,0.0,0.0,1.0);\n else gl_FragData["+n+"] = out"+n+"_float4;\n";return t}},{key:"checkArgNameInitialization",value:function(e,t){!1===e.hasOwnProperty(t)&&(e[t]={type:null,expectedMode:null,location:null})}},{key:"get_global_id3_GLSLFunctionString",value:function(){return"vec2 get_global_id(float id, float bufferWidth, float geometryLength) {\nfloat texelSize = 1.0/bufferWidth;float num = (id*geometryLength)/bufferWidth;float column = fract(num)+(texelSize/2.0);float row = (floor(num)/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}},{key:"get_global_id2_GLSLFunctionString",value:function(){return"vec2 get_global_id(vec2 id, float bufferWidth) {\nfloat texelSize = 1.0/bufferWidth;float column = (id.x/bufferWidth)+(texelSize/2.0);float row = (id.y/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}}]),e}();e.WebCLGLUtils=i,n.exports.WebCLGLUtils=i}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,r){(function(t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.WebCLGLVertexFragmentProgram=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./WebCLGLUtils.class"),a=r.WebCLGLVertexFragmentProgram=function(){function e(t,n,r,i,s){o(this,e),this._gl=t;var a=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);this._precision=0!==a.precision?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var l=this._gl.getExtension("WEBGL_draw_buffers");this._maxDrawBuffers=null,null!=l&&(this._maxDrawBuffers=this._gl.getParameter(l.MAX_DRAW_BUFFERS_WEBGL)),this.name="",this.viewSource=!1,this.in_vertex_values={},this.in_fragment_values={},this._vertexP_ready=!1,this._fragmentP_ready=!1,this._vertexHead=null,this._vertexSource=null,this._fragmentHead=null,this._fragmentSource=null,this.output=null,this.outputTempModes=null,this.fBuffer=null,this.fBufferTemp=null,this.drawMode=4,void 0!==n&&null!==n&&this.setVertexSource(n,r),void 0!==i&&null!==i&&this.setFragmentSource(i,s)}return i(e,[{key:"compileVertexFragmentSource",value:function(){var e=this._precision+"uniform float uOffset;\nuniform float uBufferWidth;"+s.WebCLGLUtils.lines_vertex_attrs(this.in_vertex_values)+s.WebCLGLUtils.unpackGLSLFunctionString()+s.WebCLGLUtils.get_global_id3_GLSLFunctionString()+s.WebCLGLUtils.get_global_id2_GLSLFunctionString()+this._vertexHead+"void main(void) {\n"+this._vertexSource+"}\n",t="#extension GL_EXT_draw_buffers : require\n"+this._precision+s.WebCLGLUtils.lines_fragment_attrs(this.in_fragment_values)+s.WebCLGLUtils.get_global_id3_GLSLFunctionString()+s.WebCLGLUtils.get_global_id2_GLSLFunctionString()+this._fragmentHead+"void main(void) {\n"+s.WebCLGLUtils.lines_drawBuffersInit(8)+this._fragmentSource+s.WebCLGLUtils.lines_drawBuffersWrite(8)+"}\n";this.vertexFragmentProgram=this._gl.createProgram(),(new s.WebCLGLUtils).createShader(this._gl,"WEBCLGL VERTEX FRAGMENT PROGRAM",e,t,this.vertexFragmentProgram),this.uOffset=this._gl.getUniformLocation(this.vertexFragmentProgram,"uOffset"),this.uBufferWidth=this._gl.getUniformLocation(this.vertexFragmentProgram,"uBufferWidth");for(var n in this.in_vertex_values){var r={float4_fromSampler:"SAMPLER",float_fromSampler:"SAMPLER",float4_fromAttr:"ATTRIBUTE",float_fromAttr:"ATTRIBUTE",float:"UNIFORM",float4:"UNIFORM",mat4:"UNIFORM"}[this.in_vertex_values[n].type];s.WebCLGLUtils.checkArgNameInitialization(this.in_vertex_values,n);var o="ATTRIBUTE"===r?this._gl.getAttribLocation(this.vertexFragmentProgram,n):this._gl.getUniformLocation(this.vertexFragmentProgram,n.replace(/\[\d.*/,""));this.in_vertex_values[n].location=[o],this.in_vertex_values[n].expectedMode=r}for(var i in this.in_fragment_values){var a={float4_fromSampler:"SAMPLER",float_fromSampler:"SAMPLER",float:"UNIFORM",float4:"UNIFORM",mat4:"UNIFORM"}[this.in_fragment_values[i].type];s.WebCLGLUtils.checkArgNameInitialization(this.in_fragment_values,i),this.in_fragment_values[i].location=[this._gl.getUniformLocation(this.vertexFragmentProgram,i.replace(/\[\d.*/,""))],this.in_fragment_values[i].expectedMode=a}return"VERTEX PROGRAM\n"+e+"\n FRAGMENT PROGRAM\n"+t}},{key:"setVertexSource",value:function(e,t){for(var n=e.split(")")[0].split("(")[1].split(","),r=0,o=n.length;r<o;r++)if(null!==n[r].match(/\*attr/gm)){var i=n[r].split("*attr")[1].trim();s.WebCLGLUtils.checkArgNameInitialization(this.in_vertex_values,i),null!=n[r].match(/float4/gm)?this.in_vertex_values[i].type="float4_fromAttr":null!=n[r].match(/float/gm)&&(this.in_vertex_values[i].type="float_fromAttr")}else if(null!==n[r].match(/\*/gm)){var a=n[r].split("*")[1].trim();s.WebCLGLUtils.checkArgNameInitialization(this.in_vertex_values,a),null!=n[r].match(/float4/gm)?this.in_vertex_values[a].type="float4_fromSampler":null!=n[r].match(/float/gm)&&(this.in_vertex_values[a].type="float_fromSampler")}else if(""!==n[r]){var l=n[r].split(" ")[1].trim();for(var u in this.in_vertex_values)if(u.replace(/\[\d.*/,"")===l){l=u;break}s.WebCLGLUtils.checkArgNameInitialization(this.in_vertex_values,l),null!=n[r].match(/float4/gm)?this.in_vertex_values[l].type="float4":null!=n[r].match(/float/gm)?this.in_vertex_values[l].type="float":null!=n[r].match(/mat4/gm)&&(this.in_vertex_values[l].type="mat4")}if(this._vertexHead=void 0!==t&&null!==t?t:"",this._vertexHead=this._vertexHead.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this._vertexHead=s.WebCLGLUtils.parseSource(this._vertexHead,this.in_vertex_values),this._vertexSource=e.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this._vertexSource=this._vertexSource.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this._vertexSource=s.WebCLGLUtils.parseSource(this._vertexSource,this.in_vertex_values),this._vertexP_ready=!0,!0===this._fragmentP_ready){var c=this.compileVertexFragmentSource();!0===this.viewSource&&(console.log("%c VFP: "+this.name,"font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+t+e,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+c,"color: darkgray"))}}},{key:"setFragmentSource",value:function(e,t){for(var n=e.split(")")[0].split("(")[1].split(","),r=0,o=n.length;r<o;r++)if(null!==n[r].match(/\*/gm)){var i=n[r].split("*")[1].trim();s.WebCLGLUtils.checkArgNameInitialization(this.in_fragment_values,i),null!=n[r].match(/float4/gm)?this.in_fragment_values[i].type="float4_fromSampler":null!=n[r].match(/float/gm)&&(this.in_fragment_values[i].type="float_fromSampler")}else if(""!==n[r]){var a=n[r].split(" ")[1].trim();for(var l in this.in_fragment_values)if(l.replace(/\[\d.*/,"")===a){a=l;break}s.WebCLGLUtils.checkArgNameInitialization(this.in_fragment_values,a),null!=n[r].match(/float4/gm)?this.in_fragment_values[a].type="float4":null!=n[r].match(/float/gm)?this.in_fragment_values[a].type="float":null!=n[r].match(/mat4/gm)&&(this.in_fragment_values[a].type="mat4")}if(this._fragmentHead=void 0!==t&&null!==t?t:"",this._fragmentHead=this._fragmentHead.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this._fragmentHead=s.WebCLGLUtils.parseSource(this._fragmentHead,this.in_fragment_values),this._fragmentSource=e.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this._fragmentSource=this._fragmentSource.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this._fragmentSource=s.WebCLGLUtils.parseSource(this._fragmentSource,this.in_fragment_values),this._fragmentP_ready=!0,!0===this._vertexP_ready){var u=this.compileVertexFragmentSource();!0===this.viewSource&&(console.log("%c VFP: ","font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+t+e,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+u,"color: darkgray"))}}}]),e}();t.WebCLGLVertexFragmentProgram=a,n.exports.WebCLGLVertexFragmentProgram=a}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./WebCLGLUtils.class":5}],7:[function(e,n,r){(function(t){"use strict";e("./WebCLGL.class"),e("./WebCLGLBuffer.class"),e("./WebCLGLFor.class"),e("./WebCLGLKernel.class"),e("./WebCLGLUtils.class"),e("./WebCLGLVertexFragmentProgram.class"),n.exports.WebCLGL=t.WebCLGL=WebCLGL,n.exports.WebCLGLBuffer=t.WebCLGLBuffer=WebCLGLBuffer,n.exports.WebCLGLFor=t.WebCLGLFor=WebCLGLFor,n.exports.WebCLGLKernel=t.WebCLGLKernel=WebCLGLKernel,n.exports.WebCLGLUtils=t.WebCLGLUtils=WebCLGLUtils,n.exports.WebCLGLVertexFragmentProgram=t.WebCLGLVertexFragmentProgram=WebCLGLVertexFragmentProgram}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./WebCLGL.class":1,"./WebCLGLBuffer.class":2,"./WebCLGLFor.class":3,"./WebCLGLKernel.class":4,"./WebCLGLUtils.class":5,"./WebCLGLVertexFragmentProgram.class":6}]},{},[7])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ArrayGenerator=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./Utils.class"),a=n.ArrayGenerator=function(){function e(){o(this,e)}return i(e,[{key:"volumeArray",value:function(e){if(this.arrayNodeDestination=[],this.arrayNodeVertexColor=[],this.vo=e,this.vo instanceof StormVoxelizator==!1)return alert("You must select a voxelizator object with albedo fillmode enabled."),!1;if(void 0===this.vo.image3D_VoxelsColor||null===this.vo.image3D_VoxelsColor)return alert("You must select a voxelizator object with albedo fillmode enabled."),!1;this.data=this.vo.clglBuff_VoxelsColor.items[0].inData;for(var t=0,n=0,r=this.data.length/4;n<r;n++){var o=4*n;this.data[o+3]>0&&t++}var i=(this.currentNodeId-1)/t;this.incremNodesCell=0;var s=-1;this.currentVoxelCell=null,this.CCX=0,this.CCY=0,this.CCZ=0,this.CCXMAX=this.vo.resolution-1,this.CCYMAX=this.vo.resolution-1,this.CCZMAX=this.vo.resolution-1;for(var a=void 0,l=void 0,u=function(){for(;;){if(this.CCX===this.CCXMAX&&this.CCZ===this.CCZMAX&&this.CCY===this.CCYMAX)break;if(this.CCX===this.CCXMAX&&this.CCZ===this.CCZMAX?(this.CCX=0,this.CCZ=0,this.CCY++):this.CCX===this.CCXMAX?(this.CCX=0,this.CCZ++):this.CCX++,this.currentVoxelCell=this.CCY*(this.vo.resolution*this.vo.resolution)+this.CCZ*this.vo.resolution+this.CCX,this.data[4*this.currentVoxelCell+3]>0&&(this.incremNodesCell+=i,this.incremNodesCell>=1)){this.incremNodesCell-=1;break}}}.bind(this),c=0;c<this.arrayNodeId.length;c++)s!==this.arrayNodeId[c]?(s=this.arrayNodeId[c],this.incremNodesCell>=1?this.incremNodesCell-=1:u(),a=(a=(a=$V3([0,0,0]).add($V3([-this.vo.size/2,-this.vo.size/2,-this.vo.size/2]))).add($V3([this.vo.cs*this.CCX*1,this.vo.cs*this.CCY*1,this.vo.cs*(this.CCZMAX-this.CCZ)*1]))).add($V3([this.vo.cs*Math.random(),this.vo.cs*Math.random(),this.vo.cs*Math.random()])),l=$V3([this.data[4*this.currentVoxelCell]/255,this.data[4*this.currentVoxelCell+1]/255,this.data[4*this.currentVoxelCell+2]/255]),this.arrayNodeDestination.push(a.e[0],a.e[1],a.e[2],1),this.arrayNodeVertexColor.push(l.e[0],l.e[1],l.e[2],1)):(this.arrayNodeDestination.push(a.e[0],a.e[1],a.e[2],1),this.arrayNodeVertexColor.push(l.e[0],l.e[1],l.e[2],1));comp_renderer_nodes.setArg("dest",function(){return this.arrayNodeDestination}.bind(this),this.splitNodes),comp_renderer_nodes.setArg("nodeVertexCol",function(){return this.arrayNodeVertexColor}.bind(this),this.splitNodes)}}],[{key:"randomArray",value:function(e){for(var t=[],n=0;n<e.count;n++)"float"===e.type?t.push(-e.offset/2+Math.random()*e.offset):t.push(-e.offset/2+Math.random()*e.offset,-e.offset/2+Math.random()*e.offset,-e.offset/2+Math.random()*e.offset,-e.offset/2+Math.random()*e.offset);return t}},{key:"widthHeightArray",value:function(e){for(var t=[],n=e.width*e.height,r=e.count/n,o=0,i=0,s=0,a=void 0!==e.spacing&&null!==e.spacing?e.spacing:.01,l=0;l<e.count;l++)o>=r&&(++i>e.width-1&&(i=0,s++),o-=r),o+=1,t.push(i*a,0,s*a,1);return t}},{key:"float4Array",value:function(e){for(var t=[],n=0;n<e.count;n++)t.push(e.float4[0],e.float4[1],e.float4[2],e.float4[3]);return t}},{key:"sphericalArray",value:function(e){for(var t=[],n=void 0===e?1:e.radius,r=0;r<e.count;r++){var o=360*Math.random(),i=180*Math.random();t.push(Math.cos(o)*Math.abs(Math.sin(i))*n,Math.cos(i)*n*Math.random(),Math.sin(o)*Math.abs(Math.sin(i))*n,1)}return t}},{key:"hemArray",value:function(e){for(var t=[],n=void 0===e?1:e.radius,r=0;r<e.count;r++){var o=(new s.Utils).getVector(e.normalVector,e.degrees);t.push(o.e[0]*n,o.e[1]*n,o.e[2]*n,1)}return t}},{key:"imageArray",value:function(e){for(var t=s.Utils.getUint8ArrayFromHTMLImageElement(e.image),n=[],r=0;r<e.count;r++){var o=4*r;n.push(parseFloat(t[o]/255),parseFloat(t[o+1]/255),parseFloat(t[o+2]/255),parseFloat(t[o+3]/255))}return n}}]),e}();r.ArrayGenerator=a,t.exports.ArrayGenerator=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Utils.class":22}],3:[function(e,t,n){(function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n.Component=function(){function e(){r(this,e),this.type=null,this.node=null}return o(e,[{key:"initialize",value:function(e,t){}},{key:"tick",value:function(e){}}]),e}();e.Component=i,t.exports.Component=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentControllerTransformTarget=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Component.class"),u=e("./Constants"),c=n.ComponentControllerTransformTarget=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=u.Constants.COMPONENT_TYPES.CONTROLLER_TRANSFORM_TARGET,e.node=null,e.gl=null,e.comp_transformTarget=null,e.comp_projection=null,e._vel=.1,e.forward=0,e.backwardE=0,e.leftE=0,e.rightE=0,e.frontE=0,e.backE=0,e.leftButton=0,e.middleButton=0,e.rightButton=0,e.leftButtonAction="ORBIT",e.middleButtonAction="PAN",e.rightButtonAction="ZOOM",e.lastX=0,e.lastY=0,e.lockRotX=!1,e.lockRotY=!1,e}return s(t,l.Component),a(t,[{key:"initialize",value:function(e,t){this.node=e,this.gl=t,this.comp_transformTarget=this.node.getComponent(u.Constants.COMPONENT_TYPES.TRANSFORM_TARGET),this.comp_projection=this.node.getComponent(u.Constants.COMPONENT_TYPES.PROJECTION)}},{key:"setVelocity",value:function(e){this._vel=e}},{key:"lockRotX",value:function(){this.lockRotX=!0}},{key:"unlockRotX",value:function(){this.lockRotX=!1}},{key:"isLockRotX",value:function(){return this.lockRotX}},{key:"lockRotY",value:function(){this.lockRotY=!0}},{key:"unlockRotY",value:function(){this.lockRotY=!1}},{key:"isLockRotY",value:function(){return this.lockRotY}},{key:"forward",value:function(){this.forward=1}},{key:"backward",value:function(){this.backwardE=1}},{key:"strafeLeft",value:function(){this.leftE=1}},{key:"strafeRight",value:function(){this.rightE=1}},{key:"strafeFront",value:function(){this.frontE=1}},{key:"strafeBack",value:function(){this.backE=1}},{key:"stopForward",value:function(){this.forward=0}},{key:"stopBackward",value:function(){this.backwardE=0}},{key:"stopStrafeLeft",value:function(){this.leftE=0}},{key:"stopStrafeRight",value:function(){this.rightE=0}},{key:"stopStrafeFront",value:function(){this.frontE=0}},{key:"stopStrafeBack",value:function(){this.backE=0}},{key:"mouseDown",value:function(e){this.lastX=e.screenX,this.lastY=e.screenY,0===e.button&&(this.leftButton=1),1===e.button&&(this.middleButton=1),2===e.button&&(this.rightButton=1),this.updateGoal(e)}},{key:"mouseUp",value:function(e){0===e.button&&(this.leftButton=0),1===e.button&&(this.middleButton=0),2===e.button&&(this.rightButton=0)}},{key:"mouseMove",value:function(e){1!==this.leftButton&&1!==this.middleButton||this.updateGoal(e)}},{key:"isLeftBtnActive",value:function(){return 1===this.leftButton}},{key:"isMiddleBtnActive",value:function(){return 1===this.middleButton}},{key:"isRightBtnActive",value:function(){return 1===this.rightButton}},{key:"setLeftButtonAction",value:function(e){this.leftButtonAction=e}},{key:"setMiddleButtonAction",value:function(e){this.middleButtonAction=e}},{key:"setRightButtonAction",value:function(e){this.rightButtonAction=e}},{key:"tick",value:function(e){var t=$V3([0,0,0]);1===this.forward&&(t=t.add(this.comp_transformTarget.getMatrix().inverse().getForward().x(-this._vel))),1===this.backwardE&&(t=t.add(this.comp_transformTarget.getMatrix().inverse().getForward().x(this._vel))),1===this.leftE&&(t=t.add(this.comp_transformTarget.getMatrix().inverse().getLeft().x(-this._vel))),1===this.rightE&&(t=t.add(this.comp_transformTarget.getMatrix().inverse().getLeft().x(this._vel))),1===this.backE&&(t=t.add(this.comp_transformTarget.getMatrix().inverse().getUp().x(-this._vel))),1===this.frontE&&(t=t.add(this.comp_transformTarget.getMatrix().inverse().getUp().x(this._vel))),this.comp_transformTarget.setPositionTarget(this.comp_transformTarget.getPositionTarget().add(t)),this.comp_transformTarget.setPositionGoal(this.comp_transformTarget.getPositionGoal().add(t))}},{key:"updateGoal",value:function(e){1===this.middleButton?"PAN"===this.middleButtonAction?this.makePan(e):"ORBIT"===this.middleButtonAction&&this.makeOrbit(e):"PAN"===this.leftButtonAction?this.comp_projection.getProjection()===u.Constants.PROJECTION_TYPES.PERSPECTIVE?this.makeOrbit(e):this.makePan(e):"ORBIT"===this.leftButtonAction&&this.makeOrbit(e),this.lastX=e.screenX,this.lastY=e.screenY}},{key:"makePan",value:function(e){e.preventDefault();var t=this.comp_transformTarget.getMatrix().getLeft().x((this.lastX-e.screenX)*(.005*this.comp_projection.getFov())),n=this.comp_transformTarget.getMatrix().getUp().x((this.lastY-e.screenY)*(-.005*this.comp_projection.getFov())),r=t.add(n.x(-1));this.comp_transformTarget.setPositionGoal(this.comp_transformTarget.getPositionGoal().add(r)),this.comp_transformTarget.setPositionTarget(this.comp_transformTarget.getPositionTarget().add(r))}},{key:"makeOrbit",value:function(e){!1===this.lockRotY&&(this.lastX>e.screenX?this.comp_transformTarget.yaw(.5*-(this.lastX-e.screenX)):this.comp_transformTarget.yaw(.5*(e.screenX-this.lastX))),!1===this.lockRotX&&(this.lastY>e.screenY?this.comp_transformTarget.pitch(.5*(this.lastY-e.screenY)):this.comp_transformTarget.pitch(.5*-(e.screenY-this.lastY)))}}]),t}();r.ComponentControllerTransformTarget=c,t.exports.ComponentControllerTransformTarget=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Component.class":3,"./Constants":11}],5:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentKeyboardEvents=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Component.class"),u=e("./Constants"),c=n.ComponentKeyboardEvents=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=u.Constants.COMPONENT_TYPES.KEYBOARD_EVENTS,e.node=null,e.gl=null,e._onkeydown=null,e._onkeyup=null,e}return s(t,l.Component),a(t,[{key:"initialize",value:function(e,t){this.node=e,this.gl=t}},{key:"onkeydown",value:function(e){this._onkeydown=e}},{key:"onkeyup",value:function(e){this._onkeyup=e}}]),t}();r.ComponentKeyboardEvents=c,t.exports.ComponentKeyboardEvents=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Component.class":3,"./Constants":11}],6:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentMouseEvents=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Component.class"),u=e("./Constants"),c=n.ComponentMouseEvents=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=u.Constants.COMPONENT_TYPES.MOUSE_EVENTS,e.node=null,e.gl=null,e._onmousedown=null,e._onmouseup=null,e._onmousemove=null,e._onmousewheel=null,e}return s(t,l.Component),a(t,[{key:"initialize",value:function(e,t){this.node=e,this.gl=t}},{key:"onmousedown",value:function(e){this._onmousedown=e}},{key:"onmouseup",value:function(e){this._onmouseup=e}},{key:"onmousemove",value:function(e){this._onmousemove=e}},{key:"onmousewheel",value:function(e){this._onmousewheel=e}}]),t}();r.ComponentMouseEvents=c,t.exports.ComponentMouseEvents=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Component.class":3,"./Constants":11}],7:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentProjection=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Component.class"),u=e("./StormMath.class"),c=e("./Constants"),h=n.ComponentProjection=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=c.Constants.COMPONENT_TYPES.PROJECTION,e.node=null,e.gl=null,e.mProjectionMatrix=$M16([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e.proy=c.Constants.PROJECTION_TYPES.PERSPECTIVE,e._width=512,e._height=512,e._fov=45,e._fovOrtho=20,e._near=.1,e._far=1e4,e._nearOrtho=-1e5,e._farOrtho=1e5,e}return s(t,l.Component),a(t,[{key:"initialize",value:function(e,t){this.node=e,this.gl=t,this.updateProjectionMatrix()}},{key:"getMatrix",value:function(){return this.mProjectionMatrix}},{key:"getProjection",value:function(){return this.proy}},{key:"setProjection",value:function(e){this.proy=e,this.updateProjectionMatrix()}},{key:"setResolution",value:function(e,t){this._width=e,this._height=t,this.updateProjectionMatrix()}},{key:"getResolution",value:function(){return{width:this._width,height:this._height}}},{key:"setFov",value:function(e){this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this._fov=e:this._fovOrtho=e,this.updateProjectionMatrix()}},{key:"getFov",value:function(){return this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this._fov:this._fovOrtho}},{key:"setNear",value:function(e){this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this._near=e:this._nearOrtho=e,this.updateProjectionMatrix()}},{key:"getNear",value:function(){return this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this._near:this._nearOrtho}},{key:"setFar",value:function(e){this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this._far=e:this._farOrtho=e,this.updateProjectionMatrix()}},{key:"getFar",value:function(){return this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this._far:this._farOrtho}},{key:"updateProjectionMatrix",value:function(){var e=this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this._fov:this._fovOrtho,t=this._width/this._height;this.proy===c.Constants.PROJECTION_TYPES.PERSPECTIVE?this.mProjectionMatrix=u.StormM16.setPerspectiveProjection(e,t,this._near,this._far):this.mProjectionMatrix=u.StormM16.setOrthographicProjection(-t*e,t*e,-t*e,t*e,this._nearOrtho,this._farOrtho)}}]),t}();r.ComponentProjection=h,t.exports.ComponentProjection=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Component.class":3,"./Constants":11,"./StormMath.class":20}],8:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentTransform=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Component.class"),u=e("./Constants"),c=n.ComponentTransform=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=u.Constants.COMPONENT_TYPES.TRANSFORM,e.node=null,e.gl=null,e.mModelMatrix_Position=$M16([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e.mModelMatrix_Rotation=$M16([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e}return s(t,l.Component),a(t,[{key:"initialize",value:function(e,t){this.node=e,this.gl=t}},{key:"getMatrixPosition",value:function(){return this.mModelMatrix_Position}},{key:"getMatrixRotation",value:function(){return this.mModelMatrix_Rotation}}]),t}();r.ComponentTransform=c,t.exports.ComponentTransform=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Component.class":3,"./Constants":11}],9:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentTransformTarget=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Component.class"),u=e("./Utils.class"),c=e("./StormMath.class"),h=e("./Constants"),f=n.ComponentTransformTarget=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=h.Constants.COMPONENT_TYPES.TRANSFORM_TARGET,e.node=null,e.gl=null,e.mModelMatrix=$M16([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e.targetDistance=5,e.positionGoal=$V3([0,0,e.targetDistance]),e.positionTarget=$V3([0,0,0]),e}return s(t,l.Component),a(t,[{key:"initialize",value:function(e,t){this.node=e,this.gl=t,this.performMatrix()}},{key:"getMatrix",value:function(){return this.mModelMatrix}},{key:"setTargetDistance",value:function(e){this.targetDistance=e}},{key:"getTargetDistance",value:function(){return this.targetDistance}},{key:"setPositionGoal",value:function(e){this.positionGoal=e,this.performMatrix()}},{key:"getPositionGoal",value:function(){return this.positionGoal}},{key:"setPositionTarget",value:function(e){this.positionTarget=e,this.performMatrix()}},{key:"getPositionTarget",value:function(){return this.positionTarget}},{key:"reset",value:function(){this.positionGoal=$V3([0,0,this.targetDistance]),this.positionTarget=$V3([0,0,0]),this.performMatrix()}},{key:"yaw",value:function(e){var t=this.getPositionGoal().subtract(this.getPositionTarget()),n=u.Utils.cartesianToSpherical(t.normalize()),r=u.Utils.sphericalToCartesian(n.radius,n.lat,n.lng+e);this.setPositionGoal(this.getPositionTarget().add(r.x(this.getTargetDistance())))}},{key:"pitch",value:function(e){var t=this.getPositionGoal().subtract(this.getPositionTarget()),n=u.Utils.cartesianToSpherical(t.normalize()),r=u.Utils.sphericalToCartesian(n.radius,n.lat+e,n.lng);this.setPositionGoal(this.getPositionTarget().add(r.x(this.getTargetDistance())))}},{key:"performMatrix",value:function(){this.mModelMatrix=c.StormM16.makeLookAt(this.getPositionGoal().e[0],this.getPositionGoal().e[1],this.getPositionGoal().e[2],this.getPositionTarget().e[0],this.getPositionTarget().e[1],this.getPositionTarget().e[2],0,1,0)}}]),t}();r.ComponentTransformTarget=f,t.exports.ComponentTransformTarget=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Component.class":3,"./Constants":11,"./StormMath.class":20,"./Utils.class":22}],10:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Component_GPU=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e("webclgl");var l=e("./Component.class"),u=e("./Constants"),c=n.Component_GPU=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=u.Constants.COMPONENT_TYPES.GPU,e.node=null,e.gl=null,e.gpufG=null,e.args={},e}return s(t,l.Component),a(t,[{key:"initialize",value:function(e,t){this.node=e,this.gl=t}},{key:"tick",value:function(e){this.tickArguments(),null!=this.gpufG&&this.gpufG.processKernels(),null!=this.gpufG&&this.gpufG.processGraphic(void 0)}},{key:"setGPUFor",value:function(){var e=this,t=arguments;for(var n in arguments[1]){var r=n.split(" ");if(null!=r&&r.length>1){var o=r[1];this.args[o]={fnvalue:arguments[1][n],updatable:null,splits:null,overrideDimensions:null}}arguments[1][n]=arguments[1][n]()}this.gpufG=new function(){return gpufor.apply(e,t)}}},{key:"getWebCLGL",value:function(){return this.gpufG.getWebCLGL()}},{key:"addArgument",value:function(e,t){this.args[e.split(" ")[1]]={fnvalue:t,updatable:null,splits:null,overrideDimensions:null},this.gpufG.addArg(e)}},{key:"setArg",value:function(e,t,n,r){var o=this.gpufG.setArg(e,t(),n,r);return this.args[e]={fnvalue:t,updatable:null,splits:n,overrideDimensions:r},o}},{key:"getComponentBufferArg",value:function(e,t){this.gpufG.getGPUForArg(e,t.gpufG),this.args[e]={fnvalue:null,updatable:null,splits:null,overrideDimensions:null}}},{key:"getArgs",value:function(){return this.args}},{key:"getAllArgs",value:function(){return this.gpufG.getAllArgs()}},{key:"getBuffers",value:function(){return this.gpufG._argsValues}},{key:"setArgUpdatable",value:function(e,t){this.args[e].updatable=t}},{key:"tickArguments",value:function(){for(var e in this.args)if(!0===this.args[e].updatable){var t=this.args[e];this.gpufG.setArg(e,t.fnvalue(),t.splits,t.overrideDimensions)}}}]),t}();r.Component_GPU=c,t.exports.Component_GPU=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Component.class":3,"./Constants":11,webclgl:1}],11:[function(e,t,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.Constants={EVENT_TYPES:{KEY_DOWN:0,KEY_UP:1,MOUSE_DOWN:2,MOUSE_UP:3,MOUSE_MOVE:4,MOUSE_WHEEL:5},COMPONENT_TYPES:{KEYBOARD_EVENTS:0,MOUSE_EVENTS:1,TRANSFORM:2,TRANSFORM_TARGET:3,CONTROLLER_TRANSFORM_TARGET:4,PROJECTION:5,GPU:6},PROJECTION_TYPES:{PERSPECTIVE:0,ORTHO:1},VIEW_TYPES:{LEFT:0,RIGHT:1,FRONT:2,BACK:3,TOP:4,BOTTOM:5},BLENDING_MODES:{ZERO:"ZERO",ONE:"ONE",SRC_COLOR:"SRC_COLOR",ONE_MINUS_SRC_COLOR:"ONE_MINUS_SRC_COLOR",DST_COLOR:"DST_COLOR",ONE_MINUS_DST_COLOR:"ONE_MINUS_DST_COLOR",SRC_ALPHA:"SRC_ALPHA",ONE_MINUS_SRC_ALPHA:"ONE_MINUS_SRC_ALPHA",DST_ALPHA:"DST_ALPHA",ONE_MINUS_DST_ALPHA:"ONE_MINUS_DST_ALPHA",SRC_ALPHA_SATURATE:"SRC_ALPHA_SATURATE",CONSTANT_COLOR:"CONSTANT_COLOR",ONE_MINUS_CONSTANT_COLOR:"ONE_MINUS_CONSTANT_COLOR",CONSTANT_ALPHA:"CONSTANT_ALPHA",ONE_MINUS_CONSTANT_ALPHA:"ONE_MINUS_CONSTANT_ALPHA"},BLENDING_EQUATION_TYPES:{FUNC_ADD:"FUNC_ADD",FUNC_SUBTRACT:"FUNC_SUBTRACT",FUNC_REVERSE_SUBTRACT:"FUNC_REVERSE_SUBTRACT"},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6}};e.Constants=r,t.exports.Constants=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Mesh=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./Utils.class"),a=n.Mesh=function(){function e(){o(this,e),this._obj={},this._textures={},this.objIndex=null,this.indexMax=0}return i(e,[{key:"loadPoint",value:function(){return this._obj.vertexArray=[0,0,0,0],this._obj.normalArray=[0,1,0,0],this._obj.textureArray=[0,0,0,0],this._obj.textureUnitArray=[0],this._obj.indexArray=[0],this._obj}},{key:"loadTriangle",value:function(e){var t=void 0!==e&&void 0!==e.scale?e.scale:1,n=void 0!==e&&void 0!==e.side?e.side:1;return this._obj.vertexArray=[0,0,0,1,n/2*t,0,-1*t,1,-n/2*t,0,-1*t,1],this._obj.normalArray=[0,0,1,1,0,0,1,1,0,0,1,1],this._obj.textureArray=[0,0,0,1,1,0,0,1,1,1,0,1],this._obj.textureUnitArray=[0,0,0],this._obj.indexArray=[0,1,2],this._obj}},{key:"loadQuad",value:function(e,t){var n=void 0===e?.5:e,r=void 0===t?.5:t;return this._obj={},this._obj.vertexArray=[-n,-r,0,1,n,-r,0,1,n,r,0,1,-n,r,0,1],this._obj.normalArray=[0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1],this._obj.textureArray=[0,0,0,1,1,0,0,1,1,1,0,1,0,1,0,1],this._obj.textureUnitArray=[0,0,0,0],this._obj.indexArray=[0,1,2,0,2,3],this._obj}},{key:"loadCircle",value:function(e){this._obj={vertexArray:[],normalArray:[],textureArray:[],textureUnitArray:[],indexArray:[]},this.objIndex=[],this.indexMax=0;for(var t=void 0!==e&&void 0!==e.segments?e.segments:6,n=void 0!==e&&void 0!==e.radius?e.radius:.5,r=360/t,o=360/r,i=function(e){return Math.cos((new s.Utils).degToRad(e))}.bind(this),a=function(e){return Math.sin((new s.Utils).degToRad(e))}.bind(this),l=1,u=o;l<=u;l++){var c=r*l,h=$V3([i(c)*n,0,a(c)*n]),f=$V3([i(c-r)*n,0,a(c-r)*n]),d=$V3([0,0,0]),g=f.subtract(h).cross(d.subtract(h)).normalize(),_=$V3([c/360,0,0]),v=$V3([(c-r)/360,0,0]),p=$V3([0,0,0]),m=this.testIfInIndices(this._obj,h,g,_),y=this.testIfInIndices(this._obj,f,g,v),b=this.testIfInIndices(this._obj,d,g,p);this._obj.indexArray.push(m,y,b)}return this._obj}},{key:"testIfInIndices",value:function(e,t,n,r){for(var o=void 0,i=0,s=this.objIndex.length;i<s;i++)this.objIndex[i].v.e[0]===t.e[0]&&this.objIndex[i].v.e[1]===t.e[1]&&this.objIndex[i].v.e[2]===t.e[2]&&(o=this.objIndex[i].i);return void 0===o&&(o=this.indexMax,this.objIndex.push({i:o,v:$V3([t.e[0],t.e[1],t.e[2]])}),this.indexMax++,e.vertexArray.push(t.e[0],t.e[1],t.e[2],1),e.normalArray.push(n.e[0],n.e[1],n.e[2],1),e.textureArray.push(t.e[0]+.5,t.e[2]+.5,t.e[2]+.5,1),e.textureUnitArray.push(0)),o}},{key:"loadBox",value:function(){this._obj={};var e=new Float32Array([.5,.5,.5]);return this._obj.vertexArray=[-1*e[0],-1*e[1],1*e[2],1,1*e[0],-1*e[1],1*e[2],1,1*e[0],1*e[1],1*e[2],1,-1*e[0],1*e[1],1*e[2],1,-1*e[0],-1*e[1],-1*e[2],1,-1*e[0],1*e[1],-1*e[2],1,1*e[0],1*e[1],-1*e[2],1,1*e[0],-1*e[1],-1*e[2],1,-1*e[0],1*e[1],-1*e[2],1,-1*e[0],1*e[1],1*e[2],1,1*e[0],1*e[1],1*e[2],1,1*e[0],1*e[1],-1*e[2],1,-1*e[0],-1*e[1],-1*e[2],1,1*e[0],-1*e[1],-1*e[2],1,1*e[0],-1*e[1],1*e[2],1,-1*e[0],-1*e[1],1*e[2],1,1*e[0],-1*e[1],-1*e[2],1,1*e[0],1*e[1],-1*e[2],1,1*e[0],1*e[1],1*e[2],1,1*e[0],-1*e[1],1*e[2],1,-1*e[0],-1*e[1],-1*e[2],1,-1*e[0],-1*e[1],1*e[2],1,-1*e[0],1*e[1],1*e[2],1,-1*e[0],1*e[1],-1*e[2],1],this._obj.normalArray=[0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,-1,1,0,0,-1,1,0,0,-1,1,0,0,-1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,-1,0,1,0,-1,0,1,0,-1,0,1,0,-1,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,-1,0,0,1,-1,0,0,1,-1,0,0,1,-1,0,0,1],this._obj.textureArray=[0,0,0,1,1,0,0,1,1,1,0,1,0,1,0,1,1,0,0,1,1,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,0,0,1,1,0,0,1,1,0,0,1,1,1,0,1,0,1,0,1,0,0,0,1,0,0,0,1,1,0,0,1,1,1,0,1,0,1,0,1],this._obj.textureUnitArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._obj.indexArray=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],this._obj}},{key:"loadObj",value:function(e,t){for(var n="",r=e.split("/"),o=0,i=r.length-1;o<i;o++)n=n+r[o]+"/";var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="blob",s.onload=function(e){var t=new FileReader;t.onload=function(e,t){var r=t.target.result;this.loadObjFromSourceText({sourceText:r,objDirectory:n}),void 0!==e&&"function"==typeof e&&e(this._obj,this._textures)}.bind(this,e),t.readAsText(s.response)}.bind(this,t),s.send(null)}},{key:"loadObjFromSourceText",value:function(e){this._obj={},this._textures={};var t=void 0,n=void 0;t=void 0!==e.sourceText?e.sourceText:void 0,n=void 0!==e.objDirectory?e.objDirectory:void 0;var r=t.split("\r\n");if(1===r.length&&(r=t.split("\n")),null!=r[0].match(/OBJ/gim)){var o=[],i=[],s=[],a=[],l=[],u=[],c=[],h=[],f=[],d=[],g=0,_=[],v=0,p=0,m=!1,y=[],b=[],E=[],C=[],T=[],x=[],P=[],L=[],A=[],w=0,R=0,S=0,k=[],M=0,O={},F=[-1,0];O._unnamed=F;for(var N="",G="",U=0,B=r.length;U<B;U++){var D=r[U].replace(/\t+/gi," ").replace(/\s+$/gi,"").replace(/\s+/gi," ");if("#"!==D[0]){var W=D.split(" ");if("mtllib"===W[0]&&(N=W[1]),"g"===W[0]&&(F=[_.length,0],O[W[1]]=F),"v"===W[0]&&(y[w]=parseFloat(W[1]),b[w]=parseFloat(W[2]),E[w]=parseFloat(W[3]),w++),"vn"===W[0]&&(C[R]=parseFloat(W[1]),T[R]=parseFloat(W[2]),x[R]=parseFloat(W[3]),R++),"vt"===W[0]&&(P[S]=parseFloat(W[1]),L[S]=parseFloat(W[2]),A[S]=parseFloat(W[3]),S++),"usemtl"===W[0]&&(G=W[1],this._textures[g]={fileUrl:n+N,materialName:G},g++),"f"===W[0]){4!==W.length&&console.log("*** Error: face '"+D+"' not handled");for(var V=1;V<4;++V){m=!0;var j=W[V].split("/");if(void 0===k[W[V]]){var I=void 0,Y=void 0,X=void 0;if(1===j.length)Y=I=parseInt(j[0])-1,X=I;else{if(3!==j.length)return null;I=parseInt(j[0])-1,X=parseInt(j[1])-1,Y=parseInt(j[2])-1}d[v]=g-1,o[v]=0,i[v]=0,s[v]=0,I<E.length&&(o[v]=y[I],i[v]=b[I],s[v]=E[I]),c[v]=0,h[v]=0,f[v]=0,X<A.length&&(c[v]=P[X],h[v]=L[X],f[v]=A[X]),a[v]=0,l[v]=0,u[v]=1,Y<x.length&&(a[v]=C[Y],l[v]=T[Y],u[v]=x[Y]),v++,k[W[V]]=M,M++}_[p]=k[W[V]],p++,F[1]++}}}}if(!0===m){this._obj.vertexArray=new Float32Array(4*o.length);for(var H=0,z=o.length;H<z;H++){var K=4*H;this._obj.vertexArray[K]=o[H],this._obj.vertexArray[K+1]=i[H],this._obj.vertexArray[K+2]=s[H],this._obj.vertexArray[K+3]=1}this._obj.normalArray=new Float32Array(4*a.length);for(var q=0,$=a.length;q<$;q++){var Z=4*q;this._obj.normalArray[Z]=a[q],this._obj.normalArray[Z+1]=l[q],this._obj.normalArray[Z+2]=u[q],this._obj.normalArray[Z+3]=1}this._obj.textureArray=new Float32Array(4*c.length);for(var J=0,Q=c.length;J<Q;J++){var ee=4*J;this._obj.textureArray[ee]=c[J],this._obj.textureArray[ee+1]=h[J],this._obj.textureArray[ee+2]=f[J],this._obj.textureArray[ee+3]=1}this._obj.textureUnitArray=d,this._obj.indexArray=_}}else alert("Not OBJ file")}}]),e}();r.Mesh=a,t.exports.Mesh=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Utils.class":22}],13:[function(e,t,n){(function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n.Node=function(){function e(){r(this,e),this._components={},this._name=null,this._gl=null,this._enabled=!0,this.onTick=null}return o(e,[{key:"initialize",value:function(e,t){this._name=e,this._gl=t}},{key:"addComponent",value:function(e){this._components[e.type]=e,this._components[e.type].initialize(this,this._gl)}},{key:"getComponent",value:function(e){return this._components[e]}},{key:"getComponents",value:function(){return this._components}},{key:"setEnabled",value:function(e){this._enabled=e}},{key:"isEnabled",value:function(){return this._enabled}},{key:"setName",value:function(e){this._name=e}},{key:"getName",value:function(){return this._name}}]),e}();e.Node=i,t.exports.Node=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Grid=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../Utils.class"),a=e("../../ComponentTransform.class"),l=e("../../Component_GPU.class"),u=e("../../Mesh.class"),c=e("../../Constants"),h=n.Grid=function(){function e(t){o(this,e),this._sce=t,this._project=this._sce.getLoadedProject(),this._gl=this._project.getActiveStage().getWebGLContext(),this._utils=new s.Utils,this.node=new Node,this.node.setName("grid"),this._project.getActiveStage().addNode(this.node),this.mesh=(new u.Mesh).loadBox(),this.comp_transform=new a.ComponentTransform,this.node.addComponent(this.comp_transform),this.comp_renderer=new l.Component_GPU,this.node.addComponent(this.comp_renderer),this.gridColor=$V3([.3,.3,.3])}return i(e,[{key:"generate",value:function(e,t){this.gridEnabled=!0,this.size=void 0!==e&&null!==e?e:this.size,this.separation=void 0!==t&&null!==t?t:this.separation,this.countLines=this.size/this.separation+1,this.countLines*=2;var n=-this.size/2,r=this.size/2,o=-this.size/2,i=this.size/2,s=n,a=o,l=[],u=[],h=[];this.id=0;for(var f=0,d=this.countLines;f<d;f++)a<=i?(l.push(n,0,a,1,r,0,a,1),a+=this.separation):(l.push(s,0,o,1,s,0,i,1),s+=this.separation),u.push(this.gridColor.e[0],this.gridColor.e[1],this.gridColor.e[2],1,this.gridColor.e[0],this.gridColor.e[1],this.gridColor.e[2],1),h.push(this.id,this.id+1),this.id+=2;l.push(0,0,0,1,10,0,0,1),u.push(1,0,0,1,1,0,0,1),h.push(this.id,this.id+1),this.id+=2,l.push(0,0,0,1,0,10,0,1),u.push(0,1,0,1,0,1,0,1),h.push(this.id,this.id+1),this.id+=2,l.push(0,0,0,1,0,0,10,1),u.push(0,0,1,1,0,0,1,1),h.push(this.id,this.id+1),this.comp_renderer.setGPUFor(this.comp_renderer.gl,{"float4*attr vertexPos":function(){return l}.bind(this),"float4*attr vertexColor":function(){return u}.bind(this),indices:function(){return h}.bind(this),"mat4 PMatrix":function(){return this._project.getActiveStage().getActiveCamera().getComponent(c.Constants.COMPONENT_TYPES.PROJECTION).getMatrix().transpose().e}.bind(this),"mat4 cameraWMatrix":function(){return this._project.getActiveStage().getActiveCamera().getComponent(c.Constants.COMPONENT_TYPES.TRANSFORM_TARGET).getMatrix().transpose().e}.bind(this),"mat4 nodeWMatrix":function(){return this.node.getComponent(c.Constants.COMPONENT_TYPES.TRANSFORM).getMatrixPosition().transpose().e}.bind(this)},{type:"GRAPHIC",config:[["RGB"],"varying vec4 vVC;\n","vec4 vp = vertexPos[];\nvec4 vc = vertexColor[];\nvVC = vc;gl_Position = PMatrix * cameraWMatrix * nodeWMatrix * vp;\n","varying vec4 vVC;\n","return [vVC];\n"],drawMode:1,depthTest:!0,blend:!0,blendEquation:c.Constants.BLENDING_EQUATION_TYPES.FUNC_ADD,blendSrcMode:c.Constants.BLENDING_MODES.SRC_ALPHA,blendDstMode:c.Constants.BLENDING_MODES.ONE_MINUS_SRC_ALPHA}),this.comp_renderer.setArgUpdatable("PMatrix",!0),this.comp_renderer.setArgUpdatable("cameraWMatrix",!0),this.comp_renderer.setArgUpdatable("nodeWMatrix",!0),this.comp_renderer.getComponentBufferArg("RGB",this._project.getActiveStage().getActiveCamera().getComponent(c.Constants.COMPONENT_TYPES.GPU))}}]),e}();r.Grid=h,t.exports.Grid=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../ComponentTransform.class":8,"../../Component_GPU.class":10,"../../Constants":11,"../../Mesh.class":12,"../../Utils.class":22}],15:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleCamera=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../ComponentTransformTarget.class"),a=e("../../ComponentProjection.class"),l=e("../../ComponentControllerTransformTarget.class"),u=e("../../Component_GPU.class"),c=e("../../ComponentKeyboardEvents.class"),h=e("../../ComponentMouseEvents.class"),f=e("../../Node.class"),d=e("../../Constants"),g=function(){function e(t,n){var r=this;o(this,e);var i=t,g=i.getLoadedProject();this._onkeydown=void 0!==n&&void 0!==n.onkeydown&&null!==n.onkeydown?n.onkeydown:null,this._onkeyup=void 0!==n&&void 0!==n.onkeyup&&null!==n.onkeyup?n.onkeyup:null,this._onmousedown=void 0!==n&&void 0!==n.onmousedown&&null!==n.onmousedown?n.onmousedown:null,this._onmouseup=void 0!==n&&void 0!==n.onmouseup&&null!==n.onmouseup?n.onmouseup:null,this._onmousemove=void 0!==n&&void 0!==n.onmousemove&&null!==n.onmousemove?n.onmousemove:null,this._onmousewheel=void 0!==n&&void 0!==n.onmousewheel&&null!==n.onmousewheel?n.onmousewheel:null,this._useAltKey=!0,this.altKeyPressed=!1,this._preventMove=!1,this.camera=new f.Node,this.camera.setName("simple camera"),g.getActiveStage().addNode(this.camera),g.getActiveStage().setActiveCamera(this.camera),this.comp_transformTarget=new s.ComponentTransformTarget,this.camera.addComponent(this.comp_transformTarget),this.comp_transformTarget.setTargetDistance(.5),this.comp_projection=new a.ComponentProjection,this.camera.addComponent(this.comp_projection),this.comp_controllerTransformTarget=new l.ComponentControllerTransformTarget,this.camera.addComponent(this.comp_controllerTransformTarget),this.comp_screenEffects=new u.Component_GPU,this.camera.addComponent(this.comp_screenEffects),this.comp_screenEffects.setGPUFor(this.comp_screenEffects.gl,{"float4* RGB":function(){return new Float32Array(i.getCanvas().width*i.getCanvas().width*4)}},{type:"KERNEL",name:"CAMERA_RGB_KERNEL",viewSource:!1,config:["n",void 0,"","vec4 color = RGB[n];\nreturn color;\n"],drawMode:4,depthTest:!1,blend:!1,blendEquation:d.Constants.BLENDING_EQUATION_TYPES.FUNC_ADD,blendSrcMode:d.Constants.BLENDING_MODES.ONE,blendDstMode:d.Constants.BLENDING_MODES.ZERO}),this.comp_screenEffects.gpufG.onPostProcessKernel(0,function(){}),this.comp_keyboardEvents=new c.ComponentKeyboardEvents,this.camera.addComponent(this.comp_keyboardEvents),this.comp_keyboardEvents.onkeydown(function(e){var t=String.fromCharCode(e.keyCode);"W"===t&&r.comp_controllerTransformTarget.forward(),"S"===t&&r.comp_controllerTransformTarget.backward(),"A"!==t&&"%"!==t||r.comp_controllerTransformTarget.strafeLeft(),"D"!==t&&"'"!==t||r.comp_controllerTransformTarget.strafeRight(),"E"!==t&&"&"!==t||r.comp_controllerTransformTarget.strafeFront(),"C"!==t&&"("!==t||r.comp_controllerTransformTarget.strafeBack(),"L"===t&&r.setView(d.Constants.VIEW_TYPES.LEFT),"R"===t&&r.setView(d.Constants.VIEW_TYPES.RIGHT),"F"===t&&r.setView(d.Constants.VIEW_TYPES.FRONT),"B"===t&&r.setView(d.Constants.VIEW_TYPES.BACK),"T"===t&&r.setView(d.Constants.VIEW_TYPES.TOP),"P"===t&&r.comp_projection.setProjection(d.Constants.PROJECTION_TYPES.PERSPECTIVE),"O"===t&&r.comp_projection.setProjection(d.Constants.PROJECTION_TYPES.ORTHO),!0===e.altKey&&(r.altKeyPressed=!0),null!=r._onkeydown&&r._onkeydown()}),this.comp_keyboardEvents.onkeyup(function(e){var t=String.fromCharCode(e.keyCode);"W"===t&&r.comp_controllerTransformTarget.stopForward(),"S"===t&&r.comp_controllerTransformTarget.stopBackward(),"A"!==t&&"%"!==t||r.comp_controllerTransformTarget.stopStrafeLeft(),"D"!==t&&"'"!==t||r.comp_controllerTransformTarget.stopStrafeRight(),"E"!==t&&"&"!==t||r.comp_controllerTransformTarget.stopStrafeFront(),"C"!==t&&"("!==t||r.comp_controllerTransformTarget.stopStrafeBack(),!1===e.altKey&&(r.altKeyPressed=!1),null!=r._onkeyup&&r._onkeyup()});var _=new h.ComponentMouseEvents;this.camera.addComponent(_),_.onmousedown(function(e){r.comp_controllerTransformTarget.mouseDown(e),!0===e.altKey&&(r.altKeyPressed=!0),null!=r._onmousedown&&r._onmousedown()}),_.onmouseup(function(e){r.comp_controllerTransformTarget.mouseUp(e),!1===e.altKey&&(r.altKeyPressed=!1),null!=r._onmouseup&&r._onmouseup()}),_.onmousemove(function(e,t){null!=r._onmousemove&&r._onmousemove(),!1===r._preventMove&&((r.comp_projection.getProjection()===d.Constants.PROJECTION_TYPES.PERSPECTIVE||!0===r._useAltKey&&!0===r.altKeyPressed||!1===r._useAltKey)&&r.comp_controllerTransformTarget.mouseMove(e),!0===r.comp_controllerTransformTarget.isRightBtnActive()&&r.comp_projection.getProjection()===d.Constants.PROJECTION_TYPES.ORTHO&&!0===r.altKeyPressed&&(t.e[2]>0?r.comp_projection.setFov(r.comp_projection.getFov()*(1+Math.abs(.005*t.e[2]))):r.comp_projection.setFov(r.comp_projection.getFov()/(1+Math.abs(.005*t.e[2])))))}),_.onmousewheel(function(e,t){void 0!==e.wheelDeltaY&&e.wheelDeltaY>=0||void 0!==e.deltaY&&e.deltaY<=0?r.comp_projection.setFov(r.comp_projection.getFov()/1.1):r.comp_projection.setFov(1.1*r.comp_projection.getFov()),r.comp_projection.getProjection()===d.Constants.PROJECTION_TYPES.ORTHO&&(r.comp_transformTarget.setPositionTarget(r.comp_transformTarget.getPositionTarget().add(t)),r.comp_transformTarget.setPositionGoal(r.comp_transformTarget.getPositionGoal().add(t))),null!=r._onmousewheel&&r._onmousewheel()})}return i(e,[{key:"setView",value:function(e){switch(this.comp_projection.setProjection(d.Constants.PROJECTION_TYPES.ORTHO),this.comp_transformTarget.reset(),e){case d.Constants.VIEW_TYPES.LEFT:this.comp_transformTarget.yaw(90);break;case d.Constants.VIEW_TYPES.RIGHT:this.comp_transformTarget.yaw(-90);break;case d.Constants.VIEW_TYPES.FRONT:case d.Constants.VIEW_TYPES.BACK:break;case d.Constants.VIEW_TYPES.TOP:this.comp_transformTarget.pitch(-89.9);break;case d.Constants.VIEW_TYPES.BOTTOM:this.comp_transformTarget.pitch(90)}}},{key:"setLeftButtonAction",value:function(e){this.comp_controllerTransformTarget.setLeftButtonAction(e)}},{key:"setMiddleButtonAction",value:function(e){this.comp_controllerTransformTarget.setMiddleButtonAction(e)}},{key:"setRightButtonAction",value:function(e){this.comp_controllerTransformTarget.setRightButtonAction(e)}},{key:"isAltKeyEnabled",value:function(){return this._useAltKey}},{key:"isAltKeyPressed",value:function(){return this.altKeyPressed}},{key:"setVelocity",value:function(e){this.comp_controllerTransformTarget.setVelocity(e)}},{key:"setFov",value:function(e){this.comp_projection.setFov(e)}},{key:"getFov",value:function(){return this.comp_projection.getFov()}}],[{key:"preventMove",value:function(e){this._preventMove=e}},{key:"useAltKey",value:function(e){this._useAltKey=e}}]),e}();n.SimpleCamera=g,r.SimpleCamera=g,t.exports.SimpleCamera=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../ComponentControllerTransformTarget.class":4,"../../ComponentKeyboardEvents.class":5,"../../ComponentMouseEvents.class":6,"../../ComponentProjection.class":7,"../../ComponentTransformTarget.class":9,"../../Component_GPU.class":10,"../../Constants":11,"../../Node.class":13}],16:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleNode=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../../ComponentTransform.class"),a=e("../../Component_GPU.class"),l=e("../../VFP_RGB.class"),u=e("../../Constants"),c=n.SimpleNode=function(){function e(t){o(this,e),this._sce=t,this._project=this._sce.getLoadedProject(),this.node=new Node,this._project.getActiveStage().addNode(this.node),this._mesh=null;var n=new s.ComponentTransform;this.node.addComponent(n),this.comp_renderer=new a.Component_GPU,this.node.addComponent(this.comp_renderer)}return i(e,[{key:"setMesh",value:function(e){var t=this;this._mesh=e,this.comp_renderer.setGPUFor(this.comp_renderer.gl,{"float4*attr vertexPos":function(){return t._mesh.vertexArray},"float4*attr vertexNormal":function(){return t._mesh.normalArray},"float4*attr vertexTexture":function(){return t._mesh.textureArray},"float*attr vertexTextureUnit":function(){return t._mesh.textureUnitArray},indices:function(){return t._mesh.indexArray},"mat4 PMatrix":function(){return t._project.getActiveStage().getActiveCamera().getComponent(u.Constants.COMPONENT_TYPES.PROJECTION).getMatrix().transpose().e},"mat4 cameraWMatrix":function(){return t._project.getActiveStage().getActiveCamera().getComponent(u.Constants.COMPONENT_TYPES.TRANSFORM_TARGET).getMatrix().transpose().e},"mat4 nodeWMatrix":function(){return t.node.getComponent(u.Constants.COMPONENT_TYPES.TRANSFORM).getMatrixPosition().transpose().e},"float nodesSize":function(){return 30},"float4* texAlbedo":function(){return t._mesh.vertexArray}},{type:"GRAPHIC",config:new l.VFP_RGB(1).getSrc(),drawMode:4,depthTest:!0,blend:!0,blendEquation:u.Constants.BLENDING_EQUATION_TYPES.FUNC_ADD,blendSrcMode:u.Constants.BLENDING_MODES.SRC_ALPHA,blendDstMode:u.Constants.BLENDING_MODES.ONE_MINUS_SRC_ALPHA}),this.comp_renderer.setArgUpdatable("PMatrix",!0),this.comp_renderer.setArgUpdatable("cameraWMatrix",!0),this.comp_renderer.setArgUpdatable("nodeWMatrix",!0),this.comp_renderer.getComponentBufferArg("RGB",this._project.getActiveStage().getActiveCamera().getComponent(u.Constants.COMPONENT_TYPES.GPU)),this.comp_renderer.gpufG.onPreProcessGraphic(0,function(){})}},{key:"setImage",value:function(e){var t=this,n=new Image;n.onload=function(){t.comp_renderer.setArg("texAlbedo",function(){return n})},n.src=e}}]),e}();r.SimpleNode=c,t.exports.SimpleNode=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../ComponentTransform.class":8,"../../Component_GPU.class":10,"../../Constants":11,"../../VFP_RGB.class":23}],17:[function(e,t,n){(function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n.Project=function(){function e(){r(this,e),this.stages=[],this.activeStage=null,this.gl=null}return o(e,[{key:"setActiveStage",value:function(e){this.activeStage=e,this.activeStage.setWebGLContext(this.gl)}},{key:"getActiveStage",value:function(){return this.activeStage}},{key:"addStage",value:function(e){this.stages.push(e)}},{key:"setWebGLContext",value:function(e){this.gl=e}}]),e}();e.Project=i,t.exports.Project=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SCE=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./SystemEvents.class"),a=e("./Utils.class"),l=e("./Constants"),u=n.SCE=function(){function e(){o(this,e),this.target=null,this.project=null,this.dimensions=null,this.canvas=null,this.gl=null,this._UI=null,this._enableUI=null,this._events=null}return i(e,[{key:"initialize",value:function(e){if(this.target=void 0!==e.target?e.target:void 0,this.dimensions=void 0!==e.dimensions?e.dimensions:{width:512,height:512},this._enableUI=void 0!==e.enableUI&&e.enableUI,null!=this.target){if(this.canvas=document.createElement("canvas"),this.target.appendChild(this.canvas),this.setDimensions(this.dimensions.width,this.dimensions.height),void 0!==e.gl&&null!==e.gl)this.gl=e.gl;else if(!(this.gl=a.Utils.getWebGLContextFromCanvas(this.canvas)))return alert("No WebGLRenderingContext"),!1}else alert("Target DIV required")}},{key:"loadProject",value:function(e){this.project=e,this.project.setWebGLContext(this.gl),!0===this._enableUI&&(this._UI=new UI(this.project).render(this.target,this.canvas)),this._events=new s.SystemEvents(this,this.canvas),this._events.initialize()}},{key:"getLoadedProject",value:function(){return this.project}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getEvents",value:function(){return this._events}},{key:"setDimensions",value:function(e,t){if(this.dimensions={width:e,height:t},this.canvas.setAttribute("width",this.dimensions.width),this.canvas.setAttribute("height",this.dimensions.height),null!=this.project&&null!=this.project.getActiveStage()){var n=this.project.getActiveStage().getActiveCamera();if(null!=n){var r=n.getComponent(l.Constants.COMPONENT_TYPES.PROJECTION),o=n.getComponent(l.Constants.COMPONENT_TYPES.GPU);r.setResolution(this.dimensions.width,this.dimensions.width),o.setArg("RGB",function(){return new Float32Array(this.dimensions.width*this.dimensions.width*4)}.bind(this))}}}},{key:"getDimensions",value:function(){return this.dimensions}}]),e}();r.SCE=u,t.exports.SCE=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Constants":11,"./SystemEvents.class":21,"./Utils.class":22}],19:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./Constants"),a=n.Stage=function(){function e(){o(this,e),this.nodes=[],this.activeCamera=null,this.selectedNode=null,this.paused=!1,this.backgroundColor=[0,0,0,1],this.gl=null,this._ontick=null}return i(e,[{key:"setActiveCamera",value:function(e){this.activeCamera=e}},{key:"getActiveCamera",value:function(){return this.activeCamera}},{key:"setSelectedNode",value:function(e){this.selectedNode=e}},{key:"getSelectedNode",value:function(){return this.selectedNode}},{key:"addNode",value:function(e){this.nodes.push(e),e.initialize(null!=e.getName()?e.getName():"node "+(this.nodes.length-1),this.gl)}},{key:"removeNode",value:function(e){for(var t=0;t<this.nodes.length;t++)if(this.nodes[t]===e){this.nodes.splice(t,1);break}}},{key:"getNodes",value:function(){return this.nodes}},{key:"render",value:function(e){this._ontick=e,this.paused=!1,this.setBackgroundColor(this.backgroundColor),this.tick()}},{key:"pause",value:function(){this.paused=!0}},{key:"setWebGLContext",value:function(e){this.gl=e}},{key:"setBackgroundColor",value:function(e){this.backgroundColor=e}},{key:"getBackgroundColor",value:function(){return this.backgroundColor}},{key:"getWebGLContext",value:function(){return this.gl}},{key:"tick",value:function(){if(null!=this.activeCamera){void 0!==this._ontick&&null!==this._ontick&&this._ontick();var e=this.activeCamera.getComponent(s.Constants.COMPONENT_TYPES.PROJECTION).getResolution();this.gl.viewport(0,0,e.width,e.height),this.gl.clearColor(this.backgroundColor[0],this.backgroundColor[1],this.backgroundColor[2],this.backgroundColor[3]),this.gl.clearDepth(1),this.gl.depthFunc(this.gl.LEQUAL);var t=this.activeCamera.getComponent(s.Constants.COMPONENT_TYPES.GPU);void 0!==t&&null!==t&&t.gpufG.fillArg("RGB",[this.backgroundColor[0],this.backgroundColor[1],this.backgroundColor[2],this.backgroundColor[3]]);for(var n=0,r=this.nodes.length;n<r;n++)if(this.nodes[n]!==this.activeCamera){for(var o in this.nodes[n].getComponents()){var i=this.nodes[n].getComponent(o);null!=i.tick&&i.tick()}null!=this.nodes[n].onTick&&this.nodes[n].onTick()}for(var a=0,l=this.nodes.length;a<l;a++)if(this.nodes[a]!==this.activeCamera)for(var u in this.nodes[a].getComponents()){var c=this.nodes[a].getComponent(u);if(null!=c.gpufG)for(var h in c.gpufG.vertexFragmentPrograms){var f=c.gpufG.vertexFragmentPrograms[h],d=WebCLGLUtils.getOutputBuffers(f,c.gpufG._argsValues);!0===f.enabled&&null!=d&&(c.gpufG._gl.bindFramebuffer(c.gpufG._gl.FRAMEBUFFER,d[0].fBuffer),c.gpufG._gl.clear(c.gpufG._gl.DEPTH_BUFFER_BIT),c.gpufG._gl.bindFramebuffer(c.gpufG._gl.FRAMEBUFFER,d[0].fBufferTemp),c.gpufG._gl.clear(c.gpufG._gl.DEPTH_BUFFER_BIT))}}for(var g in this.activeCamera.getComponents()){var _=this.activeCamera.getComponent(g);null!=_.tick&&_.tick()}}}}]),e}();r.Stage=a,t.exports.Stage=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Constants":11}],20:[function(e,t,n){(function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new a(e)}function i(e){return new l(e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.$M16=o,n.$V3=i;var a=n.StormM16=function(){function e(t){r(this,e),this.e=null,this.e=void 0!==t&&null!==t?new Float32Array(t):new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return s(e,[{key:"x",value:function(t){return o(t instanceof e?[this.e[0]*t.e[0]+this.e[1]*t.e[4]+this.e[2]*t.e[8]+this.e[3]*t.e[12],this.e[0]*t.e[1]+this.e[1]*t.e[5]+this.e[2]*t.e[9]+this.e[3]*t.e[13],this.e[0]*t.e[2]+this.e[1]*t.e[6]+this.e[2]*t.e[10]+this.e[3]*t.e[14],this.e[0]*t.e[3]+this.e[1]*t.e[7]+this.e[2]*t.e[11]+this.e[3]*t.e[15],this.e[4]*t.e[0]+this.e[5]*t.e[4]+this.e[6]*t.e[8]+this.e[7]*t.e[12],this.e[4]*t.e[1]+this.e[5]*t.e[5]+this.e[6]*t.e[9]+this.e[7]*t.e[13],this.e[4]*t.e[2]+this.e[5]*t.e[6]+this.e[6]*t.e[10]+this.e[7]*t.e[14],this.e[4]*t.e[3]+this.e[5]*t.e[7]+this.e[6]*t.e[11]+this.e[7]*t.e[15],this.e[8]*t.e[0]+this.e[9]*t.e[4]+this.e[10]*t.e[8]+this.e[11]*t.e[12],this.e[8]*t.e[1]+this.e[9]*t.e[5]+this.e[10]*t.e[9]+this.e[11]*t.e[13],this.e[8]*t.e[2]+this.e[9]*t.e[6]+this.e[10]*t.e[10]+this.e[11]*t.e[14],this.e[8]*t.e[3]+this.e[9]*t.e[7]+this.e[10]*t.e[11]+this.e[11]*t.e[15],this.e[12]*t.e[0]+this.e[13]*t.e[4]+this.e[14]*t.e[8]+this.e[15]*t.e[12],this.e[12]*t.e[1]+this.e[13]*t.e[5]+this.e[14]*t.e[9]+this.e[15]*t.e[13],this.e[12]*t.e[2]+this.e[13]*t.e[6]+this.e[14]*t.e[10]+this.e[15]*t.e[14],this.e[12]*t.e[3]+this.e[13]*t.e[7]+this.e[14]*t.e[11]+this.e[15]*t.e[15]]:[0,0,0,this.e[0]*t.e[0]+this.e[1]*t.e[1]+this.e[2]*t.e[2],0,0,0,this.e[4]*t.e[0]+this.e[5]*t.e[1]+this.e[6]*t.e[2],0,0,0,this.e[8]*t.e[0]+this.e[9]*t.e[1]+this.e[10]*t.e[2],0,0,0,this.e[12]*t.e[0]+this.e[13]*t.e[1]+this.e[14]*t.e[2]])}},{key:"transpose",value:function(){return o([this.e[0],this.e[4],this.e[8],this.e[12],this.e[1],this.e[5],this.e[9],this.e[13],this.e[2],this.e[6],this.e[10],this.e[14],this.e[3],this.e[7],this.e[11],this.e[15]])}},{key:"inverse",value:function(){var e=o(this.e).transpose().e,t=new Float32Array(12),n=new Float32Array(16);t[0]=e[10]*e[15],t[1]=e[11]*e[14],t[2]=e[9]*e[15],t[3]=e[11]*e[13],t[4]=e[9]*e[14],t[5]=e[10]*e[13],t[6]=e[8]*e[15],t[7]=e[11]*e[12],t[8]=e[8]*e[14],t[9]=e[10]*e[12],t[10]=e[8]*e[13],t[11]=e[9]*e[12],n[0]=t[0]*e[5]+t[3]*e[6]+t[4]*e[7],n[0]-=t[1]*e[5]+t[2]*e[6]+t[5]*e[7],n[1]=t[1]*e[4]+t[6]*e[6]+t[9]*e[7],n[1]-=t[0]*e[4]+t[7]*e[6]+t[8]*e[7],n[2]=t[2]*e[4]+t[7]*e[5]+t[10]*e[7],n[2]-=t[3]*e[4]+t[6]*e[5]+t[11]*e[7],n[3]=t[5]*e[4]+t[8]*e[5]+t[11]*e[6],n[3]-=t[4]*e[4]+t[9]*e[5]+t[10]*e[6],n[4]=t[1]*e[1]+t[2]*e[2]+t[5]*e[3],n[4]-=t[0]*e[1]+t[3]*e[2]+t[4]*e[3],n[5]=t[0]*e[0]+t[7]*e[2]+t[8]*e[3],n[5]-=t[1]*e[0]+t[6]*e[2]+t[9]*e[3],n[6]=t[3]*e[0]+t[6]*e[1]+t[11]*e[3],n[6]-=t[2]*e[0]+t[7]*e[1]+t[10]*e[3],n[7]=t[4]*e[0]+t[9]*e[1]+t[10]*e[2],n[7]-=t[5]*e[0]+t[8]*e[1]+t[11]*e[2],t[0]=e[2]*e[7],t[1]=e[3]*e[6],t[2]=e[1]*e[7],t[3]=e[3]*e[5],t[4]=e[1]*e[6],t[5]=e[2]*e[5],t[6]=e[0]*e[7],t[7]=e[3]*e[4],t[8]=e[0]*e[6],t[9]=e[2]*e[4],t[10]=e[0]*e[5],t[11]=e[1]*e[4],n[8]=t[0]*e[13]+t[3]*e[14]+t[4]*e[15],n[8]-=t[1]*e[13]+t[2]*e[14]+t[5]*e[15],n[9]=t[1]*e[12]+t[6]*e[14]+t[9]*e[15],n[9]-=t[0]*e[12]+t[7]*e[14]+t[8]*e[15],n[10]=t[2]*e[12]+t[7]*e[13]+t[10]*e[15],n[10]-=t[3]*e[12]+t[6]*e[13]+t[11]*e[15],n[11]=t[5]*e[12]+t[8]*e[13]+t[11]*e[14],n[11]-=t[4]*e[12]+t[9]*e[13]+t[10]*e[14],n[12]=t[2]*e[10]+t[5]*e[11]+t[1]*e[9],n[12]-=t[4]*e[11]+t[0]*e[9]+t[3]*e[10],n[13]=t[8]*e[11]+t[0]*e[8]+t[7]*e[10],n[13]-=t[6]*e[10]+t[9]*e[11]+t[1]*e[8],n[14]=t[6]*e[9]+t[11]*e[11]+t[3]*e[8],n[14]-=t[10]*e[11]+t[2]*e[8]+t[7]*e[9],n[15]=t[10]*e[10]+t[4]*e[8]+t[9]*e[9],n[15]-=t[8]*e[9]+t[11]*e[10]+t[5]*e[8];var r=e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3];return o([n[0]*r,n[1]*r,n[2]*r,n[3]*r,n[4]*r,n[5]*r,n[6]*r,n[7]*r,n[8]*r,n[9]*r,n[10]*r,n[11]*r,n[12]*r,n[13]*r,n[14]*r,n[15]*r])}},{key:"getLeft",value:function(){return i([this.e[0],this.e[4],this.e[8]]).normalize()}},{key:"getUp",value:function(){return i([this.e[1],this.e[5],this.e[9]]).normalize()}},{key:"getForward",value:function(){return i([this.e[2],this.e[6],this.e[10]]).normalize()}},{key:"setRotation",value:function(e,t,n){return void 0!==n&&null!==n&&null!==n.e[0]?void 0===t||null===t||!0===t?this.x(o([1,0,0,0,0,Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1])):o([1,0,0,0,0,Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1]):void 0!==n&&null!==n&&null!==n.e[1]?void 0===t||null===t||!0===t?this.x(o([Math.cos(e),0,Math.sin(e),0,0,1,0,0,-Math.sin(e),0,Math.cos(e),0,0,0,0,1])):o([Math.cos(e),0,Math.sin(e),0,0,1,0,0,-Math.sin(e),0,Math.cos(e),0,0,0,0,1]):void 0!==n&&null!==n&&null!==n.e[2]?void 0===t||null===t||!0===t?this.x(o([Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1,0,0,0,0,1])):o([Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1,0,0,0,0,1]):void 0}},{key:"setRotationX",value:function(e,t){return this.setRotation(e,t,i([1,0,0]))}},{key:"setRotationY",value:function(e,t){return this.setRotation(e,t,i([0,1,0]))}},{key:"setRotationZ",value:function(e,t){return this.setRotation(e,t,i([0,0,1]))}},{key:"setScale",value:function(e,t,n){return void 0!==n&&null!==n&&null!==n.e[0]?void 0===t||null===t||!0===t?this.x(o([e,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):o([e,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0!==n&&null!==n&&null!==n.e[1]?void 0===t||null===t||!0===t?this.x(o([1,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1])):o([1,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]):void 0!==n&&null!==n&&null!==n.e[2]?void 0===t||null===t||!0===t?this.x(o([1,0,0,0,0,1,0,0,0,0,e,0,0,0,0,1])):o([1,0,0,0,0,1,0,0,0,0,e,0,0,0,0,1]):void 0}},{key:"setScaleX",value:function(e,t){return this.setScale(e,t,i([1,0,0]))}},{key:"setScaleY",value:function(e,t){return this.setScale(e,t,i([0,1,0]))}},{key:"setScaleZ",value:function(e,t){return this.setScale(e,t,i([0,0,1]))}},{key:"getPosition",value:function(){return i([this.e[3],this.e[7],this.e[11]])}},{key:"setPosition",value:function(e){return this.e[3]=e.e[0],this.e[7]=e.e[1],this.e[11]=e.e[2],this}}],[{key:"makeLookAt",value:function(e,t,n,r,s,a,l,u,c){var h=i([e,t,n]),f=i([r,s,a]),d=i([l,u,c]),g=h.subtract(f).normalize(),_=d.cross(g).normalize(),v=g.cross(_).normalize(),p=o([_.e[0],_.e[1],_.e[2],0,v.e[0],v.e[1],v.e[2],0,g.e[0],g.e[1],g.e[2],0,0,0,0,1]),m=o([1,0,0,-e,0,1,0,-t,0,0,1,-n,0,0,0,1]);return p.x(m)}},{key:"setPerspectiveProjection",value:function(e,t,n,r){var i=Math.tan(e*Math.PI/360)*n,s=-i,a=t*s,l=t*i;return o([2*n/(l-a),0,(l+a)/(l-a),0,0,2*n/(i-s),(i+s)/(i-s),0,0,0,-(r+n)/(r-n),-2*r*n/(r-n),0,0,-1,0])}},{key:"setOrthographicProjection",value:function(e,t,n,r,i,s){return o([2/(t-e),0,0,-(t+e)/(t-e),0,2/(r-n),0,-(r+n)/(r-n),0,0,-2/(s-i),-(s+i)/(s-i),0,0,0,1])}}]),e}();e.StormM16=a,t.exports.StormM16=a,e.$M16=o,t.exports.$M16=o;var l=n.StormV3=function(){function e(t){r(this,e),this.e=new Float32Array(t)}return s(e,[{key:"add",value:function(e){return i([this.e[0]+e.e[0],this.e[1]+e.e[1],this.e[2]+e.e[2]])}},{key:"cross",value:function(e){return i([this.e[1]*e.e[2]-this.e[2]*e.e[1],this.e[2]*e.e[0]-this.e[0]*e.e[2],this.e[0]*e.e[1]-this.e[1]*e.e[0]])}},{key:"distance",value:function(e){return Math.sqrt((this.e[0]-e.e[0])*(this.e[0]-e.e[0])+(this.e[1]-e.e[1])*(this.e[1]-e.e[1])+(this.e[2]-e.e[2])*(this.e[2]-e.e[2]))}},{key:"dot",value:function(e){return this.e[0]*e.e[0]+this.e[1]*e.e[1]+this.e[2]*e.e[2]}},{key:"equal",value:function(e){return this.e[0]===e.e[0]&&this.e[1]===e.e[1]&&this.e[2]===e.e[2]}},{key:"modulus",value:function(){return Math.sqrt(this.sumComponentSqrs())}},{key:"sumComponentSqrs",value:function(){var e=this.sqrComponents();return e[0]+e[1]+e[2]}},{key:"sqrComponents",value:function(){var e=new Float32Array(3);return e.set([this.e[0]*this.e[0],this.e[1]*this.e[1],this.e[2]*this.e[2]]),e}},{key:"x",value:function(t){var n=t instanceof a;if(t instanceof e)return i([this.e[0]*t.e[0],this.e[1]*t.e[1],this.e[2]*t.e[2]]);if(n){var r=o([1,0,0,this.e[0],0,1,0,this.e[1],0,0,1,this.e[2],0,0,0,1]);return o([r.e[0]+0+0+0,0+r.e[1]+0+0,0+r.e[2]+0,r.e[0]*t.e[0]+r.e[1]*t.e[1]+r.e[2]*t.e[2]+r.e[3],r.e[4]+0+0+0,0+r.e[5]+0+0,0+r.e[6]+0,r.e[4]*t.e[0]+r.e[5]*t.e[1]+r.e[6]*t.e[2]+r.e[7],r.e[8]+0+0+0,0+r.e[9]+0+0,0+r.e[10]+0,r.e[8]*t.e[0]+r.e[9]*t.e[1]+r.e[10]*t.e[2]+r.e[11],r.e[12]+0+0+0,0+r.e[13]+0+0,0+r.e[14]+0,r.e[12]*t.e[0]+r.e[13]*t.e[1]+r.e[14]*t.e[2]+r.e[15]*t.e[15]])}return i([this.e[0]*t,this.e[1]*t,this.e[2]*t])}},{key:"reflect",value:function(e){var t=i([this.e[0],this.e[1],this.e[2]]),n=i([e.e[0],e.e[1],e.e[2]]),r=n.x(t.dot(n));return r=r.x(2),r=t.subtract(r)}},{key:"subtract",value:function(e){return i([this.e[0]-e.e[0],this.e[1]-e.e[1],this.e[2]-e.e[2]])}},{key:"normalize",value:function(){var e=1/this.modulus();return i([this.e[0]*e,this.e[1]*e,this.e[2]*e])}}]),e}();e.StormV3=l,t.exports.StormV3=l,e.$V3=i,t.exports.$V3=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SystemEvents=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./Utils.class"),a=e("./Constants"),l=n.SystemEvents=function(){function e(t,n){o(this,e),this._sce=t,this._project=this._sce.getLoadedProject(),this._target=n,this._utils=new s.Utils,this.mousePosX_orig=0,this.mousePosY_orig=0,this.mousePosX=0,this.mousePosY=0,this.mouseOldPosX=0,this.mouseOldPosY=0,this.divPositionX=0,this.divPositionY=0,this.focused=!1}return i(e,[{key:"initialize",value:function(){document.body.addEventListener("keydown",this.keydownListener.bind(this)),document.body.addEventListener("keyup",this.keyupListener.bind(this)),this._target.addEventListener("mousewheel",this.mousewheelListener.bind(this)),this._target.addEventListener("wheel",this.mousewheelListener.bind(this)),document.body.addEventListener("mouseup",this.mouseupListener.bind(this),!1),document.body.addEventListener("touchend",this.mouseupListener.bind(this),!1),this._target.addEventListener("mousedown",this.mousedownListener.bind(this),!1),this._target.addEventListener("touchstart",this.mousedownListener.bind(this).bind(this),!1),document.body.addEventListener("mousemove",this.mousemoveListener.bind(this),!1),document.body.addEventListener("touchmove",this.mousemoveListener.bind(this),!1),this._target.addEventListener("mouseover",function(){this.focused=!0}.bind(this),!1),this._target.addEventListener("mouseleave",function(){this.focused=!1}.bind(this),!1)}},{key:"getMousePosition",value:function(){return{x:this.mousePosX,y:this.mousePosY}}},{key:"updateDivPosition",value:function(e){this.divPositionX=s.Utils.getElementPosition(this._sce.getCanvas()).x,this.divPositionY=s.Utils.getElementPosition(this._sce.getCanvas()).y,this.mousePosX=e.clientX-this.divPositionX,this.mousePosY=e.clientY-this.divPositionY,this.mousePosX_orig=this.mousePosX,this.mousePosY_orig=this.mousePosY,this.mouseOldPosX=this.mousePosX,this.mouseOldPosY=this.mousePosY}},{key:"callComponentEvent",value:function(e,t,n){if(void 0!==this._project&&null!==this._project){var r=this._project.getActiveStage(),o=r.getActiveCamera().getComponent(a.Constants.COMPONENT_TYPES.PROJECTION),i=null;if(t===a.Constants.EVENT_TYPES.MOUSE_DOWN&&this.updateDivPosition(n),t===a.Constants.EVENT_TYPES.MOUSE_MOVE&&(this.mouseOldPosX=this.mousePosX,this.mouseOldPosY=this.mousePosY,this.mousePosX=n.clientX-this.divPositionX,this.mousePosY=n.clientY-this.divPositionY,i=$V3([this.mousePosX-this.mousePosX_orig,0,this.mousePosY-this.mousePosY_orig])),t===a.Constants.EVENT_TYPES.MOUSE_WHEEL){this.updateDivPosition(n);var s=o.getFov(),l=(this.mousePosX-this._sce.getCanvas().width/2)/this._sce.getCanvas().width*s*.2,u=(this.mousePosY-this._sce.getCanvas().height/2)/this._sce.getCanvas().height*s*.2;(void 0!==n.wheelDeltaY&&n.wheelDeltaY>=0||void 0!==n.deltaY&&n.deltaY>=0)&&(l*=-1,u*=-1);var c=r.getActiveCamera().getComponent(a.Constants.COMPONENT_TYPES.TRANSFORM_TARGET).getMatrix(),h=c.getLeft().x(l),f=c.getUp().x(u);i=h.add(f)}for(var d=0,g=r.getNodes().length;d<g;d++)for(var _ in r.getNodes()[d].getComponents()){var v=r.getNodes()[d].getComponent(_);v.type===e&&(t===a.Constants.EVENT_TYPES.KEY_DOWN&&null!=v._onkeydown&&!0===this.focused&&v._onkeydown(n),t===a.Constants.EVENT_TYPES.KEY_UP&&null!=v._onkeyup&&v._onkeyup(n),t===a.Constants.EVENT_TYPES.MOUSE_DOWN&&null!=v._onmousedown&&v._onmousedown(n),t===a.Constants.EVENT_TYPES.MOUSE_UP&&null!=v._onmouseup&&v._onmouseup(n),t===a.Constants.EVENT_TYPES.MOUSE_MOVE&&null!=v._onmousemove&&v._onmousemove(n,i),t===a.Constants.EVENT_TYPES.MOUSE_WHEEL&&null!=v._onmousewheel&&v._onmousewheel(n,i))}}}},{key:"keydownListener",value:function(e){this.callComponentEvent(a.Constants.COMPONENT_TYPES.KEYBOARD_EVENTS,a.Constants.EVENT_TYPES.KEY_DOWN,e)}},{key:"keyupListener",value:function(e){this.callComponentEvent(a.Constants.COMPONENT_TYPES.KEYBOARD_EVENTS,a.Constants.EVENT_TYPES.KEY_UP,e)}},{key:"mousedownListener",value:function(e){this.callComponentEvent(a.Constants.COMPONENT_TYPES.MOUSE_EVENTS,a.Constants.EVENT_TYPES.MOUSE_DOWN,e)}},{key:"mouseupListener",value:function(e){this.callComponentEvent(a.Constants.COMPONENT_TYPES.MOUSE_EVENTS,a.Constants.EVENT_TYPES.MOUSE_UP,e)}},{key:"mousemoveListener",value:function(e){this.callComponentEvent(a.Constants.COMPONENT_TYPES.MOUSE_EVENTS,a.Constants.EVENT_TYPES.MOUSE_MOVE,e)}},{key:"mousewheelListener",value:function(e){e.preventDefault(),this.callComponentEvent(a.Constants.COMPONENT_TYPES.MOUSE_EVENTS,a.Constants.EVENT_TYPES.MOUSE_WHEEL,e)}}]),e}();r.SystemEvents=l,t.exports.SystemEvents=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Constants":11,"./Utils.class":22}],22:[function(e,t,n){(function(r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e("webclgl");var a=n.Utils=function(){function e(){o(this,e),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}return s(e,[{key:"getImageFromCanvas",value:function(e,t){var n=document.createElement("img");n.onload=function(){t(n)},n.src=e.toDataURL()}},{key:"pack",value:function(t){var n=[1/255,1/255,1/255,0],r=t,o=e.fract(255*r),i=e.fract(255*o),s=[r,o,i,e.fract(255*i)],a=[s[1]*n[0],s[2]*n[1],s[3]*n[2],s[3]*n[3]];return[s[0]-a[0],s[1]-a[1],s[2]-a[2],s[3]-a[3]]}},{key:"unpack",value:function(t){var n=[1,1/255,1/65025,1/16581375];return e.dot4(t,n)}}],[{key:"getCanvasFromUint8Array",value:function(e,t,n){var r=document.createElement("canvas");r.width=t,r.height=n;for(var o=r.getContext("2d"),i=o.createImageData(t,n),s=0;s<i.data.length;s++)i.data[s]=e[s];return o.putImageData(i,0,0),r}},{key:"getUint8ArrayFromHTMLImageElement",value:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height).data}},{key:"getVector",value:function(t,n){var r=e.cartesianToSpherical(t),o=r.lat,i=r.lng;return o+=n*(180*Math.random()-90),i+=n*(180*Math.random()-90),e.sphericalToCartesian(1,o,i)}},{key:"getVectorGLSLFunctionString",value:function(){return"vec3 getVector(vec3 vecNormal, float degrees, vec2 vecNoise) {\nvec3 ob = cartesianToSpherical(vecNormal);float angleLat = ob.y;float angleLng = ob.z;float desvLat = (vecNoise.x*180.0)-90.0;float desvLng = (vecNoise.y*180.0)-90.0;angleLat += (degrees*desvLat);angleLng += (degrees*desvLng);return sphericalToCartesian(vec3(1.0, angleLat, angleLng));}\n"}},{key:"cartesianToSpherical",value:function(t){var n=Math.sqrt(t.e[0]*t.e[0]+t.e[1]*t.e[1]+t.e[2]*t.e[2]);return{radius:n,lat:e.radToDeg(Math.acos(t.e[1]/n)),lng:e.radToDeg(Math.atan2(t.e[2],t.e[0]))}}},{key:"cartesianToSphericalGLSLFunctionString",value:function(){return"vec3 cartesianToSpherical(vec3 vect) {\nfloat r = sqrt(vect.x*vect.x + vect.y*vect.y + vect.z*vect.z);float angleLat = radToDeg(acos(vect.y/r));float angleLng = radToDeg(atan(vect.z, vect.x));return vec3(r, angleLat, angleLng);}\n"}},{key:"sphericalToCartesian",value:function(t,n,r){var o=t,i=e.degToRad(n),s=e.degToRad(r),a=o*Math.sin(i)*Math.cos(s),l=o*Math.sin(i)*Math.sin(s),u=o*Math.cos(i);return new StormV3([a,u,l])}},{key:"sphericalToCartesianGLSLFunctionString",value:function(){return"vec3 sphericalToCartesian(vec3 vect) {\nfloat r = vect.x;float angleLat = degToRad(vect.y);float angleLng = degToRad(vect.z);float x = r*sin(angleLat)*cos(angleLng);float z = r*sin(angleLat)*sin(angleLng);float y = r*cos(angleLat);return vec3(x,y,z);}\n"}},{key:"refract",value:function(e,t,n,r){var o=n/r,i=-1*t.dot(e),s=1-o*o*(1-i*i);return e.x(o).add(t.x(o*i-Math.sqrt(s)))}},{key:"degToRad",value:function(e){return 3.14159*e/180}},{key:"degToRadGLSLFunctionString",value:function(){return"float degToRad(float deg) {return (deg*3.14159)/180.0;}"}},{key:"radToDeg",value:function(e){return e*(180/3.14159)}},{key:"radToDegGLSLFunctionString",value:function(){return"float radToDeg(float rad) {return rad*(180.0/3.14159);}"}},{key:"hexToRgb",value:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}},{key:"rgbToHex",value:function(e){return"#"+(16777216+(e[2]|e[1]<<8|e[0]<<16)).toString(16).slice(1)}},{key:"invsqrt",value:function(e){return 1/e}},{key:"smoothstep",value:function(e,t,n){if(n<e)return 0;if(n>=t)return 1;if(e===t)return-1;var r=(n-e)/(t-e);return r*r*(3-2*r)}},{key:"dot4",value:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},{key:"fract",value:function(e){return e>0?e-Math.floor(e):e-Math.ceil(e)}},{key:"packGLSLFunctionString",value:function(){return"vec4 pack (float depth) {const vec4 bias = vec4( 1.0 / 255.0,1.0 / 255.0,1.0 / 255.0,0.0);float r = depth;float g = fract(r * 255.0);float b = fract(g * 255.0);float a = fract(b * 255.0);vec4 colour = vec4(r, g, b, a);return colour - (colour.yzww * bias);}"}},{key:"unpackGLSLFunctionString",value:function(){return"float unpack (vec4 colour) {const vec4 bitShifts = vec4(1.0,1.0 / 255.0,1.0 / (255.0 * 255.0),1.0 / (255.0 * 255.0 * 255.0));return dot(colour, bitShifts);}"}},{key:"rayTraversalInitSTR",value:function(){return"float wh = ceil(sqrt(uResolution*uResolution*uResolution));\nfloat cs = uGridsize/uResolution;\nfloat chs = cs/2.0;\nfloat texelSize = 1.0/(wh-1.0);\nvec3 gl = vec3(-(uGridsize/2.0), -(uGridsize/2.0), -(uGridsize/2.0));\nvec3 _r = vec3(uGridsize, uGridsize, uGridsize);\nvec3 _rRes = vec3(uResolution, uResolution, uResolution);\nvec3 _len = _r/_rRes;\nvec3 worldToVoxel(vec3 world) {\nvec3 ijk = (world - gl) / _len;\nijk = vec3(floor(ijk.x), floor(ijk.y), floor(ijk.z));\nreturn ijk;\n}\nfloat voxelToWorldX(float x) {return x * _len.x + gl.x;}\nfloat voxelToWorldY(float y) {return y * _len.y + gl.y;}\nfloat voxelToWorldZ(float z) {return z * _len.z + gl.z;}\n"}},{key:"rayTraversalSTR",value:function(e){return"vec2 getId(vec3 voxel) {\nint tex3dId = (int(voxel.y)*(int(uResolution)*int(uResolution)))+(int(voxel.z)*(int(uResolution)))+int(voxel.x);\nfloat num = float(tex3dId)/wh;\nfloat col = fract(num)*wh;\nfloat row = floor(num);\nreturn vec2(col*texelSize, row*texelSize);\n}\nvec4 getVoxel_Color(vec2 texVec, vec3 voxel, vec3 RayOrigin) {\nvec4 rgba = vec4(0.0,0.0,0.0,0.0);\nvec4 texture = sampler_voxelColor[vec2(texVec.x, texVec.y)];\nif(texture.a/255.0 > 0.5) {\nrgba = vec4(texture.rgb/255.0,distance(vec3(voxelToWorldX(voxel.x), voxelToWorldX(voxel.y), voxelToWorldX(voxel.z)),RayOrigin));\n}\nreturn rgba;\n}\nvec4 getVoxel_Pos(vec2 texVec) {\nvec4 rgba = vec4(0.0,0.0,0.0,0.0);\nvec4 texture = sampler_voxelPos[vec2(texVec.x, texVec.y)];\nrgba = vec4( ((texture.xyz/255.0)*uGridsize)-(uGridsize/2.0), 1.0);\nreturn rgba;\n}\nvec4 getVoxel_Normal(vec2 texVec) {\nvec4 rgba = vec4(0.0,0.0,0.0,0.0);\nvec4 texture = sampler_voxelNormal[vec2(texVec.x, texVec.y)];\nrgba = vec4(((texture.rgb/255.0)*2.0)-1.0, 1.0);\nreturn rgba;\n}\nstruct RayTraversalResponse {vec4 voxelColor;vec4 voxelPos;vec4 voxelNormal;};RayTraversalResponse rayTraversal(vec3 RayOrigin, vec3 RayDir) {\nvec4 fvoxelColor = vec4(0.0, 0.0, 0.0, 0.0);vec4 fvoxelPos = vec4(0.0, 0.0, 0.0, 0.0);vec4 fvoxelNormal = vec4(0.0, 0.0, 0.0, 0.0);vec3 voxel = worldToVoxel(RayOrigin);vec3 _dir = normalize(RayDir);vec3 tMax;if(RayDir.x < 0.0) tMax.x = (voxelToWorldX(voxel.x)-RayOrigin.x)/RayDir.x;if(RayDir.x > 0.0) tMax.x = (voxelToWorldX(voxel.x+1.0)-RayOrigin.x)/RayDir.x;if(RayDir.y < 0.0) tMax.y = (voxelToWorldY(voxel.y)-RayOrigin.y)/RayDir.y;if(RayDir.y < 0.0) tMax.y = (voxelToWorldY(voxel.y+1.0)-RayOrigin.y)/RayDir.y;if(RayDir.z < 0.0) tMax.z = (voxelToWorldZ(voxel.z)-RayOrigin.z)/RayDir.z;if(RayDir.z < 0.0) tMax.z = (voxelToWorldZ(voxel.z+1.0)-RayOrigin.z)/RayDir.z;float tDeltaX = _r.x/abs(RayDir.x);float tDeltaY = _r.y/abs(RayDir.y);float tDeltaZ = _r.z/abs(RayDir.z);float stepX = 1.0; float stepY = 1.0; float stepZ = 1.0;\nfloat outX = _r.x; float outY = _r.y; float outZ = _r.z;\nif(RayDir.x < 0.0) {stepX = -1.0; outX = -1.0;}if(RayDir.y < 0.0) {stepY = -1.0; outY = -1.0;}if(RayDir.z < 0.0) {stepZ = -1.0; outZ = -1.0;}vec4 color = vec4(0.0,0.0,0.0,0.0);\nbool c1; bool c2; bool c3; bool isOut;vec2 vid;for(int c = 0; c < "+e+"*2; c++) {\nc1 = bool(tMax.x < tMax.y);c2 = bool(tMax.x < tMax.z);c3 = bool(tMax.y < tMax.z);isOut = false;if (c1 && c2) {voxel.x += stepX;if(voxel.x==outX) isOut=true;tMax.x += tDeltaX;} else if(( (c1 && !c2) || (!c1 && !c3) )) {voxel.z += stepZ;if(voxel.z==outZ) isOut=true;tMax.z += tDeltaZ;} else if(!c1 && c3) {voxel.y += stepY;if(voxel.y==outY) isOut=true;tMax.y += tDeltaY;}if(isOut == true) break;\nelse {if((voxel.x >= 0.0 && voxel.x <= _rRes.x && voxel.y >= 0.0 && voxel.y <= _rRes.y && voxel.z >= 0.0 && voxel.z <= _rRes.z)) {;\nvid = getId(voxel);vec4 vcc = getVoxel_Color(vid, voxel, RayOrigin);if(vcc.a != 0.0) {fvoxelColor = vcc;break;\n}}}}fvoxelPos = getVoxel_Pos(vid);fvoxelNormal = getVoxel_Normal(vid);return RayTraversalResponse(fvoxelColor, fvoxelPos, fvoxelNormal);}\n"}},{key:"isPowerOfTwo",value:function(e){return 0==(e&e-1)}},{key:"nextHighestPowerOfTwo",value:function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}},{key:"getElementPosition",value:function(e){for(var t=e,n=0,r=0;"object"===(void 0===t?"undefined":i(t))&&void 0!==t.tagName;)r+=t.offsetTop,n+=t.offsetLeft,"BODY"===t.tagName.toUpperCase()&&(t=0),"object"===(void 0===t?"undefined":i(t))&&"object"===i(t.offsetParent)&&(t=t.offsetParent);return{x:n,y:r}}},{key:"getWebGLContextFromCanvas",value:function(e,t){return WebCLGLUtils.getWebGLContextFromCanvas(e,t)}},{key:"fullScreen",value:function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}]),e}();r.Utils=a,t.exports.Utils=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{webclgl:1}],23:[function(e,t,n){(function(e){"use strict";function r(e){this.getSrc=function(){return[["RGB"],"varying vec4 vVN;\nvarying vec4 vVT;\nvarying float vVTU;\n","vec4 vp = vertexPos[];\nvec4 vn = vertexNormal[];\nvec4 vt = vertexTexture[];\nfloat vtu = vertexTextureUnit[];\nvVN = vn;vVT = vt;vVTU = vtu;gl_Position = PMatrix * cameraWMatrix * nodeWMatrix * vp;\n","varying vec4 vVN;\nvarying vec4 vVT;\nvarying float vVTU;\n","vec4 textureColor = texture2D(texAlbedo, vVT.xy);\nreturn [textureColor];\n"]}}Object.defineProperty(n,"__esModule",{value:!0}),n.VFP_RGB=r,e.VFP_RGB=r,t.exports.VFP_RGB=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){(function(n){"use strict";e("./ArrayGenerator.class"),e("./Component.class"),e("./Component_GPU.class"),e("./ComponentControllerTransformTarget.class"),e("./ComponentKeyboardEvents.class"),e("./ComponentMouseEvents.class"),e("./ComponentProjection.class"),e("./ComponentTransform.class"),e("./ComponentTransformTarget.class"),e("./Constants"),e("./Mesh.class"),e("./Node.class"),e("./Project.class"),e("./SCE.class"),e("./Stage.class"),e("./StormMath.class"),e("./SystemEvents.class"),e("./Utils.class"),e("./VFP_RGB.class"),e("./Prefabs/Grid/Grid.class"),e("./Prefabs/SimpleCamera/SimpleCamera.class"),e("./Prefabs/SimpleNode/SimpleNode.class"),t.exports.ArrayGenerator=n.ArrayGenerator=ArrayGenerator,t.exports.Component=n.Component=Component,t.exports.Component_GPU=n.Component_GPU=Component_GPU,t.exports.ComponentControllerTransformTarget=n.ComponentControllerTransformTarget=ComponentControllerTransformTarget,t.exports.ComponentKeyboardEvents=n.ComponentKeyboardEvents=ComponentKeyboardEvents,t.exports.ComponentMouseEvents=n.ComponentMouseEvents=ComponentMouseEvents,t.exports.ComponentProjection=n.ComponentProjection=ComponentProjection,t.exports.ComponentTransform=n.ComponentTransform=ComponentTransform,t.exports.ComponentTransformTarget=n.ComponentTransformTarget=ComponentTransformTarget,t.exports.Constants=n.Constants=Constants,t.exports.Mesh=n.Mesh=Mesh,t.exports.Node=n.Node=Node,t.exports.Project=n.Project=Project,t.exports.SCE=n.SCE=SCE,t.exports.Stage=n.Stage=Stage,t.exports.StormM16=n.StormM16=StormM16,t.exports.StormV3=n.StormV3=StormV3,t.exports.SystemEvents=n.SystemEvents=SystemEvents,t.exports.Utils=n.Utils=Utils,t.exports.VFP_RGB=n.VFP_RGB=VFP_RGB,t.exports.Grid=n.Grid=Grid,t.exports.SimpleCamera=n.SimpleCamera=SimpleCamera,t.exports.SimpleNode=n.SimpleNode=SimpleNode}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ArrayGenerator.class":2,"./Component.class":3,"./ComponentControllerTransformTarget.class":4,"./ComponentKeyboardEvents.class":5,"./ComponentMouseEvents.class":6,"./ComponentProjection.class":7,"./ComponentTransform.class":8,"./ComponentTransformTarget.class":9,"./Component_GPU.class":10,"./Constants":11,"./Mesh.class":12,"./Node.class":13,"./Prefabs/Grid/Grid.class":14,"./Prefabs/SimpleCamera/SimpleCamera.class":15,"./Prefabs/SimpleNode/SimpleNode.class":16,"./Project.class":17,"./SCE.class":18,"./Stage.class":19,"./StormMath.class":20,"./SystemEvents.class":21,"./Utils.class":22,"./VFP_RGB.class":23}]},{},[24]);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(require,module,exports){
(function (global){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.VFP_NODE = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

require("scejs");

var _graphUtil = require("./graphUtil");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var VFP_NODE = exports.VFP_NODE = function () {
    function VFP_NODE() {
        _classCallCheck(this, VFP_NODE);
    }

    _createClass(VFP_NODE, null, [{
        key: "getSrc",
        value: function getSrc(customCode, geometryLength) {
            return [["RGB"],

            //██╗   ██╗███████╗██████╗ ████████╗███████╗██╗  ██╗    ██╗  ██╗███████╗ █████╗ ██████╗
            //██║   ██║██╔════╝██╔══██╗╚══██╔══╝██╔════╝╚██╗██╔╝    ██║  ██║██╔════╝██╔══██╗██╔══██╗
            //██║   ██║█████╗  ██████╔╝   ██║   █████╗   ╚███╔╝     ███████║█████╗  ███████║██║  ██║
            //╚██╗ ██╔╝██╔══╝  ██╔══██╗   ██║   ██╔══╝   ██╔██╗     ██╔══██║██╔══╝  ██╔══██║██║  ██║
            // ╚████╔╝ ███████╗██║  ██║   ██║   ███████╗██╔╝ ██╗    ██║  ██║███████╗██║  ██║██████╔╝
            //  ╚═══╝  ╚══════╝╚═╝  ╚═╝   ╚═╝   ╚══════╝╚═╝  ╚═╝    ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═════╝
            'varying vec4 vVertexColor;\n' + 'varying vec4 vVertexColorNetError;\n' + 'varying vec4 vUV;\n' + 'varying vec2 vVertexUV;\n' + 'varying float vUseTex;\n' + 'varying vec4 vWNMatrix;\n' + 'varying float vNodeId;\n' + 'varying float vNodeIdOpposite;\n' + 'varying float vDist;\n' + 'varying float vVisibility;\n' + 'varying float vIsSelected;\n' + 'varying float vIsHover;\n' + 'varying float vUseCrosshair;\n' + 'varying float vIstarget;\n' + 'vec2 get2Dfrom1D(float idx, float columns) {' + 'float n = idx/columns;' + 'float row = float(int(n));' + 'float col = fract(n)*columns;' + 'float ts = 1.0/columns;' + 'return vec2(ts*col, ts*row);' + '}' + 'mat4 lookAt(vec3 eye, vec3 center, vec3 up) {' + 'vec3 zaxis = normalize(center - eye);' + 'vec3 xaxis = normalize(cross(up, zaxis));' + 'vec3 yaxis = cross(zaxis, xaxis);' + 'mat4 matrix;' +
            //Column Major
            'matrix[0][0] = xaxis.x;' + 'matrix[1][0] = yaxis.x;' + 'matrix[2][0] = zaxis.x;' + 'matrix[3][0] = 0.0;' + 'matrix[0][1] = xaxis.y;' + 'matrix[1][1] = yaxis.y;' + 'matrix[2][1] = zaxis.y;' + 'matrix[3][1] = 0.0;' + 'matrix[0][2] = xaxis.z;' + 'matrix[1][2] = yaxis.z;' + 'matrix[2][2] = zaxis.z;' + 'matrix[3][2] = 0.0;' + 'matrix[0][3] = -dot(xaxis, eye);' + 'matrix[1][3] = -dot(yaxis, eye);' + 'matrix[2][3] = -dot(zaxis, eye);' + 'matrix[3][3] = 1.0;' + 'return matrix;' + '}' + 'mat4 transpose(mat4 m) {' + 'return mat4(  m[0][0], m[1][0], m[2][0], m[3][0],' + 'm[0][1], m[1][1], m[2][1], m[3][1],' + 'm[0][2], m[1][2], m[2][2], m[3][2],' + 'm[0][3], m[1][3], m[2][3], m[3][3]);' + '}' + 'mat4 rotationMatrix(vec3 axis, float angle) {' + 'axis = normalize(axis);' + 'float s = sin(angle);' + 'float c = cos(angle);' + 'float oc = 1.0 - c;' + 'return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,' + 'oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,' + 'oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,' + '0.0,                                0.0,                                0.0,                                1.0);' + '}' + _graphUtil.GraphUtils.adjMatrix_Autolink_GLSLFunctionString(geometryLength) + Utils.degToRadGLSLFunctionString() + Utils.radToDegGLSLFunctionString() + Utils.cartesianToSphericalGLSLFunctionString() + Utils.sphericalToCartesianGLSLFunctionString() + Utils.getVectorGLSLFunctionString() + 'vec3 getVV(vec3 crB, float acum) {' + 'vec3 ob = cartesianToSpherical(crB);' + 'float angleLat = ob.y;' + 'float angleLng = ob.z;' + 'float desvLat = 0.0;' + // (vecNoise.x*180.0)-90.0
            'float desvLng = 10.0;' + // (vecNoise.x*180.0)-90.0
            //'angleLat += (degrees*desvLat);'+
            'angleLng += (acum*desvLng);' + 'return sphericalToCartesian(vec3(1.0, angleLat, angleLng));' + '}' + 'float getOddEven(float repeatId) {' + 'return (ceil(fract(repeatId/2.0)) == 0.0) ? 1.0*floor(repeatId/2.0) : -1.0*floor(repeatId/2.0);' + '}' + 'vec3 getFirstDispl(float nodeId, vec4 currentPosition, float repeatId) {' + 'float repeatDistribution = -0.1;' +
            // first check output edges of own node and return the node (textCoord for get posXYZW) with max available angle to the right
            'vec4 adjMatrix = idAdjMatrix_Autolink(nodeId, currentPosition.xyz);' + 'vec3 initialVec = normalize(posXYZW[adjMatrix.xy].xyz-currentPosition.xyz)*vec3(1.0, -1.0, 1.0);' + 'float totalAngleRelations = adjMatrix.z;' +
            // then first sum half of available angle received
            'initialVec = getVV(initialVec, (totalAngleRelations/2.0)*repeatDistribution);' +
            // and now left or right (oddEven)
            'return getVV(initialVec, getOddEven(repeatId)*totalAngleRelations*0.01);' + '}' + 'float checkLinkArrowVisibility(float currentTimestamp, float bornDate, float dieDate, float bornDateOpposite, float dieDateOpposite, float linkBornDate, float linkDieDate) {' + 'float visible =1.0;' + 'if(dieDate != 0.0) {' + 'if((currentTimestamp < bornDate || currentTimestamp > dieDate) || (currentTimestamp < bornDateOpposite || currentTimestamp > dieDateOpposite)) {' + 'visible = 0.0;' + '} else {' +
            // now check link
            'if(linkDieDate != 0.0) {' + 'if(currentTimestamp < linkBornDate || currentTimestamp > linkDieDate) {' + 'visible = 0.0;' + '}' + '}' + '}' + '} else {' +
            // now check link
            'if(linkDieDate != 0.0) {' + 'if(currentTimestamp < linkBornDate || currentTimestamp > linkDieDate) {' + 'visible = 0.0;' + '}' + '}' + '}' + 'return visible;' + '}',

            //██╗   ██╗███████╗██████╗ ████████╗███████╗██╗  ██╗    ███████╗ ██████╗ ██╗   ██╗██████╗  ██████╗███████╗
            //██║   ██║██╔════╝██╔══██╗╚══██╔══╝██╔════╝╚██╗██╔╝    ██╔════╝██╔═══██╗██║   ██║██╔══██╗██╔════╝██╔════╝
            //██║   ██║█████╗  ██████╔╝   ██║   █████╗   ╚███╔╝     ███████╗██║   ██║██║   ██║██████╔╝██║     █████╗
            //╚██╗ ██╔╝██╔══╝  ██╔══██╗   ██║   ██╔══╝   ██╔██╗     ╚════██║██║   ██║██║   ██║██╔══██╗██║     ██╔══╝
            // ╚████╔╝ ███████╗██║  ██║   ██║   ███████╗██╔╝ ██╗    ███████║╚██████╔╝╚██████╔╝██║  ██║╚██████╗███████╗
            //  ╚═══╝  ╚══════╝╚═╝  ╚═╝   ╚═╝   ╚══════╝╚═╝  ╚═╝    ╚══════╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═╝ ╚═════╝╚══════╝
            'float nodeId = data[].x;' + 'float nodeIdOpposite = data[].y;' + 'float currentLineVertex = data[].z;' + // this is isTarget for arrows
            'float repeatId = data[].w;' + 'vec2 xGeometryNode = get_global_id(nodeId, bufferNodesWidth, ' + geometryLength.toFixed(1) + ');' + // bufferWidth6, geometryLength
            'vec2 xGeometryNode_opposite = get_global_id(nodeIdOpposite, bufferNodesWidth, ' + geometryLength.toFixed(1) + ');' + 'vec2 xGeometryLinks = get_global_id(nodeId, bufferLinksWidth, 2.0);' + // bufferWidth, geometryLength
            'vec2 xGeometryLinks_opposite = get_global_id(nodeIdOpposite, bufferLinksWidth, 2.0);' + 'vec2 xGeometryArrows = get_global_id(nodeId, bufferArrowsWidth, 3.0);' + // bufferWidth, geometryLength
            'vec2 xGeometryArrows_opposite = get_global_id(nodeIdOpposite, bufferArrowsWidth, 3.0);' + 'vec2 xGeometryText = get_global_id(nodeId, bufferTextsWidth, 4.0*12.0);' + // bufferWidth, geometryLength
            'vec2 xGeometryText_opposite = get_global_id(nodeIdOpposite, bufferTextsWidth, 4.0*12.0);' + 'vec4 nodeVertexPosition = nodeVertexPos[];\n' + 'vec4 nodeVertexTex = nodeVertexTexture[];\n' + 'float linkBornDate = dataC[].x;' + 'float linkDieDate = dataC[].y;' + 'float bornDate = dataB[xGeometryNode].x;' + 'float dieDate = dataB[xGeometryNode].y;' + 'float foutput = dataB[xGeometryNode].z;' + 'float error = dataF[xGeometryNode].x;' + 'float bornDateOpposite = dataB[xGeometryNode_opposite].x;' + 'float dieDateOpposite = dataB[xGeometryNode_opposite].y;' + 'vec4 currentPosition = posXYZW[xGeometryNode];\n' + 'vec3 oppositePosition = posXYZW[xGeometryNode_opposite].xyz;\n' + 'vec4 nodeVertexColor = vec4(1.0, 1.0, 1.0, 1.0);\n' + 'vec4 nodeVertexColorNetError = vec4(1.0, 1.0, 1.0, 1.0);\n' + 'vec3 dir = oppositePosition-vec3(currentPosition.x, currentPosition.y, currentPosition.z);' + 'float dist = length(dir);' + 'float vertexCount = 1.0;' + 'float lineIncrements = dist/vertexCount;' + 'vec3 dirN = normalize(dir);' + 'vec3 cr = cross(dirN, vec3(0.0, 1.0, 0.0));' + 'float currentLineVertexSQRT = abs( currentLineVertex-(vertexCount/2.0) )/(vertexCount/2.0);' + 'currentLineVertexSQRT = sqrt(1.0-currentLineVertexSQRT);' + 'vVertexUV = vec2(-1.0, -1.0);' + 'vDist = max(0.3, 1.0-(distance(currentPosition.xyz, oppositePosition)*0.01));\n' + // dist/acum

            'mat4 nodepos = nodeWMatrix;' + 'if(isNode == 1.0) {' + 'vVisibility = 1.0;' + 'currentPosition += vec4(0.0, 0.1, 0.0, 1.0);' + 'mat4 mm = rotationMatrix(vec3(1.0,0.0,0.0), (3.1416/2.0)*3.0);' + 'nodepos = nodepos*mm;' + 'float nodeImgId = nodeImgId[];' + 'if(nodeImgId != -1.0) {' + 'vUseTex = 1.0;' + 'vVertexUV = get2Dfrom1D(nodeImgId, nodeImgColumns)+vec2(nodeVertexTexture.x/nodeImgColumns,nodeVertexTexture.y/nodeImgColumns);' + '}' + 'if(dieDate != 0.0 && (currentTimestamp < bornDate || currentTimestamp > dieDate)) ' + 'vVisibility = 0.0;' + 'if(enableNeuronalNetwork == 1.0) {' + 'nodeVertexColor = vec4(0.0, 0.0, 0.0, 1.0);' + 'if(foutput > 0.0) ' + 'nodeVertexColor = vec4(abs(foutput), abs(foutput), abs(foutput), 1.0);' + 'else if(foutput < 0.0) ' + 'nodeVertexColor = vec4(abs(foutput), 0.0, 0.0, 1.0);' + 'if(error > 0.0) ' + 'nodeVertexColorNetError = vec4(abs(error), 0.0, 0.0, 1.0);' + 'else if(error < 0.0) ' + 'nodeVertexColorNetError = vec4(0.0, abs(error), 0.0, 1.0);' + 'else ' + 'nodeVertexColorNetError = vec4(0.0,0.0,0.0, 0.0);' + '}' + 'vIsSelected = (idToDrag == data[].x) ? 1.0 : 0.0;' + 'vIsHover = (idToHover == data[].x) ? 1.0 : 0.0;' + '}' + 'if(isLink == 1.0) {' + 'if(xGeometryLinks != xGeometryLinks_opposite) {' +
            // displacing from center to first point
            'currentPosition += vec4(dirN*(lineIncrements*currentLineVertex), 1.0);' +

            // displacing from first point to cross direction (repeatId)
            'if(currentLineVertex != 0.0 && currentLineVertex != vertexCount) ' + 'currentPosition += vec4(cr*currentLineVertexSQRT*getOddEven(repeatId)*4.0, 1.0);' + '} else {' + // is Autolink
            'float currentLineVertexMM = abs( currentLineVertex-(vertexCount/2.0) );' + 'currentLineVertexMM = (vertexCount/2.0)-currentLineVertexMM;' +

            // displacing from center to first point
            'vec3 initialVec = getFirstDispl(nodeId, currentPosition, repeatId);' + 'currentPosition += vec4(initialVec*(5.0*currentLineVertexMM), 1.0);' +

            // displacing from first point to cross direction (repeatId)
            'if(currentLineVertex != 0.0 && currentLineVertex != vertexCount) {' + 'float sig = (currentLineVertex > (vertexCount/2.0)) ? 1.0 : -1.0;' + 'vec3 crB = cross(vec3(0.0, 1.0, 0.0), initialVec);' + 'float hhSCount = (vertexCount/2.0)/2.0;' + 'float currentLineVertexMMB = hhSCount-(abs(currentLineVertexMM-hhSCount));' + 'currentPosition += vec4((crB*sig)*currentLineVertexMMB*1.0, 1.0);' + '}' + '}' + 'vVisibility = checkLinkArrowVisibility(currentTimestamp, bornDate, dieDate, bornDateOpposite, dieDateOpposite, linkBornDate, linkDieDate);' + 'vIsSelected = (idToDrag == data[].x || idToDrag == data[].y) ? 1.0 : 0.0;' + 'vIsHover = (idToHover == data[].x || idToHover == data[].y) ? 1.0 : 0.0;' + 'if(enableNeuronalNetwork == 1.0) {' + 'nodeVertexColor = vec4(abs(foutput), abs(foutput), abs(foutput), 1.0);' + 'if(error > 0.0) ' + 'nodeVertexColorNetError = vec4(0.0, abs(error), 0.0, 1.0);' + 'else if(error < 0.0) ' + 'nodeVertexColorNetError = vec4(abs(error), 0.0, 0.0, 1.0);' + 'else ' + 'nodeVertexColorNetError = vec4(0.0,0.0,0.0, 0.0);' + '}' + '}' + 'if(isArrow == 1.0) {' + 'vec3 currentPositionTMP;' + 'if(xGeometryArrows != xGeometryArrows_opposite) {' +
            // displacing from center to first point
            'float currentLineVertexU = vertexCount-1.0;' + 'currentPositionTMP = oppositePosition+((dirN*-1.0)*(lineIncrements*currentLineVertexU));' +

            // displacing from first point to cross direction (repeatId)
            'currentPositionTMP -= cr*(currentLineVertexSQRT*getOddEven(repeatId)*4.0);' + '} else {' + // is Autolink
            'float currentLineVertexU = vertexCount-1.0;' + 'float currentLineVertexMM = abs( currentLineVertexU-(vertexCount/2.0) );' + 'currentLineVertexMM = (vertexCount/2.0)-currentLineVertexMM;' +

            // displacing from center to first point
            'vec3 initialVec = getFirstDispl(nodeId, currentPosition, repeatId);' + 'currentPositionTMP = oppositePosition+(initialVec*(5.0*currentLineVertexMM));' +

            // displacing from first point to cross direction (repeatId)
            'if(currentLineVertex != 0.0 && currentLineVertex != vertexCount) {' + 'float sig = (currentLineVertex > (vertexCount/2.0)) ? 1.0 : -1.0;' + 'vec3 crB = cross(vec3(0.0, 1.0, 0.0), initialVec);' + 'float hhSCount = (vertexCount/2.0)/2.0;' + 'float currentLineVertexMMB = hhSCount-(abs(currentLineVertexMM-hhSCount));' + 'currentPositionTMP += (crB*sig)*currentLineVertexMMB*1.0;' +
            //'currentPositionTMP -= vec4((crB*sig)*(currentLineVertexSQRT*(repeatId+1.0)*4.0), 1.0);'+
            '}' + '}' + 'mat4 pp = lookAt(currentPositionTMP, vec3(currentPosition.x, currentPosition.y, currentPosition.z), vec3(0.0, 1.0, 0.0));' + 'pp = transpose(pp);' + 'nodepos[0][0] = pp[0][0];' + 'nodepos[0][1] = pp[1][0];' + 'nodepos[0][2] = pp[2][0];' + 'nodepos[1][0] = pp[0][1];' + 'nodepos[1][1] = pp[1][1];' + 'nodepos[1][2] = pp[2][1];' + 'nodepos[2][0] = pp[0][2];' + 'nodepos[2][1] = pp[1][2];' + 'nodepos[2][2] = pp[2][2];' +

            // displace from center to node border
            'dir = currentPositionTMP-vec3(currentPosition.x, currentPosition.y, currentPosition.z);' + 'currentPosition += vec4(normalize(dir),1.0)*2.0;' + 'vVisibility = checkLinkArrowVisibility(currentTimestamp, bornDate, dieDate, bornDateOpposite, dieDateOpposite, linkBornDate, linkDieDate);' + 'vIsSelected = (idToDrag == data[].x || idToDrag == data[].y) ? 1.0 : 0.0;' + 'vIsHover = (idToHover == data[].x || idToHover == data[].y) ? 1.0 : 0.0;' + '}' + 'if(isNodeText == 1.0) {' + 'float letId = letterId[];\n' + 'mat4 mm = rotationMatrix(vec3(1.0,0.0,0.0), (3.1416/2.0)*3.0);' + 'nodepos = nodepos*mm;' + 'vVertexUV = get2Dfrom1D(letId, fontImgColumns)+vec2(nodeVertexTexture.x/fontImgColumns,nodeVertexTexture.y/fontImgColumns);' + 'nodeVertexPosition = vec4(nodeVertexPosition.x*0.1, nodeVertexPosition.y*0.1, nodeVertexPosition.z*0.1, 1.0);' + 'currentPosition.z += 2.5;' + 'vVisibility = 1.0;' + 'vIsSelected = (idToDrag == data[].x) ? 1.0 : 0.0;' + 'vIsHover = (idToHover == data[].x) ? 1.0 : 0.0;' + '}' + 'nodepos[3][0] = currentPosition.x;' + 'nodepos[3][1] = currentPosition.y;' + 'nodepos[3][2] = currentPosition.z;' + 'mat4 nodeposG = nodeWMatrix;' + 'vWNMatrix = nodeposG * nodeVertexNormal[];\n' + 'vUseCrosshair = 0.0;' + 'vIstarget = (currentLineVertex == 1.0) ? 1.0 : 0.0;' + customCode + 'vVertexColor = nodeVertexColor;' + 'vVertexColorNetError = nodeVertexColorNetError;' + 'vUV = nodeVertexTexture;' + 'vNodeId = nodeId;\n' + 'vNodeIdOpposite = nodeIdOpposite;\n' + 'gl_Position = PMatrix * cameraWMatrix * nodepos * nodeVertexPosition;\n',

            //███████╗██████╗  █████╗  ██████╗ ███╗   ███╗███████╗███╗   ██╗████████╗    ██╗  ██╗███████╗ █████╗ ██████╗
            //██╔════╝██╔══██╗██╔══██╗██╔════╝ ████╗ ████║██╔════╝████╗  ██║╚══██╔══╝    ██║  ██║██╔════╝██╔══██╗██╔══██╗
            //█████╗  ██████╔╝███████║██║  ███╗██╔████╔██║█████╗  ██╔██╗ ██║   ██║       ███████║█████╗  ███████║██║  ██║
            //██╔══╝  ██╔══██╗██╔══██║██║   ██║██║╚██╔╝██║██╔══╝  ██║╚██╗██║   ██║       ██╔══██║██╔══╝  ██╔══██║██║  ██║
            //██║     ██║  ██║██║  ██║╚██████╔╝██║ ╚═╝ ██║███████╗██║ ╚████║   ██║       ██║  ██║███████╗██║  ██║██████╔╝
            //╚═╝     ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚═╝     ╚═╝╚══════╝╚═╝  ╚═══╝   ╚═╝       ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═════╝
            'varying vec4 vVertexColor;\n' + 'varying vec4 vVertexColorNetError;\n' + 'varying vec4 vUV;\n' + 'varying vec2 vVertexUV;\n' + 'varying float vUseTex;\n' + 'varying vec4 vWNMatrix;\n' + 'varying float vNodeId;\n' + 'varying float vNodeIdOpposite;\n' + 'varying float vDist;\n' + 'varying float vVisibility;\n' + 'varying float vIsSelected;\n' + 'varying float vIsHover;\n' + 'varying float vUseCrosshair;\n' + 'varying float vIstarget;\n',

            //███████╗██████╗  █████╗  ██████╗ ███╗   ███╗███████╗███╗   ██╗████████╗    ███████╗ ██████╗ ██╗   ██╗██████╗  ██████╗███████╗
            //██╔════╝██╔══██╗██╔══██╗██╔════╝ ████╗ ████║██╔════╝████╗  ██║╚══██╔══╝    ██╔════╝██╔═══██╗██║   ██║██╔══██╗██╔════╝██╔════╝
            //█████╗  ██████╔╝███████║██║  ███╗██╔████╔██║█████╗  ██╔██╗ ██║   ██║       ███████╗██║   ██║██║   ██║██████╔╝██║     █████╗
            //██╔══╝  ██╔══██╗██╔══██║██║   ██║██║╚██╔╝██║██╔══╝  ██║╚██╗██║   ██║       ╚════██║██║   ██║██║   ██║██╔══██╗██║     ██╔══╝
            //██║     ██║  ██║██║  ██║╚██████╔╝██║ ╚═╝ ██║███████╗██║ ╚████║   ██║       ███████║╚██████╔╝╚██████╔╝██║  ██║╚██████╗███████╗
            //╚═╝     ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚═╝     ╚═╝╚══════╝╚═╝  ╚═══╝   ╚═╝       ╚══════╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═╝ ╚═════╝╚══════╝
            'vec4 color = vVertexColor;\n' + 'vec4 colorB = vVertexColorNetError;\n' + 'vec4 colorOrange = vec4(255.0/255.0, 131.0/255.0, 0.0/255.0, 1.0);' + 'vec4 colorOrangeDark = vec4(255.0/255.0, 80.0/255.0, 0.0/255.0, 1.0);' + 'vec4 colorPurple = vec4(132.0/255.0, 0.0/255.0, 255.0/255.0, 1.0);' + 'vec4 fcolor = vec4(0.0, 0.0, 0.0, 1.0);' + 'if(isNode == 1.0) {' + 'if(vUseTex == 1.0) {' + 'vec4 tex;' + 'if(vUseCrosshair == 1.0) {' + 'tex = nodesImgCrosshair[vVertexUV.xy];' + '} else if(vIsSelected == 1.0) {' + 'color = colorOrangeDark;' + 'tex = nodesImgCrosshair[vVertexUV.xy];' + '} else if(vIsHover == 1.0) {' + 'color = colorPurple;' + 'tex = nodesImg[vVertexUV.xy];' + '} else {' + 'tex = nodesImg[vVertexUV.xy];' + '}' + 'color = ' + _graphUtil.GraphUtils.nodesDrawMode(geometryLength) + ';\n' + '}' + 'if(color.a < 0.1) discard;' + 'fcolor = color;\n' + 'if(enableNeuronalNetwork == 1.0) {' +
            // half up: ouput; half down: error
            'if(vUV.y > (0.7)) ' + 'fcolor = colorB;\n' + // 0.75-(colorB.w*1.0)   'fcolor = (vUV.y < (0.5)) ? color : ((colorB.w == 0.0)?color:colorB);\n'+
            '}' + '} else if(isLink == 1.0) {' + 'if(vIsSelected == 1.0) ' + 'color = colorOrange;' + 'else if(vIsHover == 1.0) ' + 'color = colorPurple;' + 'if(enableNeuronalNetwork == 1.0) {' +
            // weight color
            'vec2 xAdjMatCurrent = get_global_id(vec2(vNodeIdOpposite, vNodeId), widthAdjMatrix);' + 'vec4 pixAdjMatACurrent = adjacencyMatrix[xAdjMatCurrent];\n' + 'vec4 pixAdjMatCCurrent = adjacencyMatrixC[xAdjMatCurrent];\n' +

            // x weight
            'if(pixAdjMatACurrent.z > 0.0) ' + 'fcolor = vec4(0.0, pixAdjMatACurrent.z, 0.0, 1.0);\n' + 'else ' + 'fcolor = vec4(abs(pixAdjMatACurrent.z), 0.0, 0.0, 1.0);\n' +

            /*'if(pixAdjMatCCurrent.x > 0.0) '+
                'fcolor *= vec4(0.0, abs(pixAdjMatCCurrent.x), 0.0, 1.0);'+
            'else if(pixAdjMatCCurrent.x < 0.0) '+
                'fcolor *= vec4(abs(pixAdjMatCCurrent.x), 0.0, 0.0, 1.0);'+
            'else '+
                'fcolor *= vec4(0.0,0.0,0.0, 0.0);'+*/

            // x output
            'if(multiplyOutput == 1.0) ' + 'fcolor *= vec4(color.xyz, 1.0);\n' + '} else ' + 'fcolor = vec4(color.xyz, 1.0);\n' + '} else if(isArrow == 1.0) {' + 'if(vIstarget == 1.0) {' + 'if(vIsSelected == 1.0) {' + 'color = vec4(colorOrange.rgb*vDist, 1.0);\n' + '} else if(vIsHover == 1.0) {' + 'color = vec4(colorPurple.rgb*vDist, 1.0);\n' + '}' + '} else {' + 'color = vec4(1.0, 0.0, 0.0, 0.0);' + '}' + 'fcolor = color;\n' + '} else if(isNodeText == 1.0) {' + 'fcolor = fontsImg[vVertexUV.xy];\n' + '}' + 'if(vVisibility == 0.0) ' + 'discard;' + 'return [fcolor];'];
        }
    }]);

    return VFP_NODE;
}();

global.VFP_NODE = VFP_NODE;
module.exports.VFP_NODE = VFP_NODE;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./graphUtil":3,"scejs":1}],3:[function(require,module,exports){
(function (global){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GraphUtils = exports.GraphUtils = function () {
    function GraphUtils() {
        _classCallCheck(this, GraphUtils);
    }

    _createClass(GraphUtils, null, [{
        key: "nodesDrawMode",
        value: function nodesDrawMode(geometryLength) {
            if (geometryLength === 1) return "vec4(color.rgb, 1.0)";else return "vec4(tex.rgb*color.rgb, tex.a)";
        }
    }, {
        key: "adjMatrix_ForceLayout_GLSLFunctionString",
        value: function adjMatrix_ForceLayout_GLSLFunctionString(geometryLength, efferentStart, efferentNodesCount) {
            return '' + "vec3 sphericalColl(vec3 currentDir, vec3 currentDirB, vec3 dirToBN) {\n            vec3 currentDirN = normalize(currentDir);\n            float pPoint = abs(dot(currentDirN, dirToBN));\n            vec3 reflectV = reflect(currentDirN*-1.0, dirToBN);\n\n            vec3 currentDirBN = normalize(currentDirB);\n            float pPointB = abs(dot(currentDirBN, dirToBN));\n\n            vec3 repulsionForce = (reflectV*-1.0)* (((1.0-pPoint)*length(currentDir))+((pPointB)*length(currentDirB)));\n\n            return (repulsionForce.x > 0.0 && repulsionForce.y > 0.0 && repulsionForce.z > 0.0) ? repulsionForce : dirToBN*-0.1;\n        }\n\n        struct CalculationResponse {\n            vec3 atraction;\n            float acumAtraction;\n            vec3 repulsion;\n            float collisionExists;\n            float netChildInputSumA;\n            float netParentErrorWeightA;\n            float netChildInputSumB;\n            float netParentErrorWeightB;\n            float netChildInputSumC;\n            float netParentErrorWeightC;\n            float netChildInputSumD;\n            float netParentErrorWeightD;\n            float netChildInputSumE;\n            float netParentErrorWeightE;\n            float netChildInputSumF;\n            float netParentErrorWeightF;\n            float netChildInputSumG;\n            float netParentErrorWeightG;\n        };" +

            // pixAdjMatA (bornDate, dieDate, weight (parent:-2;child:w), isParent (1.0:parent;0.0:child))
            // pixAdjMatA (linkMultiplier, activationFunction)
            "CalculationResponse calculate(float nodeId,\n                                        vec4 pixAdjMatACurrent, vec4 pixAdjMatAOpposite,\n                                        vec4 pixAdjMatBCurrent, vec4 pixAdjMatBOpposite,\n                                        vec2 xGeomCurrent, vec2 xGeomOpposite,\n                                        vec3 currentPos, vec3 currentDir,\n                                        vec3 atraction, float acumAtraction, vec3 repulsion,\n                                        float enableNeuronalNetwork,\n                                        float netChildInputSumA, float netParentErrorWeightA,\n                                        float netChildInputSumB, float netParentErrorWeightB,\n                                        float netChildInputSumC, float netParentErrorWeightC,\n                                        float netChildInputSumD, float netParentErrorWeightD,\n                                        float netChildInputSumE, float netParentErrorWeightE,\n                                        float netChildInputSumF, float netParentErrorWeightF,\n                                        float netChildInputSumG, float netParentErrorWeightG) {" +
            // pixAdjMatACurrent
            "float currentBornDate = pixAdjMatACurrent.x;\n            float currentDieDate = pixAdjMatACurrent.y;\n            float currentWeight = pixAdjMatACurrent.z;\n            float currentIsParent = pixAdjMatACurrent.w;" +

            // pixAdjMatAOpposite
            "float oppositeBornDate = pixAdjMatAOpposite.x;\n            float oppositeDieDate = pixAdjMatAOpposite.y;\n            float oppositeWeight = pixAdjMatAOpposite.z;\n            float oppositeIsParent = pixAdjMatAOpposite.w;" +

            // pixAdjMatBCurrent
            "float currentLinkMultiplier = pixAdjMatBCurrent.x;\n            float currentActivationFn = pixAdjMatBCurrent.y;" +

            // pixAdjMatBOpposite
            "float oppositeLinkMultiplier = pixAdjMatBOpposite.x;\n            float oppositeActivationFn = pixAdjMatBOpposite.y;" +

            // dataB Current
            //'float currentBornDate = dataB[xGeomCurrent].x;'+
            //'float currentDieDate = dataB[xGeomCurrent].y;'+
            //'float currentNetOutput = dataB[xGeomCurrent].z;'+
            //'float currentNetError = dataB[xGeomCurrent].w;'+

            // dataB Opposite
            //'float oppositeBornDate = dataB[xGeomOpposite].x;'+
            //'float oppositeDieDate = dataB[xGeomOpposite].y;'+
            "float oppositeNetOutputA = dataB[xGeomOpposite].z;\n            float oppositeNetErrorA = dataB[xGeomOpposite].w;\n\n            float oppositeNetOutputB = dataF[xGeomOpposite].x;\n            float oppositeNetErrorB = dataF[xGeomOpposite].y;\n        \n            float oppositeNetOutputC = dataF[xGeomOpposite].z;\n            float oppositeNetErrorC = dataF[xGeomOpposite].w;\n        \n            float oppositeNetOutputD = dataG[xGeomOpposite].x;\n            float oppositeNetErrorD = dataG[xGeomOpposite].y;\n        \n            float oppositeNetOutputE = dataG[xGeomOpposite].z;\n            float oppositeNetErrorE = dataG[xGeomOpposite].w;\n        \n            float oppositeNetOutputF = dataH[xGeomOpposite].x;\n            float oppositeNetErrorF = dataH[xGeomOpposite].y;\n        \n            float oppositeNetOutputG = dataH[xGeomOpposite].z;\n            float oppositeNetErrorG = dataH[xGeomOpposite].w;" +

            // pos & dir Current
            //'vec3 currentPos = posXYZW[xGeomCurrent].xyz;\n'+
            //'vec3 currentDir = dir[xGeomCurrent].xyz;\n'+

            // pos & dir Opposite
            "vec3 oppositePos = posXYZW[xGeomOpposite].xyz;\n            vec3 oppositeDir = dir[xGeomOpposite].xyz;" +

            // dir / dist to opposite
            'vec3 dirToOpposite = (oppositePos-currentPos);\n' + 'vec3 dirToOppositeN = normalize(dirToOpposite);\n' + 'float dist = distance(oppositePos, currentPos);\n' + // near=0.0 ; far=1.0
            'float distN = max(0.0,dist)/100000.0;' + 'float p = 1.0;' + 'if(currentDieDate != 0.0 && (currentTimestamp < currentBornDate || currentTimestamp > currentDieDate)) ' + 'p = 0.0;' + 'if(oppositeDieDate != 0.0 && (currentTimestamp < oppositeBornDate || currentTimestamp > oppositeDieDate)) ' + 'p = 0.0;' + 'if(p == 1.0) {' + 'float m1 = (enableNeuronalNetwork == 1.0) ? 0.0 : 400000.0;' + 'float m2 = (enableNeuronalNetwork == 1.0) ? 0.0 : 48.0;' + 'if(currentIsParent == 1.0) {' +
            //'if(enableNeuronalNetwork == 1.0) '+
            'netChildInputSumA += oppositeNetOutputA*oppositeWeight;' + 'netChildInputSumB += oppositeNetOutputB*oppositeWeight;' + 'netChildInputSumC += oppositeNetOutputC*oppositeWeight;' + 'netChildInputSumD += oppositeNetOutputD*oppositeWeight;' + 'netChildInputSumE += oppositeNetOutputE*oppositeWeight;' + 'netChildInputSumF += oppositeNetOutputF*oppositeWeight;' + 'netChildInputSumG += oppositeNetOutputG*oppositeWeight;' +
            //'else {'+
            'atraction += dirToOppositeN*max(1.0, distN*abs(oppositeWeight)*(m1/2.0));\n' + 'repulsion += -dirToOppositeN*max(1.0, (1.0-distN)*abs(oppositeWeight)*(m2/2.0));\n' + 'acumAtraction += 1.0;\n' +
            //'}'+
            '} else if(currentIsParent == 0.5) {' +
            //'if(enableNeuronalNetwork == 1.0) '+
            'netParentErrorWeightA += oppositeNetErrorA*currentWeight;' + 'netParentErrorWeightB += oppositeNetErrorB*currentWeight;' + 'netParentErrorWeightC += oppositeNetErrorC*currentWeight;' + 'netParentErrorWeightD += oppositeNetErrorD*currentWeight;' + 'netParentErrorWeightE += oppositeNetErrorE*currentWeight;' + 'netParentErrorWeightF += oppositeNetErrorF*currentWeight;' + 'netParentErrorWeightG += oppositeNetErrorG*currentWeight;' +
            //'else {'+
            'atraction += dirToOppositeN*max(1.0, distN*abs(currentWeight)*m1);\n' + 'repulsion += -dirToOppositeN*max(1.0, (1.0-distN)*abs(currentWeight)*m2);\n' + 'acumAtraction += 1.0;\n' +
            //'}'+
            '}' +

            //'if(enableNeuronalNetwork == 0.0) {'+
            'repulsion += -dirToOppositeN*max(1.0, (1.0-distN)*abs(currentWeight)*(m2/8.0));\n' + 'acumAtraction += 1.0;\n' +
            //'}'+
            '}' + ("float collisionExists = 0.0;\n            if(enableForceLayoutCollision == 1.0 && dist < 4.0) {\n                collisionExists = 1.0;\n                atraction = sphericalColl(currentDir, oppositeDir, dirToOppositeN);\n            }\n\n            return CalculationResponse(atraction, acumAtraction, repulsion, collisionExists,\n                                        netChildInputSumA, netParentErrorWeightA,\n                                        netChildInputSumB, netParentErrorWeightB,\n                                        netChildInputSumC, netParentErrorWeightC,\n                                        netChildInputSumD, netParentErrorWeightD,\n                                        netChildInputSumE, netParentErrorWeightE,\n                                        netChildInputSumF, netParentErrorWeightF,\n                                        netChildInputSumG, netParentErrorWeightG);\n        }\n        struct idAdjMatrixResponse {\n            vec3 force;\n            float collisionExists;\n            float netFOutputA;\n            float netErrorWeightA;\n            float netFOutputB;\n            float netErrorWeightB;\n            float netFOutputC;\n            float netErrorWeightC;\n            float netFOutputD;\n            float netErrorWeightD;\n            float netFOutputE;\n            float netErrorWeightE;\n            float netFOutputF;\n            float netErrorWeightF;\n            float netFOutputG;\n            float netErrorWeightG;\n        };\n        float tanh(float val) {\n            float tmp = exp(val);\n            float tanH = (tmp - 1.0 / tmp) / (tmp + 1.0 / tmp);\n            return tanH;\n        }\n        float sigm(float val) {\n            return (1.0 / (1.0 + exp(-val)));\n        }\n        idAdjMatrixResponse idAdjMatrix_ForceLayout(float nodeId, vec3 currentPos, vec3 currentDir, float numOfConnections, float currentTimestamp, float bornDate, float dieDate, float enableNeuronalNetwork) {\n            vec3 atraction = vec3(0.0, 0.0, 0.0);\n            float acumAtraction = 1.0;\n            vec3 repulsion = vec3(0.0, 0.0, 0.0);\n\n            float collisionExists = 0.0;\n            vec3 force = vec3(0.0, 0.0, 0.0);\n\n\n            float netChildInputSumA = 0.0;\n            float foutputA = 0.0;\n            float netParentErrorWeightA = 0.0;\n            \n            float netChildInputSumB = 0.0;\n            float foutputB = 0.0;\n            float netParentErrorWeightB = 0.0;\n            \n            float netChildInputSumC = 0.0;\n            float foutputC = 0.0;\n            float netParentErrorWeightC = 0.0;\n            \n            float netChildInputSumD = 0.0;\n            float foutputD = 0.0;\n            float netParentErrorWeightD = 0.0;\n            \n            float netChildInputSumE = 0.0;\n            float foutputE = 0.0;\n            float netParentErrorWeightE = 0.0;\n            \n            float netChildInputSumF = 0.0;\n            float foutputF = 0.0;\n            float netParentErrorWeightF = 0.0;\n            \n            float netChildInputSumG = 0.0;\n            float foutputG = 0.0;\n            float netParentErrorWeightG = 0.0;\n            \n\n            if(nodeId < nodesCount) {\n                float currentActivationFn = 0.0;\n                vec2 xGeomCurrent = get_global_id(nodeId, uBufferWidth, " + geometryLength.toFixed(1) + ");\n                for(int n=0; n < 4096; n++) {\n                    if(float(n) >= nodesCount) {break;}\n                    if(float(n) != nodeId) {\n                        vec2 xGeomOpposite = get_global_id(float(n), uBufferWidth, " + geometryLength.toFixed(1) + ");\n\n\n                        vec2 xAdjMatCurrent = get_global_id(vec2(float(n), nodeId), widthAdjMatrix);\n                        vec2 xAdjMatOpposite = get_global_id(vec2(nodeId, float(n)), widthAdjMatrix);\n\n                        vec4 pixAdjMatACurrent = adjacencyMatrix[xAdjMatCurrent];\n                        vec4 pixAdjMatAOpposite = adjacencyMatrix[xAdjMatOpposite];\n\n                        vec4 pixAdjMatBCurrent = adjacencyMatrixB[xAdjMatCurrent];\n                        vec4 pixAdjMatBOpposite = adjacencyMatrixB[xAdjMatOpposite];\n\n\n                        CalculationResponse calcResponse = calculate(nodeId,\n                                                                    pixAdjMatACurrent, pixAdjMatAOpposite,\n                                                                    pixAdjMatBCurrent, pixAdjMatBOpposite,\n                                                                    xGeomCurrent, xGeomOpposite,\n                                                                    currentPos, currentDir,\n                                                                    atraction, acumAtraction, repulsion,\n                                                                    enableNeuronalNetwork,\n                                                                    netChildInputSumA, netParentErrorWeightA,\n                                                                    netChildInputSumB, netParentErrorWeightB,\n                                                                    netChildInputSumC, netParentErrorWeightC,\n                                                                    netChildInputSumD, netParentErrorWeightD,\n                                                                    netChildInputSumE, netParentErrorWeightE,\n                                                                    netChildInputSumF, netParentErrorWeightF,\n                                                                    netChildInputSumG, netParentErrorWeightG);\n                        atraction = calcResponse.atraction;\n                        acumAtraction = calcResponse.acumAtraction;\n                        repulsion = calcResponse.repulsion;\n                        \n                        \n                        netChildInputSumA = calcResponse.netChildInputSumA;\n                        netParentErrorWeightA = calcResponse.netParentErrorWeightA;\n                        \n                        netChildInputSumB = calcResponse.netChildInputSumB;\n                        netParentErrorWeightB = calcResponse.netParentErrorWeightB;\n                        \n                        netChildInputSumC = calcResponse.netChildInputSumC;\n                        netParentErrorWeightC = calcResponse.netParentErrorWeightC;\n                        \n                        netChildInputSumD = calcResponse.netChildInputSumD;\n                        netParentErrorWeightD = calcResponse.netParentErrorWeightD;\n                        \n                        netChildInputSumE = calcResponse.netChildInputSumE;\n                        netParentErrorWeightE = calcResponse.netParentErrorWeightE;\n                        \n                        netChildInputSumF = calcResponse.netChildInputSumF;\n                        netParentErrorWeightF = calcResponse.netParentErrorWeightF;\n                        \n                        netChildInputSumG = calcResponse.netChildInputSumG;\n                        netParentErrorWeightG = calcResponse.netParentErrorWeightG;\n\n\n                        if(calcResponse.collisionExists == 1.0) {\n                            collisionExists = 1.0;\n                            force = calcResponse.atraction;\n                            break;\n                        }\n\n                        if(dieDate != 0.0) {\n                            if(currentTimestamp < bornDate || currentTimestamp > dieDate) {\n                                force = vec3(0.0, 0.0, 0.0);\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if(collisionExists == 0.0) {\n                    force += (atraction/acumAtraction)*1.0;\n                    force += (repulsion/acumAtraction)*1.0;\n                }\n\n                if(enableNeuronalNetwork == 1.0) {\n                    " + GraphUtils.efferentNodesStr(efferentStart, efferentNodesCount) + "\n                }\n            }\n\n            return idAdjMatrixResponse(vec3(force), collisionExists,\n                                        foutputA, netParentErrorWeightA,\n                                        foutputB, netParentErrorWeightB,\n                                        foutputC, netParentErrorWeightC,\n                                        foutputD, netParentErrorWeightD,\n                                        foutputE, netParentErrorWeightE,\n                                        foutputF, netParentErrorWeightF,\n                                        foutputG, netParentErrorWeightG);\n        }");
        }
    }, {
        key: "efferentNodesStr",
        value: function efferentNodesStr(efferentStart, efferentNodesCount) {
            var str = "\n            if(nodeId < afferentNodesCount) {\n                for(float n=0.0; n < 1024.0; n+=1.0) {\n                    if(n >= afferentNodesCount) {\n                        break;\n                    }\n                    if(nodeId == n) {\n                        foutputA = afferentNodesA[int(n)];\n                        foutputB = afferentNodesB[int(n)];\n                        foutputC = afferentNodesC[int(n)];\n                        foutputD = afferentNodesD[int(n)];\n                        foutputE = afferentNodesE[int(n)];\n                        foutputF = afferentNodesF[int(n)];\n                        foutputG = afferentNodesG[int(n)];\n                        break;\n                    }\n                }\n            } else {\n                foutputA = max(0.0, netChildInputSumA); " + "\n                foutputB = max(0.0, netChildInputSumB);\n                foutputC = max(0.0, netChildInputSumC);\n                foutputD = max(0.0, netChildInputSumD);\n                foutputE = max(0.0, netChildInputSumE);\n                foutputF = max(0.0, netChildInputSumF);\n                foutputG = max(0.0, netChildInputSumG);\n            }";

            str += "\n        if(nodeId == " + efferentStart.toFixed(1) + (") {\n            netParentErrorWeightA = (efferentNodesA[0] != 0.0) ? netChildInputSumA-efferentNodesA[0] : 0.0;\n            " + "\n            netParentErrorWeightB = (efferentNodesB[0] != 0.0) ? netChildInputSumB-efferentNodesB[0] : 0.0;\n            " + "\n            netParentErrorWeightC = (efferentNodesC[0] != 0.0) ? netChildInputSumC-efferentNodesC[0] : 0.0;\n            " + "\n            netParentErrorWeightD = (efferentNodesD[0] != 0.0) ? netChildInputSumD-efferentNodesD[0] : 0.0;\n            " + "\n            netParentErrorWeightE = (efferentNodesE[0] != 0.0) ? netChildInputSumE-efferentNodesE[0] : 0.0;\n            " + "\n            netParentErrorWeightF = (efferentNodesF[0] != 0.0) ? netChildInputSumF-efferentNodesF[0] : 0.0;\n            " + "\n            netParentErrorWeightG = (efferentNodesG[0] != 0.0) ? netChildInputSumG-efferentNodesG[0] : 0.0;\n            " + "\n        }");
            for (var n = efferentStart + 1; n < efferentStart + efferentNodesCount; n++) {
                str += "\n            else if(nodeId == " + n.toFixed(1) + ") {\n                netParentErrorWeightA = (efferentNodesA[" + Math.round(n - efferentStart) + "] != 0.0) ? netChildInputSumA-efferentNodesA[" + Math.round(n - efferentStart) + ("] : 0.0;\n                " + "\n                netParentErrorWeightB = (efferentNodesB[") + Math.round(n - efferentStart) + "] != 0.0) ? netChildInputSumB-efferentNodesB[" + Math.round(n - efferentStart) + ("] : 0.0;\n                " + "\n                netParentErrorWeightC = (efferentNodesC[") + Math.round(n - efferentStart) + "] != 0.0) ? netChildInputSumC-efferentNodesC[" + Math.round(n - efferentStart) + ("] : 0.0;\n                " + "\n                netParentErrorWeightD = (efferentNodesD[") + Math.round(n - efferentStart) + "] != 0.0) ? netChildInputSumD-efferentNodesD[" + Math.round(n - efferentStart) + ("] : 0.0;\n                " + "\n                netParentErrorWeightE = (efferentNodesE[") + Math.round(n - efferentStart) + "] != 0.0) ? netChildInputSumE-efferentNodesE[" + Math.round(n - efferentStart) + ("] : 0.0;\n                " + "\n                netParentErrorWeightF = (efferentNodesF[") + Math.round(n - efferentStart) + "] != 0.0) ? netChildInputSumF-efferentNodesF[" + Math.round(n - efferentStart) + ("] : 0.0;\n                " + "\n                netParentErrorWeightG = (efferentNodesG[") + Math.round(n - efferentStart) + "] != 0.0) ? netChildInputSumG-efferentNodesG[" + Math.round(n - efferentStart) + ("] : 0.0;\n                " + "\n            }");
            }str += "\n        else {\n            if(foutputA <= 0.0) {\n                netParentErrorWeightA = 0.0;\n            }\n            if(foutputB <= 0.0) {\n                netParentErrorWeightB = 0.0;\n            }\n            if(foutputC <= 0.0) {\n                netParentErrorWeightC = 0.0;\n            }\n            if(foutputD <= 0.0) {\n                netParentErrorWeightD = 0.0;\n            }\n            if(foutputE <= 0.0) {\n                netParentErrorWeightE = 0.0;\n            }\n            if(foutputF <= 0.0) {\n                netParentErrorWeightF = 0.0;\n            }\n            if(foutputG <= 0.0) {\n                netParentErrorWeightG = 0.0;\n            }\n        }";

            return str;
        }
    }, {
        key: "adjMatrix_Autolink_GLSLFunctionString",
        value: function adjMatrix_Autolink_GLSLFunctionString(geometryLength) {
            return '' + 'float GetAngle(vec3 A, vec3 B) {' + // from -180.0 to 180.0
            'vec3 cr = cross(A, B);' + 'float d = dot(A, B);' + 'if(cr.y < 0.0) {' + 'if(d > 0.0) {' + 'd =        (1.0-d)*90.0;' + '} else {' + 'd = 90.0+  (abs(d)*90.0);' + '}' + '} else {' + 'if(d > 0.0) {' + 'd = 270.0+ (d*90.0);' + '} else {' + 'd = 180.0+ ((1.0-abs(d))*90.0);' + '}' + '}' + 'return d;' + '}' + 'vec4 idAdjMatrix_Autolink(float nodeId, vec3 currentPos) {\n' +
            // INIT VARS
            'vec2 totalIDrelation = vec2(0.0, 0.0);' + 'float totalAngleRelations = 0.0;' +
            // END INIT VARS

            'if(nodeId < nodesCount) {\n' + 'for(int n=0; n < 4096; n++) {\n' + 'if(float(n) >= nodesCount) break;\n' + 'if(float(n) != nodeId) {' + 'vec2 xAdjMatCurrent = get_global_id(vec2(float(n), nodeId), widthAdjMatrix);' + 'vec4 pixAdjMatACurrent = adjacencyMatrix[xAdjMatCurrent];\n' +

            // RELATION FOUND
            'if(pixAdjMatACurrent.x > 0.0) {' + 'vec2 xGeomOpposite = get_global_id(float(n), uBufferWidth, ' + geometryLength.toFixed(1) + ');\n' + 'vec3 currentPosB = posXYZW[xGeomOpposite].xyz;\n' + 'vec3 dirToBN = normalize(currentPosB-currentPos);\n' + 'vec2 IDrelation = vec2(0.0, 0.0);' + 'float angleRelations = 360.0;' + 'if(nodeId < nodesCount) {\n' + 'for(int nB=0; nB < 4096; nB++) {\n' + 'if(float(nB) >= nodesCount) break;\n' + 'if(float(nB) != float(n) && float(nB) != nodeId) {' + 'vec2 xAdjMatCurrentB = get_global_id(vec2(float(nB), nodeId), widthAdjMatrix);' + 'vec4 pixAdjMatACurrent_B = adjacencyMatrix[xAdjMatCurrentB];\n' + 'if(pixAdjMatACurrent_B.x > 0.0) {' + 'vec2 xGeom_oppoB = get_global_id(float(nB), uBufferWidth, ' + geometryLength.toFixed(1) + ');\n' + 'vec3 currentPosBB = posXYZW[xGeom_oppoB].xyz;\n' + 'vec3 dirToBBN = normalize(currentPosBB-currentPos);\n' + 'float angle = GetAngle(dirToBN,dirToBBN);' + 'if(angle > 0.0 && angle < angleRelations) {' + 'IDrelation = xGeom_oppoB;' + 'angleRelations = angle;' + '}' + '}' + '}' + '}' + '}' + 'if(angleRelations < 360.0 && angleRelations > totalAngleRelations) {' + 'totalIDrelation = IDrelation;' + 'totalAngleRelations = angleRelations;' + '}' + '}' +
            // END RELATION FOUND

            '}' + '}' +
            // SUMMATION
            // END SUMMATION

            '}' + 'return vec4(totalIDrelation, totalAngleRelations, 0.0);' + '}';
        }
    }]);

    return GraphUtils;
}();

global.GraphUtils = GraphUtils;
module.exports.GraphUtils = GraphUtils;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvc2NlanMvZGlzdC9zY2Vqcy9TQ0VKUy5taW4uanMiLCJzcmMvZ2JyYWluL1ZGUF9OT0RFLmNsYXNzLmpzIiwic3JjL2dicmFpbi9ncmFwaFV0aWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUE7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDcElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfXJldHVybiBlfSkoKSIsIiFmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIG8ocyxhKXtpZighbltzXSl7aWYoIXRbc10pe3ZhciBsPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJmwpcmV0dXJuIGwocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3MrXCInXCIpO3Rocm93IHUuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIix1fXZhciBjPW5bc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChjLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtzXVsxXVtlXTtyZXR1cm4gbyhufHxlKX0sYyxjLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bc10uZXhwb3J0c31mb3IodmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxzPTA7czxyLmxlbmd0aDtzKyspbyhyW3NdKTtyZXR1cm4gb31yZXR1cm4gZX0oKSh7MTpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbih0KXshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KG4scixvKXtmdW5jdGlvbiBpKGEsbCl7aWYoIXJbYV0pe2lmKCFuW2FdKXt2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlO2lmKCFsJiZ1KXJldHVybiB1KGEsITApO2lmKHMpcmV0dXJuIHMoYSwhMCk7dmFyIGM9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIithK1wiJ1wiKTt0aHJvdyBjLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsY312YXIgaD1yW2FdPXtleHBvcnRzOnt9fTtuW2FdWzBdLmNhbGwoaC5leHBvcnRzLGZ1bmN0aW9uKGUpe3JldHVybiBpKG5bYV1bMV1bZV18fGUpfSxoLGguZXhwb3J0cyx0LG4scixvKX1yZXR1cm4gclthXS5leHBvcnRzfWZvcih2YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLGE9MDthPG8ubGVuZ3RoO2ErKylpKG9bYV0pO3JldHVybiBpfXJldHVybiB0fSgpKHsxOltmdW5jdGlvbihlLG4scil7KGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuV2ViQ0xHTD12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoXCIuL1dlYkNMR0xCdWZmZXIuY2xhc3NcIiksYT1lKFwiLi9XZWJDTEdMS2VybmVsLmNsYXNzXCIpLGw9ZShcIi4vV2ViQ0xHTFZlcnRleEZyYWdtZW50UHJvZ3JhbS5jbGFzc1wiKSx1PWUoXCIuL1dlYkNMR0xVdGlscy5jbGFzc1wiKSxjPXIuV2ViQ0xHTD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMudXRpbHM9bmV3IHUuV2ViQ0xHTFV0aWxzLHRoaXMuX2dsPW51bGwsdGhpcy5lPW51bGwsdm9pZCAwPT09dHx8bnVsbD09PXQ/KHRoaXMuZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHRoaXMuZS53aWR0aD0zMix0aGlzLmUuaGVpZ2h0PTMyLHRoaXMuX2dsPXUuV2ViQ0xHTFV0aWxzLmdldFdlYkdMQ29udGV4dEZyb21DYW52YXModGhpcy5lLHthbnRpYWxpYXM6ITF9KSk6dGhpcy5fZ2w9dCx0aGlzLl9hcnJFeHQ9e09FU190ZXh0dXJlX2Zsb2F0Om51bGwsT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyOm51bGwsT0VTX2VsZW1lbnRfaW5kZXhfdWludDpudWxsLFdFQkdMX2RyYXdfYnVmZmVyczpudWxsfTtmb3IodmFyIG4gaW4gdGhpcy5fYXJyRXh0KXRoaXMuX2FyckV4dFtuXT10aGlzLl9nbC5nZXRFeHRlbnNpb24obiksbnVsbD09dGhpcy5fYXJyRXh0W25dJiZjb25zb2xlLmVycm9yKFwiZXh0ZW5zaW9uIFwiK24rXCIgbm90IGF2YWlsYWJsZVwiKTt0aGlzLl9tYXhEcmF3QnVmZmVycz1udWxsLHRoaXMuX2FyckV4dC5oYXNPd25Qcm9wZXJ0eShcIldFQkdMX2RyYXdfYnVmZmVyc1wiKSYmbnVsbCE9dGhpcy5fYXJyRXh0LldFQkdMX2RyYXdfYnVmZmVycz8odGhpcy5fbWF4RHJhd0J1ZmZlcnM9dGhpcy5fZ2wuZ2V0UGFyYW1ldGVyKHRoaXMuX2FyckV4dC5XRUJHTF9kcmF3X2J1ZmZlcnMuTUFYX0RSQVdfQlVGRkVSU19XRUJHTCksY29uc29sZS5sb2coXCJNYXggZHJhdyBidWZmZXJzOiBcIit0aGlzLl9tYXhEcmF3QnVmZmVycykpOmNvbnNvbGUubG9nKFwiTWF4IGRyYXcgYnVmZmVyczogMVwiKTt2YXIgcj10aGlzLl9nbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQodGhpcy5fZ2wuRlJBR01FTlRfU0hBREVSLHRoaXMuX2dsLkhJR0hfRkxPQVQpO3RoaXMucHJlY2lzaW9uPTAhPT1yLnByZWNpc2lvbj9cInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG5cXG5wcmVjaXNpb24gaGlnaHAgaW50O1xcblxcblwiOlwicHJlY2lzaW9uIGxvd3AgZmxvYXQ7XFxuXFxucHJlY2lzaW9uIGxvd3AgaW50O1xcblxcblwiLHRoaXMuX2N1cnJlbnRUZXh0dXJlVW5pdD0wLHRoaXMuX2J1ZmZlcldpZHRoPTA7dmFyIGk9dGhpcy51dGlscy5sb2FkUXVhZCh2b2lkIDAsMSwxKTt0aGlzLnZlcnRleEJ1ZmZlcl9RVUFEPXRoaXMuX2dsLmNyZWF0ZUJ1ZmZlcigpLHRoaXMuX2dsLmJpbmRCdWZmZXIodGhpcy5fZ2wuQVJSQVlfQlVGRkVSLHRoaXMudmVydGV4QnVmZmVyX1FVQUQpLHRoaXMuX2dsLmJ1ZmZlckRhdGEodGhpcy5fZ2wuQVJSQVlfQlVGRkVSLG5ldyBGbG9hdDMyQXJyYXkoaS52ZXJ0ZXhBcnJheSksdGhpcy5fZ2wuU1RBVElDX0RSQVcpLHRoaXMuaW5kZXhCdWZmZXJfUVVBRD10aGlzLl9nbC5jcmVhdGVCdWZmZXIoKSx0aGlzLl9nbC5iaW5kQnVmZmVyKHRoaXMuX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHRoaXMuaW5kZXhCdWZmZXJfUVVBRCksdGhpcy5fZ2wuYnVmZmVyRGF0YSh0aGlzLl9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixuZXcgVWludDE2QXJyYXkoaS5pbmRleEFycmF5KSx0aGlzLl9nbC5TVEFUSUNfRFJBVyksdGhpcy5hcnJheUNvcHlUZXg9W107dmFyIHM9dGhpcy5wcmVjaXNpb24rXCJhdHRyaWJ1dGUgdmVjMyBhVmVydGV4UG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZDb29yZDtcXG52b2lkIG1haW4odm9pZCkge1xcbmdsX1Bvc2l0aW9uID0gdmVjNChhVmVydGV4UG9zaXRpb24sIDEuMCk7XFxudkNvb3JkID0gYVZlcnRleFBvc2l0aW9uLnh5KjAuNSswLjU7XFxufVxcblwiLGE9dGhpcy5wcmVjaXNpb24rXCJ1bmlmb3JtIHNhbXBsZXIyRCBzYW1wbGVyX2J1ZmZlcjtcXG52YXJ5aW5nIHZlYzIgdkNvb3JkO1xcbnZvaWQgbWFpbih2b2lkKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHNhbXBsZXJfYnVmZmVyLCB2Q29vcmQpO31cXG5cIjt0aGlzLnNoYWRlcl9yZWFkcGl4ZWxzPXRoaXMuX2dsLmNyZWF0ZVByb2dyYW0oKSx0aGlzLnV0aWxzLmNyZWF0ZVNoYWRlcih0aGlzLl9nbCxcIkNMR0xSRUFEUElYRUxTXCIscyxhLHRoaXMuc2hhZGVyX3JlYWRwaXhlbHMpLHRoaXMuYXR0cl9WZXJ0ZXhQb3M9dGhpcy5fZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5zaGFkZXJfcmVhZHBpeGVscyxcImFWZXJ0ZXhQb3NpdGlvblwiKSx0aGlzLnNhbXBsZXJfYnVmZmVyPXRoaXMuX2dsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlcl9yZWFkcGl4ZWxzLFwic2FtcGxlcl9idWZmZXJcIik7dmFyIGw9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5fbWF4RHJhd0J1ZmZlcnMmJm51bGwhPT10aGlzLl9tYXhEcmF3QnVmZmVycz9cIiNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVycyA6IHJlcXVpcmVcXG5cIjpcIlwifS5iaW5kKHRoaXMpLGM9KGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVwiXCIsdD0wLG49dGhpcy5fbWF4RHJhd0J1ZmZlcnM7dDxuO3QrKyllKz1cImxheW91dChsb2NhdGlvbiA9IFwiK3QrXCIpIG91dCB2ZWM0IG91dENvbFwiK3QrXCI7XFxuXCI7cmV0dXJuIGV9LmJpbmQodGhpcyksZnVuY3Rpb24oKXtmb3IodmFyIGU9XCJcIix0PTAsbj10aGlzLl9tYXhEcmF3QnVmZmVyczt0PG47dCsrKWUrPVwiZ2xfRnJhZ0RhdGFbXCIrdCtcIl0gPSB0ZXh0dXJlMkQodUFycmF5Q1RbXCIrdCtcIl0sIHZDb29yZCk7XFxuXCI7cmV0dXJuIGV9LmJpbmQodGhpcykpO3M9dGhpcy5wcmVjaXNpb24rXCJhdHRyaWJ1dGUgdmVjMyBhVmVydGV4UG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZDb29yZDtcXG52b2lkIG1haW4odm9pZCkge1xcbmdsX1Bvc2l0aW9uID0gdmVjNChhVmVydGV4UG9zaXRpb24sIDEuMCk7XFxudkNvb3JkID0gYVZlcnRleFBvc2l0aW9uLnh5KjAuNSswLjU7XFxufVwiLGE9bCgpK3RoaXMucHJlY2lzaW9uK1widW5pZm9ybSBzYW1wbGVyMkQgdUFycmF5Q1RbXCIrdGhpcy5fbWF4RHJhd0J1ZmZlcnMrXCJdO1xcbnZhcnlpbmcgdmVjMiB2Q29vcmQ7XFxudm9pZCBtYWluKHZvaWQpIHtcXG5cIitjKCkrXCJ9XCIsdGhpcy5zaGFkZXJfY29weVRleHR1cmU9dGhpcy5fZ2wuY3JlYXRlUHJvZ3JhbSgpLHRoaXMudXRpbHMuY3JlYXRlU2hhZGVyKHRoaXMuX2dsLFwiQ0xHTENPUFlURVhUVVJFXCIscyxhLHRoaXMuc2hhZGVyX2NvcHlUZXh0dXJlKSx0aGlzLmF0dHJfY29weVRleHR1cmVfcG9zPXRoaXMuX2dsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuc2hhZGVyX2NvcHlUZXh0dXJlLFwiYVZlcnRleFBvc2l0aW9uXCIpO2Zvcih2YXIgaD0wLGY9dGhpcy5fbWF4RHJhd0J1ZmZlcnM7aDxmO2grKyl0aGlzLmFycmF5Q29weVRleFtoXT10aGlzLl9nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zaGFkZXJfY29weVRleHR1cmUsXCJ1QXJyYXlDVFtcIitoK1wiXVwiKTt0aGlzLnRleHR1cmVEYXRhQXV4PXRoaXMuX2dsLmNyZWF0ZVRleHR1cmUoKSx0aGlzLl9nbC5iaW5kVGV4dHVyZSh0aGlzLl9nbC5URVhUVVJFXzJELHRoaXMudGV4dHVyZURhdGFBdXgpLHRoaXMuX2dsLnRleEltYWdlMkQodGhpcy5fZ2wuVEVYVFVSRV8yRCwwLHRoaXMuX2dsLlJHQkEsMiwyLDAsdGhpcy5fZ2wuUkdCQSx0aGlzLl9nbC5GTE9BVCxuZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwxLDAsMSwwLDEsMCwwLDEsMSwxLDEsMSwxXSkpLHRoaXMuX2dsLnRleFBhcmFtZXRlcmkodGhpcy5fZ2wuVEVYVFVSRV8yRCx0aGlzLl9nbC5URVhUVVJFX01BR19GSUxURVIsdGhpcy5fZ2wuTkVBUkVTVCksdGhpcy5fZ2wudGV4UGFyYW1ldGVyaSh0aGlzLl9nbC5URVhUVVJFXzJELHRoaXMuX2dsLlRFWFRVUkVfTUlOX0ZJTFRFUix0aGlzLl9nbC5ORUFSRVNUKSx0aGlzLl9nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuX2dsLlRFWFRVUkVfMkQsdGhpcy5fZ2wuVEVYVFVSRV9XUkFQX1MsdGhpcy5fZ2wuQ0xBTVBfVE9fRURHRSksdGhpcy5fZ2wudGV4UGFyYW1ldGVyaSh0aGlzLl9nbC5URVhUVVJFXzJELHRoaXMuX2dsLlRFWFRVUkVfV1JBUF9ULHRoaXMuX2dsLkNMQU1QX1RPX0VER0UpLHRoaXMuX2dsLmJpbmRUZXh0dXJlKHRoaXMuX2dsLlRFWFRVUkVfMkQsbnVsbCl9cmV0dXJuIGkoZSxbe2tleTpcImdldENvbnRleHRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nbH19LHtrZXk6XCJnZXRNYXhEcmF3QnVmZmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heERyYXdCdWZmZXJzfX0se2tleTpcImNoZWNrRnJhbWVidWZmZXJTdGF0dXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXModGhpcy5fZ2wuRlJBTUVCVUZGRVIpLHQ9e307cmV0dXJuIHRbdGhpcy5fZ2wuRlJBTUVCVUZGRVJfQ09NUExFVEVdPSEwLHRbdGhpcy5fZ2wuRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UXT1cIkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfQVRUQUNITUVOVDogVGhlIGF0dGFjaG1lbnQgdHlwZXMgYXJlIG1pc21hdGNoZWQgb3Igbm90IGFsbCBmcmFtZWJ1ZmZlciBhdHRhY2htZW50IHBvaW50cyBhcmUgZnJhbWVidWZmZXIgYXR0YWNobWVudCBjb21wbGV0ZVwiLHRbdGhpcy5fZ2wuRlJBTUVCVUZGRVJfSU5DT01QTEVURV9NSVNTSU5HX0FUVEFDSE1FTlRdPVwiRlJBTUVCVUZGRVJfSU5DT01QTEVURV9NSVNTSU5HX0FUVEFDSE1FTlQ6IFRoZXJlIGlzIG5vIGF0dGFjaG1lbnRcIix0W3RoaXMuX2dsLkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OU109XCJGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0RJTUVOU0lPTlM6IEhlaWdodCBhbmQgd2lkdGggb2YgdGhlIGF0dGFjaG1lbnQgYXJlIG5vdCB0aGUgc2FtZVwiLHRbdGhpcy5fZ2wuRlJBTUVCVUZGRVJfVU5TVVBQT1JURURdPVwiRlJBTUVCVUZGRVJfVU5TVVBQT1JURUQ6IFRoZSBmb3JtYXQgb2YgdGhlIGF0dGFjaG1lbnQgaXMgbm90IHN1cHBvcnRlZCBvciBpZiBkZXB0aCBhbmQgc3RlbmNpbCBhdHRhY2htZW50cyBhcmUgbm90IHRoZSBzYW1lIHJlbmRlcmJ1ZmZlclwiLCEwPT09dFtlXSYmbnVsbCE9PXRbZV18fChjb25zb2xlLmxvZyh0W2VdKSwhMSl9fSx7a2V5OlwiY29weVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dCYmbnVsbCE9PXQpaWYodm9pZCAwIT09dFswXSYmbnVsbCE9PXRbMF0pe3RoaXMuX2dsLnZpZXdwb3J0KDAsMCx0WzBdLlcsdFswXS5IKSx0aGlzLl9nbC5iaW5kRnJhbWVidWZmZXIodGhpcy5fZ2wuRlJBTUVCVUZGRVIsdFswXS5mQnVmZmVyKTtmb3IodmFyIG49W10scj0wLG89dC5sZW5ndGg7cjxvO3IrKyl2b2lkIDAhPT10W3JdJiZudWxsIT09dFtyXT8odGhpcy5fZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQodGhpcy5fZ2wuRlJBTUVCVUZGRVIsdGhpcy5fYXJyRXh0LldFQkdMX2RyYXdfYnVmZmVyc1tcIkNPTE9SX0FUVEFDSE1FTlRcIityK1wiX1dFQkdMXCJdLHRoaXMuX2dsLlRFWFRVUkVfMkQsdFtyXS50ZXh0dXJlRGF0YSwwKSxuW3JdPXRoaXMuX2FyckV4dC5XRUJHTF9kcmF3X2J1ZmZlcnNbXCJDT0xPUl9BVFRBQ0hNRU5UXCIrcitcIl9XRUJHTFwiXSk6bltyXT10aGlzLl9nbC5OT05FO2lmKHRoaXMuX2FyckV4dC5XRUJHTF9kcmF3X2J1ZmZlcnMuZHJhd0J1ZmZlcnNXRUJHTChuKSwhMD09PXRoaXMuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cygpKXt0aGlzLl9nbC51c2VQcm9ncmFtKHRoaXMuc2hhZGVyX2NvcHlUZXh0dXJlKTtmb3IodmFyIGk9MCxzPXQubGVuZ3RoO2k8cztpKyspdGhpcy5fZ2wuYWN0aXZlVGV4dHVyZSh0aGlzLl9nbFtcIlRFWFRVUkVcIitpXSksdm9pZCAwIT09dFtpXSYmbnVsbCE9PXRbaV0/dGhpcy5fZ2wuYmluZFRleHR1cmUodGhpcy5fZ2wuVEVYVFVSRV8yRCx0W2ldLnRleHR1cmVEYXRhVGVtcCk6dGhpcy5fZ2wuYmluZFRleHR1cmUodGhpcy5fZ2wuVEVYVFVSRV8yRCx0aGlzLnRleHR1cmVEYXRhQXV4KSx0aGlzLl9nbC51bmlmb3JtMWkodGhpcy5hcnJheUNvcHlUZXhbaV0saSk7dGhpcy5jb3B5Tm93KHQpfX1lbHNlIHRoaXMuX2dsLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLl9nbC5GUkFNRUJVRkZFUixudWxsKTtlbHNlIHRoaXMuX2dsLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLl9nbC5GUkFNRUJVRkZFUixudWxsKX19LHtrZXk6XCJjb3B5Tm93XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hdHRyX2NvcHlUZXh0dXJlX3BvcyksdGhpcy5fZ2wuYmluZEJ1ZmZlcih0aGlzLl9nbC5BUlJBWV9CVUZGRVIsdGhpcy52ZXJ0ZXhCdWZmZXJfUVVBRCksdGhpcy5fZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmF0dHJfY29weVRleHR1cmVfcG9zLDMsdGhpcy5fZ2wuRkxPQVQsITEsMCwwKSx0aGlzLl9nbC5iaW5kQnVmZmVyKHRoaXMuX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHRoaXMuaW5kZXhCdWZmZXJfUVVBRCksdGhpcy5fZ2wuZHJhd0VsZW1lbnRzKHRoaXMuX2dsLlRSSUFOR0xFUyw2LHRoaXMuX2dsLlVOU0lHTkVEX1NIT1JULDApfX0se2tleTpcImNyZWF0ZUJ1ZmZlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbmV3IHMuV2ViQ0xHTEJ1ZmZlcih0aGlzLl9nbCxlLHQsbil9fSx7a2V5OlwiY3JlYXRlS2VybmVsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGEuV2ViQ0xHTEtlcm5lbCh0aGlzLl9nbCxlLHQpfX0se2tleTpcImNyZWF0ZVZlcnRleEZyYWdtZW50UHJvZ3JhbVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBuZXcgbC5XZWJDTEdMVmVydGV4RnJhZ21lbnRQcm9ncmFtKHRoaXMuX2dsLGUsdCxuLHIpfX0se2tleTpcImZpbGxCdWZmZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dGhpcy5fZ2wuYmluZEZyYW1lYnVmZmVyKHRoaXMuX2dsLkZSQU1FQlVGRkVSLG4pLHRoaXMuX2dsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKHRoaXMuX2dsLkZSQU1FQlVGRkVSLHRoaXMuX2FyckV4dC5XRUJHTF9kcmF3X2J1ZmZlcnMuQ09MT1JfQVRUQUNITUVOVDBfV0VCR0wsdGhpcy5fZ2wuVEVYVFVSRV8yRCxlLDApO3ZhciByPVt0aGlzLl9hcnJFeHQuV0VCR0xfZHJhd19idWZmZXJzLkNPTE9SX0FUVEFDSE1FTlQwX1dFQkdMXTt0aGlzLl9hcnJFeHQuV0VCR0xfZHJhd19idWZmZXJzLmRyYXdCdWZmZXJzV0VCR0wociksdm9pZCAwIT09dCYmbnVsbCE9PXQmJnRoaXMuX2dsLmNsZWFyQ29sb3IodFswXSx0WzFdLHRbMl0sdFszXSksdGhpcy5fZ2wuY2xlYXIodGhpcy5fZ2wuQ09MT1JfQlVGRkVSX0JJVCl9fSx7a2V5OlwiYmluZEF0dHJpYnV0ZVZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT10JiZudWxsIT09dD9cImZsb2F0NF9mcm9tQXR0clwiPT09ZS50eXBlPyh0aGlzLl9nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShlLmxvY2F0aW9uWzBdKSx0aGlzLl9nbC5iaW5kQnVmZmVyKHRoaXMuX2dsLkFSUkFZX0JVRkZFUix0LnZlcnRleERhdGEwKSx0aGlzLl9nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGUubG9jYXRpb25bMF0sNCx0aGlzLl9nbC5GTE9BVCwhMSwwLDApKTpcImZsb2F0X2Zyb21BdHRyXCI9PT1lLnR5cGUmJih0aGlzLl9nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShlLmxvY2F0aW9uWzBdKSx0aGlzLl9nbC5iaW5kQnVmZmVyKHRoaXMuX2dsLkFSUkFZX0JVRkZFUix0LnZlcnRleERhdGEwKSx0aGlzLl9nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGUubG9jYXRpb25bMF0sMSx0aGlzLl9nbC5GTE9BVCwhMSwwLDApKTp0aGlzLl9nbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoZS5sb2NhdGlvblswXSl9fSx7a2V5OlwiYmluZFNhbXBsZXJWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9jdXJyZW50VGV4dHVyZVVuaXQ8MTY/dGhpcy5fZ2wuYWN0aXZlVGV4dHVyZSh0aGlzLl9nbFtcIlRFWFRVUkVcIit0aGlzLl9jdXJyZW50VGV4dHVyZVVuaXRdKTp0aGlzLl9nbC5hY3RpdmVUZXh0dXJlKHRoaXMuX2dsLlRFWFRVUkUxNiksdm9pZCAwIT09biYmbnVsbCE9PW4/KHRoaXMuX2dsLmJpbmRUZXh0dXJlKHRoaXMuX2dsLlRFWFRVUkVfMkQsbi50ZXh0dXJlRGF0YSksMD09PXRoaXMuX2J1ZmZlcldpZHRoJiYodGhpcy5fYnVmZmVyV2lkdGg9bi5XLHRoaXMuX2dsLnVuaWZvcm0xZihlLHRoaXMuX2J1ZmZlcldpZHRoKSkpOnRoaXMuX2dsLmJpbmRUZXh0dXJlKHRoaXMuX2dsLlRFWFRVUkVfMkQsdGhpcy50ZXh0dXJlRGF0YUF1eCksdGhpcy5fZ2wudW5pZm9ybTFpKHQubG9jYXRpb25bMF0sdGhpcy5fY3VycmVudFRleHR1cmVVbml0KSx0aGlzLl9jdXJyZW50VGV4dHVyZVVuaXQrK319LHtrZXk6XCJiaW5kVW5pZm9ybVZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT10JiZudWxsIT09dCYmKFwiZmxvYXRcIj09PWUudHlwZT90LmNvbnN0cnVjdG9yPT09QXJyYXk/dGhpcy5fZ2wudW5pZm9ybTFmdihlLmxvY2F0aW9uWzBdLHQpOnRoaXMuX2dsLnVuaWZvcm0xZihlLmxvY2F0aW9uWzBdLHQpOlwiZmxvYXQ0XCI9PT1lLnR5cGU/dGhpcy5fZ2wudW5pZm9ybTRmKGUubG9jYXRpb25bMF0sdFswXSx0WzFdLHRbMl0sdFszXSk6XCJtYXQ0XCI9PT1lLnR5cGUmJnRoaXMuX2dsLnVuaWZvcm1NYXRyaXg0ZnYoZS5sb2NhdGlvblswXSwhMSx0KSl9fSx7a2V5OlwiYmluZFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3N3aXRjaCh0LmV4cGVjdGVkTW9kZSl7Y2FzZVwiQVRUUklCVVRFXCI6dGhpcy5iaW5kQXR0cmlidXRlVmFsdWUodCxuKTticmVhaztjYXNlXCJTQU1QTEVSXCI6dGhpcy5iaW5kU2FtcGxlclZhbHVlKGUudUJ1ZmZlcldpZHRoLHQsbik7YnJlYWs7Y2FzZVwiVU5JRk9STVwiOnRoaXMuYmluZFVuaWZvcm1WYWx1ZSh0LG4pfX19LHtrZXk6XCJiaW5kRkJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PWUmJm51bGwhPT1lKXtpZih2b2lkIDAhPT1lWzBdJiZudWxsIT09ZVswXSl7dGhpcy5fZ2wudmlld3BvcnQoMCwwLGVbMF0uVyxlWzBdLkgpLHRoaXMuX2dsLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLl9nbC5GUkFNRUJVRkZFUiwhMD09PXQ/ZVswXS5mQnVmZmVyVGVtcDplWzBdLmZCdWZmZXIpO2Zvcih2YXIgbj1bXSxyPTAsbz1lLmxlbmd0aDtyPG87cisrKWlmKHZvaWQgMCE9PWVbcl0mJm51bGwhPT1lW3JdKXt2YXIgaT0hMD09PXQ/ZVtyXS50ZXh0dXJlRGF0YVRlbXA6ZVtyXS50ZXh0dXJlRGF0YTt0aGlzLl9nbC5mcmFtZWJ1ZmZlclRleHR1cmUyRCh0aGlzLl9nbC5GUkFNRUJVRkZFUix0aGlzLl9hcnJFeHQuV0VCR0xfZHJhd19idWZmZXJzW1wiQ09MT1JfQVRUQUNITUVOVFwiK3IrXCJfV0VCR0xcIl0sdGhpcy5fZ2wuVEVYVFVSRV8yRCxpLDApLG5bcl09dGhpcy5fYXJyRXh0LldFQkdMX2RyYXdfYnVmZmVyc1tcIkNPTE9SX0FUVEFDSE1FTlRcIityK1wiX1dFQkdMXCJdfWVsc2UgbltyXT10aGlzLl9nbC5OT05FO3JldHVybiB0aGlzLl9hcnJFeHQuV0VCR0xfZHJhd19idWZmZXJzLmRyYXdCdWZmZXJzV0VCR0wobiksdGhpcy5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKCl9cmV0dXJuIHRoaXMuX2dsLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLl9nbC5GUkFNRUJVRkZFUixudWxsKSwhMH1yZXR1cm4gdGhpcy5fZ2wuYmluZEZyYW1lYnVmZmVyKHRoaXMuX2dsLkZSQU1FQlVGRkVSLG51bGwpLCEwfX0se2tleTpcImVucXVldWVORFJhbmdlS2VybmVsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4scil7aWYodGhpcy5fYnVmZmVyV2lkdGg9MCx0aGlzLl9nbC51c2VQcm9ncmFtKGUua2VybmVsKSwhMD09PXRoaXMuYmluZEZCKHQsbikpe3RoaXMuX2N1cnJlbnRUZXh0dXJlVW5pdD0wO2Zvcih2YXIgbyBpbiBlLmluX3ZhbHVlcyl0aGlzLmJpbmRWYWx1ZShlLGUuaW5fdmFsdWVzW29dLHJbb10pO3RoaXMuX2dsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUuYXR0cl9WZXJ0ZXhQb3MpLHRoaXMuX2dsLmJpbmRCdWZmZXIodGhpcy5fZ2wuQVJSQVlfQlVGRkVSLHRoaXMudmVydGV4QnVmZmVyX1FVQUQpLHRoaXMuX2dsLnZlcnRleEF0dHJpYlBvaW50ZXIoZS5hdHRyX1ZlcnRleFBvcywzLHRoaXMuX2dsLkZMT0FULCExLDAsMCksdGhpcy5fZ2wuYmluZEJ1ZmZlcih0aGlzLl9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUix0aGlzLmluZGV4QnVmZmVyX1FVQUQpLHRoaXMuX2dsLmRyYXdFbGVtZW50cyh0aGlzLl9nbC5UUklBTkdMRVMsNix0aGlzLl9nbC5VTlNJR05FRF9TSE9SVCwwKX19fSx7a2V5OlwiZW5xdWV1ZVZlcnRleEZyYWdtZW50UHJvZ3JhbVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIsbyxpKXt0aGlzLl9idWZmZXJXaWR0aD0wLHRoaXMuX2dsLnVzZVByb2dyYW0oZS52ZXJ0ZXhGcmFnbWVudFByb2dyYW0pO3ZhciBzPXZvaWQgMCE9PW4mJm51bGwhPT1uP246NDtpZighMD09PXRoaXMuYmluZEZCKHIsbykmJnZvaWQgMCE9PXQmJm51bGwhPT10KXt0aGlzLl9jdXJyZW50VGV4dHVyZVVuaXQ9MDtmb3IodmFyIGEgaW4gZS5pbl92ZXJ0ZXhfdmFsdWVzKXRoaXMuYmluZFZhbHVlKGUsZS5pbl92ZXJ0ZXhfdmFsdWVzW2FdLGlbYV0pO2Zvcih2YXIgbCBpbiBlLmluX2ZyYWdtZW50X3ZhbHVlcyl0aGlzLmJpbmRWYWx1ZShlLGUuaW5fZnJhZ21lbnRfdmFsdWVzW2xdLGlbbF0pO1wiVkVSVEVYX0lOREVYXCI9PT10Lm1vZGU/KHRoaXMuX2dsLmJpbmRCdWZmZXIodGhpcy5fZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdC52ZXJ0ZXhEYXRhMCksdGhpcy5fZ2wuZHJhd0VsZW1lbnRzKHMsdC5sZW5ndGgsdGhpcy5fZ2wuVU5TSUdORURfU0hPUlQsMCkpOnRoaXMuX2dsLmRyYXdBcnJheXMocywwLHQubGVuZ3RoKX19fSx7a2V5OlwicmVhZEJ1ZmZlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PXRoaXMuZSYmbnVsbCE9PXRoaXMuZSYmKHRoaXMuZS53aWR0aD1lLlcsdGhpcy5lLmhlaWdodD1lLkgpLHRoaXMuX2dsLnVzZVByb2dyYW0odGhpcy5zaGFkZXJfcmVhZHBpeGVscyksdGhpcy5fZ2wudmlld3BvcnQoMCwwLGUuVyxlLkgpLHRoaXMuX2dsLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLl9nbC5GUkFNRUJVRkZFUixlLmZCdWZmZXJUZW1wKSx0aGlzLl9nbC5mcmFtZWJ1ZmZlclRleHR1cmUyRCh0aGlzLl9nbC5GUkFNRUJVRkZFUix0aGlzLl9hcnJFeHQuV0VCR0xfZHJhd19idWZmZXJzLkNPTE9SX0FUVEFDSE1FTlQwX1dFQkdMLHRoaXMuX2dsLlRFWFRVUkVfMkQsZS50ZXh0dXJlRGF0YVRlbXAsMCk7dmFyIHQ9W3RoaXMuX2FyckV4dC5XRUJHTF9kcmF3X2J1ZmZlcnMuQ09MT1JfQVRUQUNITUVOVDBfV0VCR0xdO2lmKHRoaXMuX2FyckV4dC5XRUJHTF9kcmF3X2J1ZmZlcnMuZHJhd0J1ZmZlcnNXRUJHTCh0KSx0aGlzLl9nbC5hY3RpdmVUZXh0dXJlKHRoaXMuX2dsLlRFWFRVUkUwKSx0aGlzLl9nbC5iaW5kVGV4dHVyZSh0aGlzLl9nbC5URVhUVVJFXzJELGUudGV4dHVyZURhdGEpLHRoaXMuX2dsLnVuaWZvcm0xaSh0aGlzLnNhbXBsZXJfYnVmZmVyLDApLHRoaXMuX2dsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYXR0cl9WZXJ0ZXhQb3MpLHRoaXMuX2dsLmJpbmRCdWZmZXIodGhpcy5fZ2wuQVJSQVlfQlVGRkVSLHRoaXMudmVydGV4QnVmZmVyX1FVQUQpLHRoaXMuX2dsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hdHRyX1ZlcnRleFBvcywzLGUuX3N1cHBvcnRGb3JtYXQsITEsMCwwKSx0aGlzLl9nbC5iaW5kQnVmZmVyKHRoaXMuX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHRoaXMuaW5kZXhCdWZmZXJfUVVBRCksdGhpcy5fZ2wuZHJhd0VsZW1lbnRzKHRoaXMuX2dsLlRSSUFOR0xFUyw2LHRoaXMuX2dsLlVOU0lHTkVEX1NIT1JULDApLHZvaWQgMCE9PWUub3V0QXJyYXlGbG9hdCYmbnVsbCE9PWUub3V0QXJyYXlGbG9hdHx8KGUub3V0QXJyYXlGbG9hdD1uZXcgRmxvYXQzMkFycmF5KGUuVyplLkgqNCkpLHRoaXMuX2dsLnJlYWRQaXhlbHMoMCwwLGUuVyxlLkgsdGhpcy5fZ2wuUkdCQSx0aGlzLl9nbC5GTE9BVCxlLm91dEFycmF5RmxvYXQpLFwiRkxPQVRcIj09PWUudHlwZSl7Zm9yKHZhciBuPW5ldyBGbG9hdDMyQXJyYXkoZS5vdXRBcnJheUZsb2F0Lmxlbmd0aC80KSxyPTAsbz1lLm91dEFycmF5RmxvYXQubGVuZ3RoLzQ7cjxvO3IrKyluW3JdPWUub3V0QXJyYXlGbG9hdFs0KnJdO2Uub3V0QXJyYXlGbG9hdD1ufXJldHVybiBlLm91dEFycmF5RmxvYXR9fV0sW3trZXk6XCJlbnF1ZXVlUmVhZEJ1ZmZlcl9XZWJHTFRleHR1cmVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS50ZXh0dXJlRGF0YX19XSksZX0oKTt0LldlYkNMR0w9YyxuLmV4cG9ydHMuV2ViQ0xHTD1jfSkuY2FsbCh0aGlzLHZvaWQgMCE9PXQ/dDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi9XZWJDTEdMQnVmZmVyLmNsYXNzXCI6MixcIi4vV2ViQ0xHTEtlcm5lbC5jbGFzc1wiOjQsXCIuL1dlYkNMR0xVdGlscy5jbGFzc1wiOjUsXCIuL1dlYkNMR0xWZXJ0ZXhGcmFnbWVudFByb2dyYW0uY2xhc3NcIjo2fV0sMjpbZnVuY3Rpb24oZSxuLHIpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLGk9ci5XZWJDTEdMQnVmZmVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShuLHIsbyxpKXt0KHRoaXMsZSksdGhpcy5fZ2w9bix0aGlzLnR5cGU9dm9pZCAwIT09cnx8bnVsbCE9PXI/cjpcIkZMT0FUXCIsdGhpcy5fc3VwcG9ydEZvcm1hdD10aGlzLl9nbC5GTE9BVCx0aGlzLmxpbmVhcj12b2lkIDA9PT1vJiZudWxsPT09b3x8byx0aGlzLm1vZGU9dm9pZCAwIT09aXx8bnVsbCE9PWk/aTpcIlNBTVBMRVJcIix0aGlzLlc9bnVsbCx0aGlzLkg9bnVsbCx0aGlzLnRleHR1cmVEYXRhPW51bGwsdGhpcy50ZXh0dXJlRGF0YVRlbXA9bnVsbCx0aGlzLnZlcnRleERhdGEwPW51bGwsdGhpcy5mQnVmZmVyPW51bGwsdGhpcy5yZW5kZXJCdWZmZXI9bnVsbCx0aGlzLmZCdWZmZXJUZW1wPW51bGwsdGhpcy5yZW5kZXJCdWZmZXJUZW1wPW51bGwsXCJTQU1QTEVSXCI9PT10aGlzLm1vZGUmJih0aGlzLnRleHR1cmVEYXRhPXRoaXMuX2dsLmNyZWF0ZVRleHR1cmUoKSx0aGlzLnRleHR1cmVEYXRhVGVtcD10aGlzLl9nbC5jcmVhdGVUZXh0dXJlKCkpLFwiU0FNUExFUlwiIT09dGhpcy5tb2RlJiZcIkFUVFJJQlVURVwiIT09dGhpcy5tb2RlJiZcIlZFUlRFWF9JTkRFWFwiIT09dGhpcy5tb2RlfHwodGhpcy52ZXJ0ZXhEYXRhMD10aGlzLl9nbC5jcmVhdGVCdWZmZXIoKSl9cmV0dXJuIG8oZSxbe2tleTpcImNyZWF0ZUZyYW1lYnVmZmVyQW5kUmVuZGVyYnVmZmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO3JldHVybiB0aGlzLl9nbC5iaW5kUmVuZGVyYnVmZmVyKHRoaXMuX2dsLlJFTkRFUkJVRkZFUixlKSx0aGlzLl9nbC5yZW5kZXJidWZmZXJTdG9yYWdlKHRoaXMuX2dsLlJFTkRFUkJVRkZFUix0aGlzLl9nbC5ERVBUSF9DT01QT05FTlQxNix0aGlzLlcsdGhpcy5IKSx0aGlzLl9nbC5iaW5kUmVuZGVyYnVmZmVyKHRoaXMuX2dsLlJFTkRFUkJVRkZFUixudWxsKSxlfS5iaW5kKHRoaXMpO251bGwhPXRoaXMuZkJ1ZmZlciYmKHRoaXMuX2dsLmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuZkJ1ZmZlciksdGhpcy5fZ2wuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mQnVmZmVyVGVtcCksdGhpcy5fZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMucmVuZGVyQnVmZmVyKSx0aGlzLl9nbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5yZW5kZXJCdWZmZXJUZW1wKSksdGhpcy5mQnVmZmVyPXRoaXMuX2dsLmNyZWF0ZUZyYW1lYnVmZmVyKCksdGhpcy5yZW5kZXJCdWZmZXI9ZSgpLHRoaXMuX2dsLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLl9nbC5GUkFNRUJVRkZFUix0aGlzLmZCdWZmZXIpLHRoaXMuX2dsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKHRoaXMuX2dsLkZSQU1FQlVGRkVSLHRoaXMuX2dsLkRFUFRIX0FUVEFDSE1FTlQsdGhpcy5fZ2wuUkVOREVSQlVGRkVSLHRoaXMucmVuZGVyQnVmZmVyKSx0aGlzLmZCdWZmZXJUZW1wPXRoaXMuX2dsLmNyZWF0ZUZyYW1lYnVmZmVyKCksdGhpcy5yZW5kZXJCdWZmZXJUZW1wPWUoKSx0aGlzLl9nbC5iaW5kRnJhbWVidWZmZXIodGhpcy5fZ2wuRlJBTUVCVUZGRVIsdGhpcy5mQnVmZmVyVGVtcCksdGhpcy5fZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIodGhpcy5fZ2wuRlJBTUVCVUZGRVIsdGhpcy5fZ2wuREVQVEhfQVRUQUNITUVOVCx0aGlzLl9nbC5SRU5ERVJCVUZGRVIsdGhpcy5yZW5kZXJCdWZmZXJUZW1wKX19LHtrZXk6XCJ3cml0ZVdlYkdMVGV4dHVyZUJ1ZmZlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSx0KXshMT09PXR8fHZvaWQgMD09PXR8fG51bGw9PT10P3RoaXMuX2dsLnBpeGVsU3RvcmVpKHRoaXMuX2dsLlVOUEFDS19GTElQX1lfV0VCR0wsITEpOnRoaXMuX2dsLnBpeGVsU3RvcmVpKHRoaXMuX2dsLlVOUEFDS19GTElQX1lfV0VCR0wsITApLHRoaXMuX2dsLnBpeGVsU3RvcmVpKHRoaXMuX2dsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwhMSksdGhpcy5fZ2wuYmluZFRleHR1cmUodGhpcy5fZ2wuVEVYVFVSRV8yRCxlKX0uYmluZCh0aGlzKSxyPWZ1bmN0aW9uKGUpe2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P1wiRkxPQVQ0XCI9PT10aGlzLnR5cGUmJnRoaXMuX2dsLnRleEltYWdlMkQodGhpcy5fZ2wuVEVYVFVSRV8yRCwwLHRoaXMuX2dsLlJHQkEsdGhpcy5fZ2wuUkdCQSx0aGlzLl9zdXBwb3J0Rm9ybWF0LGUpOnRoaXMuX2dsLnRleEltYWdlMkQodGhpcy5fZ2wuVEVYVFVSRV8yRCwwLHRoaXMuX2dsLlJHQkEsdGhpcy5XLHRoaXMuSCwwLHRoaXMuX2dsLlJHQkEsdGhpcy5fc3VwcG9ydEZvcm1hdCxlKX0uYmluZCh0aGlzKSxvPWZ1bmN0aW9uKCl7dGhpcy5fZ2wudGV4UGFyYW1ldGVyaSh0aGlzLl9nbC5URVhUVVJFXzJELHRoaXMuX2dsLlRFWFRVUkVfTUFHX0ZJTFRFUix0aGlzLl9nbC5ORUFSRVNUKSx0aGlzLl9nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuX2dsLlRFWFRVUkVfMkQsdGhpcy5fZ2wuVEVYVFVSRV9NSU5fRklMVEVSLHRoaXMuX2dsLk5FQVJFU1QpLHRoaXMuX2dsLnRleFBhcmFtZXRlcmkodGhpcy5fZ2wuVEVYVFVSRV8yRCx0aGlzLl9nbC5URVhUVVJFX1dSQVBfUyx0aGlzLl9nbC5DTEFNUF9UT19FREdFKSx0aGlzLl9nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuX2dsLlRFWFRVUkVfMkQsdGhpcy5fZ2wuVEVYVFVSRV9XUkFQX1QsdGhpcy5fZ2wuQ0xBTVBfVE9fRURHRSl9LmJpbmQodGhpcyk7ZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZT8odGhpcy50ZXh0dXJlRGF0YT1lLHRoaXMudGV4dHVyZURhdGFUZW1wPWUpOihuKHRoaXMudGV4dHVyZURhdGEsdCkscihlKSxvKCksbih0aGlzLnRleHR1cmVEYXRhVGVtcCx0KSxyKGUpLG8oKSksdGhpcy5fZ2wuYmluZFRleHR1cmUodGhpcy5fZ2wuVEVYVFVSRV8yRCxudWxsKX19LHtrZXk6XCJ3cml0ZUJ1ZmZlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1mdW5jdGlvbihlKXtpZighKGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSlpZih0aGlzLmxlbmd0aC5jb25zdHJ1Y3Rvcj09PUFycmF5Pyh0aGlzLmxlbmd0aD10aGlzLmxlbmd0aFswXSp0aGlzLmxlbmd0aFsxXSx0aGlzLlc9dGhpcy5sZW5ndGhbMF0sdGhpcy5IPXRoaXMubGVuZ3RoWzFdKToodGhpcy5XPU1hdGguY2VpbChNYXRoLnNxcnQodGhpcy5sZW5ndGgpKSx0aGlzLkg9dGhpcy5XKSxcIkZMT0FUNFwiPT09dGhpcy50eXBlKXtlPWUgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/ZTpuZXcgRmxvYXQzMkFycmF5KGUpO3ZhciB0PXRoaXMuVyp0aGlzLkgqNDtpZihlLmxlbmd0aCE9PXQpe2Zvcih2YXIgbj1uZXcgRmxvYXQzMkFycmF5KHQpLHI9MDtyPHQ7cisrKW5bcl09bnVsbCE9ZVtyXT9lW3JdOjA7ZT1ufX1lbHNlIGlmKFwiRkxPQVRcIj09PXRoaXMudHlwZSl7Zm9yKHZhciBvPXRoaXMuVyp0aGlzLkgqNCxpPW5ldyBGbG9hdDMyQXJyYXkobykscz0wLGE9dGhpcy5XKnRoaXMuSDtzPGE7cysrKXt2YXIgbD00KnM7aVtsXT1udWxsIT1lW3NdP2Vbc106MCxpW2wrMV09MCxpW2wrMl09MCxpW2wrM109MH1lPWl9cmV0dXJuIGV9LmJpbmQodGhpcyk7dm9pZCAwPT09bnx8bnVsbD09PW4/ZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/dGhpcy5sZW5ndGg9ZS53aWR0aCplLmhlaWdodDp0aGlzLmxlbmd0aD1cIkZMT0FUNFwiPT09dGhpcy50eXBlP2UubGVuZ3RoLzQ6ZS5sZW5ndGg6dGhpcy5sZW5ndGg9W25bMF0sblsxXV0sXCJTQU1QTEVSXCI9PT10aGlzLm1vZGUmJnRoaXMud3JpdGVXZWJHTFRleHR1cmVCdWZmZXIocihlKSx0KSxcIlNBTVBMRVJcIiE9PXRoaXMubW9kZSYmXCJBVFRSSUJVVEVcIiE9PXRoaXMubW9kZXx8KHRoaXMuX2dsLmJpbmRCdWZmZXIodGhpcy5fZ2wuQVJSQVlfQlVGRkVSLHRoaXMudmVydGV4RGF0YTApLHRoaXMuX2dsLmJ1ZmZlckRhdGEodGhpcy5fZ2wuQVJSQVlfQlVGRkVSLGUgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/ZTpuZXcgRmxvYXQzMkFycmF5KGUpLHRoaXMuX2dsLlNUQVRJQ19EUkFXKSksXCJWRVJURVhfSU5ERVhcIj09PXRoaXMubW9kZSYmKHRoaXMuX2dsLmJpbmRCdWZmZXIodGhpcy5fZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdGhpcy52ZXJ0ZXhEYXRhMCksdGhpcy5fZ2wuYnVmZmVyRGF0YSh0aGlzLl9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixuZXcgVWludDE2QXJyYXkoZSksdGhpcy5fZ2wuU1RBVElDX0RSQVcpKSx0aGlzLmNyZWF0ZUZyYW1lYnVmZmVyQW5kUmVuZGVyYnVmZmVyKCl9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtcIlNBTVBMRVJcIj09PXRoaXMubW9kZSYmKHRoaXMuX2dsLmRlbGV0ZVRleHR1cmUodGhpcy50ZXh0dXJlRGF0YSksdGhpcy5fZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmVEYXRhVGVtcCkpLFwiU0FNUExFUlwiIT09dGhpcy5tb2RlJiZcIkFUVFJJQlVURVwiIT09dGhpcy5tb2RlJiZcIlZFUlRFWF9JTkRFWFwiIT09dGhpcy5tb2RlfHx0aGlzLl9nbC5kZWxldGVCdWZmZXIodGhpcy52ZXJ0ZXhEYXRhMCksdGhpcy5fZ2wuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mQnVmZmVyKSx0aGlzLl9nbC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLmZCdWZmZXJUZW1wKSx0aGlzLl9nbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5yZW5kZXJCdWZmZXIpLHRoaXMuX2dsLmRlbGV0ZVJlbmRlcmJ1ZmZlcih0aGlzLnJlbmRlckJ1ZmZlclRlbXApfX1dKSxlfSgpO2UuV2ViQ0xHTEJ1ZmZlcj1pLG4uZXhwb3J0cy5XZWJDTEdMQnVmZmVyPWl9KS5jYWxsKHRoaXMsdm9pZCAwIT09dD90OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMzpbZnVuY3Rpb24oZSxuLHIpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKCl7dmFyIGU9bmV3IHUsdD1udWxsO3JldHVybiBhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dD8odD1hcmd1bWVudHNbMF0sZS5zZXRDdHgodCksZS5fd2ViQ0xHTD1uZXcgYS5XZWJDTEdMKHQpLGUuaW5pRyhhcmd1bWVudHMpLGUpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQ/KHQ9bC5XZWJDTEdMVXRpbHMuZ2V0V2ViR0xDb250ZXh0RnJvbUNhbnZhcyhhcmd1bWVudHNbMF0pLGUuc2V0Q3R4KHQpLGUuX3dlYkNMR0w9bmV3IGEuV2ViQ0xHTCh0KSxlLmluaUcoYXJndW1lbnRzKSxlKToodD1sLldlYkNMR0xVdGlscy5nZXRXZWJHTENvbnRleHRGcm9tQ2FudmFzKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikse2FudGlhbGlhczohMX0pLGUuc2V0Q3R4KHQpLGUuX3dlYkNMR0w9bmV3IGEuV2ViQ0xHTCh0KSxlLmluaShhcmd1bWVudHMpKX1PYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLldlYkNMR0xGb3I9dm9pZCAwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCk7ci5ncHVmb3I9aTt2YXIgYT1lKFwiLi9XZWJDTEdMLmNsYXNzXCIpLGw9ZShcIi4vV2ViQ0xHTFV0aWxzLmNsYXNzXCIpLHU9ci5XZWJDTEdMRm9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5rZXJuZWxzPXt9LHRoaXMudmVydGV4RnJhZ21lbnRQcm9ncmFtcz17fSx0aGlzLl9hcmdzPXt9LHRoaXMuX2FyZ3NWYWx1ZXM9e30sdGhpcy5jYWxsZWRBcmdzPXt9LHRoaXMuX3dlYkNMR0w9bnVsbCx0aGlzLl9nbD1udWxsfXJldHVybiBzKGUsW3trZXk6XCJkZWZpbmVPdXRwdXRUZW1wTW9kZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspbltyXT1udWxsIT1lW3JdJiZmdW5jdGlvbihlLHQpe3ZhciBuPSExO2Zvcih2YXIgciBpbiB0KWlmKFwiaW5kaWNlc1wiIT09cil7dmFyIG89ci5zcGxpdChcIiBcIik7aWYoby5sZW5ndGg+MCYmb1sxXT09PWUpe249ITA7YnJlYWt9fXJldHVybiBufShlW3JdLHQpO3JldHVybiBufX0se2tleTpcInByZXBhcmVSZXR1cm5Db2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXSxyPWUubWF0Y2gobmV3IFJlZ0V4cCgvcmV0dXJuLiokL2dtKSksbz0ocj1yWzBdLnJlcGxhY2UoXCJyZXR1cm4gXCIsXCJcIikpLm1hdGNoKG5ldyBSZWdFeHAoL1xcWy9nbSkpO2lmKG51bGwhPW8mJm8ubGVuZ3RoPj0xKXtyPXIuc3BsaXQoXCJbXCIpWzFdLnNwbGl0KFwiXVwiKVswXTtmb3IodmFyIGk9XCJcIixzPTAsYT0wO2E8ci5sZW5ndGg7YSsrKVwiLFwiPT09clthXSYmMD09PXM/KG4ucHVzaChpKSxpPVwiXCIpOmkrPXJbYV0sXCIoXCI9PT1yW2FdJiZzKyssXCIpXCI9PT1yW2FdJiZzLS07bi5wdXNoKGkpfWVsc2Ugbi5wdXNoKHIucmVwbGFjZSgvOyQvZ20sXCJcIikpO2Zvcih2YXIgbD1cIlwiLHU9MDt1PHQubGVuZ3RoO3UrKyl7dmFyIGM9ITE7Zm9yKHZhciBoIGluIHRoaXMuX2FyZ3MpaWYoXCJpbmRpY2VzXCIhPT1oKXt2YXIgZj1oLnNwbGl0KFwiIFwiKTtpZihmWzFdPT09dFt1XSl7dmFyIGQ9ZlswXS5tYXRjaChuZXcgUmVnRXhwKFwiZmxvYXQ0XCIsXCJnbVwiKSk7bCs9bnVsbCE9ZCYmZC5sZW5ndGg+MD9cIm91dFwiK3UrXCJfZmxvYXQ0ID0gXCIrblt1XStcIjtcXG5cIjpcIm91dFwiK3UrXCJfZmxvYXQgPSBcIituW3VdK1wiO1xcblwiLGM9ITA7YnJlYWt9fSExPT09YyYmKGwrPVwib3V0XCIrdStcIl9mbG9hdDQgPSBcIituW3VdK1wiO1xcblwiKX1yZXR1cm4gbH19LHtrZXk6XCJhZGRLZXJuZWxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbmZpZyxuPXRbMF0scj10WzFdaW5zdGFuY2VvZiBBcnJheT90WzFdOlt0WzFdXSxvPXRbMl0saT10WzNdLHM9dGhpcy5fd2ViQ0xHTC5jcmVhdGVLZXJuZWwoKSxhPVtdO2Zvcih2YXIgbCBpbiB0aGlzLl9hcmdzKXt2YXIgdT1sLnNwbGl0KFwiIFwiKVsxXTtpZih2b2lkIDAhPT11JiZudWxsIT09dSl7dmFyIGM9KG8raSkubWF0Y2gobmV3IFJlZ0V4cCh1LnJlcGxhY2UoL1xcW1xcZC4qLyxcIlwiKSxcImdtXCIpKTtcImluZGljZXNcIiE9PWwmJm51bGwhPWMmJmMubGVuZ3RoPjAmJihzLmluX3ZhbHVlc1t1XT17fSxhLnB1c2gobC5yZXBsYWNlKFwiKmF0dHIgXCIsXCIqIFwiKS5yZXBsYWNlKC9cXFtcXGQuKi8sXCJcIikpKX19aT1cInZvaWQgbWFpbihcIithLnRvU3RyaW5nKCkrXCIpIHt2ZWMyIFwiK24rXCIgPSBnZXRfZ2xvYmFsX2lkKCk7XCIraS5yZXBsYWNlKC9yZXR1cm4uKiQvZ20sdGhpcy5wcmVwYXJlUmV0dXJuQ29kZShpLHIpKStcIn1cIixzLm5hbWU9ZS5uYW1lLHMudmlld1NvdXJjZT1udWxsIT1lLnZpZXdTb3VyY2UmJmUudmlld1NvdXJjZSxzLnNldEtlcm5lbFNvdXJjZShpLG8pLHMub3V0cHV0PXIscy5vdXRwdXRUZW1wTW9kZXM9dGhpcy5kZWZpbmVPdXRwdXRUZW1wTW9kZXMocix0aGlzLl9hcmdzKSxzLmVuYWJsZWQ9ITAscy5kcmF3TW9kZT1udWxsIT1lLmRyYXdNb2RlP2UuZHJhd01vZGU6NCxzLmRlcHRoVGVzdD1udWxsPT1lLmRlcHRoVGVzdHx8ZS5kZXB0aFRlc3Qscy5ibGVuZD1udWxsIT1lLmJsZW5kJiZlLmJsZW5kLHMuYmxlbmRFcXVhdGlvbj1udWxsIT1lLmJsZW5kRXF1YXRpb24/ZS5ibGVuZEVxdWF0aW9uOlwiRlVOQ19BRERcIixzLmJsZW5kU3JjTW9kZT1udWxsIT1lLmJsZW5kU3JjTW9kZT9lLmJsZW5kU3JjTW9kZTpcIlNSQ19BTFBIQVwiLHMuYmxlbmREc3RNb2RlPW51bGwhPWUuYmxlbmREc3RNb2RlP2UuYmxlbmREc3RNb2RlOlwiT05FX01JTlVTX1NSQ19BTFBIQVwiLHRoaXMua2VybmVsc1tPYmplY3Qua2V5cyh0aGlzLmtlcm5lbHMpLmxlbmd0aC50b1N0cmluZygpXT1zfX0se2tleTpcImFkZEdyYXBoaWNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbmZpZyxuPVtudWxsXSxyPXZvaWQgMCxvPXZvaWQgMCxpPXZvaWQgMCxzPXZvaWQgMDs1PT09dC5sZW5ndGg/KG49dFswXWluc3RhbmNlb2YgQXJyYXk/dFswXTpbdFswXV0scj10WzFdLG89dFsyXSxpPXRbM10scz10WzRdKToocj10WzBdLG89dFsxXSxpPXRbMl0scz10WzNdKTt2YXIgYT10aGlzLl93ZWJDTEdMLmNyZWF0ZVZlcnRleEZyYWdtZW50UHJvZ3JhbSgpLGw9W10sdT1bXTtmb3IodmFyIGMgaW4gdGhpcy5fYXJncyl7dmFyIGg9Yy5zcGxpdChcIiBcIilbMV07aWYodm9pZCAwIT09aCYmbnVsbCE9PWgpe3ZhciBmPShyK28pLm1hdGNoKG5ldyBSZWdFeHAoaC5yZXBsYWNlKC9cXFtcXGQuKi8sXCJcIiksXCJnbVwiKSk7XCJpbmRpY2VzXCIhPT1jJiZudWxsIT1mJiZmLmxlbmd0aD4wJiYoYS5pbl92ZXJ0ZXhfdmFsdWVzW2hdPXt9LGwucHVzaChjLnJlcGxhY2UoL1xcW1xcZC4qLyxcIlwiKSkpfX1mb3IodmFyIGQgaW4gdGhpcy5fYXJncyl7dmFyIGc9ZC5zcGxpdChcIiBcIilbMV07aWYodm9pZCAwIT09ZyYmbnVsbCE9PWcpe3ZhciBfPShpK3MpLm1hdGNoKG5ldyBSZWdFeHAoZy5yZXBsYWNlKC9cXFtcXGQuKi8sXCJcIiksXCJnbVwiKSk7XCJpbmRpY2VzXCIhPT1kJiZudWxsIT1fJiZfLmxlbmd0aD4wJiYoYS5pbl9mcmFnbWVudF92YWx1ZXNbZ109e30sdS5wdXNoKGQucmVwbGFjZSgvXFxbXFxkLiovLFwiXCIpKSl9fW89XCJ2b2lkIG1haW4oXCIrbC50b1N0cmluZygpK1wiKSB7XCIrbytcIn1cIixzPVwidm9pZCBtYWluKFwiK3UudG9TdHJpbmcoKStcIikge1wiK3MucmVwbGFjZSgvcmV0dXJuLiokL2dtLHRoaXMucHJlcGFyZVJldHVybkNvZGUocyxuKSkrXCJ9XCIsYS5uYW1lPWUubmFtZSxhLnZpZXdTb3VyY2U9bnVsbCE9ZS52aWV3U291cmNlJiZlLnZpZXdTb3VyY2UsYS5zZXRWZXJ0ZXhTb3VyY2UobyxyKSxhLnNldEZyYWdtZW50U291cmNlKHMsaSksYS5vdXRwdXQ9bixhLm91dHB1dFRlbXBNb2Rlcz10aGlzLmRlZmluZU91dHB1dFRlbXBNb2RlcyhuLHRoaXMuX2FyZ3MpLGEuZW5hYmxlZD0hMCxhLmRyYXdNb2RlPW51bGwhPWUuZHJhd01vZGU/ZS5kcmF3TW9kZTo0LGEuZGVwdGhUZXN0PW51bGw9PWUuZGVwdGhUZXN0fHxlLmRlcHRoVGVzdCxhLmJsZW5kPW51bGw9PWUuYmxlbmR8fGUuYmxlbmQsYS5ibGVuZEVxdWF0aW9uPW51bGwhPWUuYmxlbmRFcXVhdGlvbj9lLmJsZW5kRXF1YXRpb246XCJGVU5DX0FERFwiLGEuYmxlbmRTcmNNb2RlPW51bGwhPWUuYmxlbmRTcmNNb2RlP2UuYmxlbmRTcmNNb2RlOlwiU1JDX0FMUEhBXCIsYS5ibGVuZERzdE1vZGU9bnVsbCE9ZS5ibGVuZERzdE1vZGU/ZS5ibGVuZERzdE1vZGU6XCJPTkVfTUlOVVNfU1JDX0FMUEhBXCIsdGhpcy52ZXJ0ZXhGcmFnbWVudFByb2dyYW1zW09iamVjdC5rZXlzKHRoaXMudmVydGV4RnJhZ21lbnRQcm9ncmFtcykubGVuZ3RoLnRvU3RyaW5nKCldPWF9fSx7a2V5OlwiY2hlY2tBcmdcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9W10sbz0hMSxpPSExO2Zvcih2YXIgcyBpbiB0KWZvcih2YXIgYSBpbiB0W3NdLmluX3ZhbHVlcylpZih0W3NdLmluX3ZhbHVlc1thXSxhPT09ZSl7ci5wdXNoKHRbc10pO2JyZWFrfWZvcih2YXIgbCBpbiBuKXtmb3IodmFyIHUgaW4gbltsXS5pbl92ZXJ0ZXhfdmFsdWVzKWlmKG5bbF0uaW5fdmVydGV4X3ZhbHVlc1t1XSx1PT09ZSl7bz0hMDticmVha31mb3IodmFyIGMgaW4gbltsXS5pbl9mcmFnbWVudF92YWx1ZXMpaWYobltsXS5pbl9mcmFnbWVudF92YWx1ZXNbY10sYz09PWUpe2k9ITA7YnJlYWt9fXJldHVybnt1c2VkSW5WZXJ0ZXg6byx1c2VkSW5GcmFnbWVudDppLGtlcm5lbFByOnJ9fX0se2tleTpcImZpbGxBcmdcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3dlYkNMR0wuZmlsbEJ1ZmZlcih0aGlzLl9hcmdzVmFsdWVzW2VdLnRleHR1cmVEYXRhLHQsdGhpcy5fYXJnc1ZhbHVlc1tlXS5mQnVmZmVyKSx0aGlzLl93ZWJDTEdMLmZpbGxCdWZmZXIodGhpcy5fYXJnc1ZhbHVlc1tlXS50ZXh0dXJlRGF0YVRlbXAsdCx0aGlzLl9hcmdzVmFsdWVzW2VdLmZCdWZmZXJUZW1wKX19LHtrZXk6XCJnZXRBbGxBcmdzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXJnc1ZhbHVlc319LHtrZXk6XCJhZGRBcmdcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9hcmdzW2VdPW51bGx9fSx7a2V5OlwiZ2V0R1BVRm9yQXJnXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXshMT09PXRoaXMuY2FsbGVkQXJncy5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXMuY2FsbGVkQXJnc1tlXT1bXSksLTE9PT10aGlzLmNhbGxlZEFyZ3NbZV0uaW5kZXhPZih0KSYmdGhpcy5jYWxsZWRBcmdzW2VdLnB1c2godCksITE9PT10LmNhbGxlZEFyZ3MuaGFzT3duUHJvcGVydHkoZSkmJih0LmNhbGxlZEFyZ3NbZV09W10pLC0xPT09dC5jYWxsZWRBcmdzW2VdLmluZGV4T2YodGhpcykmJnQuY2FsbGVkQXJnc1tlXS5wdXNoKHRoaXMpO2Zvcih2YXIgbiBpbiB0Ll9hcmdzKXt2YXIgcj1uLnNwbGl0KFwiIFwiKVsxXTtpZihyPT09ZSl7dGhpcy5fYXJnc1tuXT10Ll9hcmdzW25dLHRoaXMuX2FyZ3NWYWx1ZXNbcl09dC5fYXJnc1ZhbHVlc1tyXTticmVha319fX0se2tleTpcInNldEFyZ1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKFwiaW5kaWNlc1wiPT09ZSl0aGlzLnNldEluZGljZXModCk7ZWxzZSBmb3IodmFyIG8gaW4gdGhpcy5fYXJncyl7dmFyIGk9by5zcGxpdChcIiBcIilbMV07aWYodm9pZCAwIT09aSYmaS5yZXBsYWNlKC9cXFtcXGQuKi8sXCJcIik9PT1lKXtpIT09ZSYmKGU9aSk7dmFyIHM9ITE7aWYobnVsbCE9by5tYXRjaCgvXFwqL2dtKSl7dmFyIGE9dGhpcy5jaGVja0FyZyhlLHRoaXMua2VybmVscyx0aGlzLnZlcnRleEZyYWdtZW50UHJvZ3JhbXMpLGw9XCJTQU1QTEVSXCI7ITA9PT1hLnVzZWRJblZlcnRleCYmMD09PWEua2VybmVsUHIubGVuZ3RoJiYhMT09PWEudXNlZEluRnJhZ21lbnQmJihsPVwiQVRUUklCVVRFXCIpO3ZhciB1PW8uc3BsaXQoXCIqXCIpWzBdLnRvVXBwZXJDYXNlKCk7dm9pZCAwIT09ciYmbnVsbCE9PXImJih1PXIpLHZvaWQgMCE9PXQmJm51bGwhPT10PygoITE9PT10aGlzLl9hcmdzVmFsdWVzLmhhc093blByb3BlcnR5KGUpfHwhMD09PXRoaXMuX2FyZ3NWYWx1ZXMuaGFzT3duUHJvcGVydHkoZSkmJm51bGw9PXRoaXMuX2FyZ3NWYWx1ZXNbZV0pJiYodGhpcy5fYXJnc1ZhbHVlc1tlXT10aGlzLl93ZWJDTEdMLmNyZWF0ZUJ1ZmZlcih1LCExLGwpLHRoaXMuX2FyZ3NWYWx1ZXNbZV0uYXJndW1lbnQ9ZSxzPSEwKSx0aGlzLl9hcmdzVmFsdWVzW2VdLndyaXRlQnVmZmVyKHQsITEsbikpOnRoaXMuX2FyZ3NWYWx1ZXNbZV09bnVsbH1lbHNlIHZvaWQgMCE9PXQmJm51bGwhPT10JiYodGhpcy5fYXJnc1ZhbHVlc1tlXT10KSxzPSEwO2lmKCEwPT09cyYmITA9PT10aGlzLmNhbGxlZEFyZ3MuaGFzT3duUHJvcGVydHkoZSkpZm9yKHZhciBjPTA7Yzx0aGlzLmNhbGxlZEFyZ3NbZV0ubGVuZ3RoO2MrKyl0aGlzLmNhbGxlZEFyZ3NbZV1bY10uX2FyZ3NWYWx1ZXNbZV09dGhpcy5fYXJnc1ZhbHVlc1tlXTticmVha319cmV0dXJuIHR9fSx7a2V5OlwicmVhZEFyZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl93ZWJDTEdMLnJlYWRCdWZmZXIodGhpcy5fYXJnc1ZhbHVlc1tlXSl9fSx7a2V5Olwic2V0SW5kaWNlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuQ0xHTF9idWZmZXJJbmRpY2VzPXRoaXMuX3dlYkNMR0wuY3JlYXRlQnVmZmVyKFwiRkxPQVRcIiwhMSxcIlZFUlRFWF9JTkRFWFwiKSx0aGlzLkNMR0xfYnVmZmVySW5kaWNlcy53cml0ZUJ1ZmZlcihlKX19LHtrZXk6XCJnZXRDdHhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93ZWJDTEdMLmdldENvbnRleHQoKX19LHtrZXk6XCJzZXRDdHhcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9nbD1lfX0se2tleTpcImdldFdlYkNMR0xcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93ZWJDTEdMfX0se2tleTpcIm9uUHJlUHJvY2Vzc0tlcm5lbFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5rZXJuZWxzW2VdLm9ucHJlPXR9fSx7a2V5Olwib25Qb3N0UHJvY2Vzc0tlcm5lbFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5rZXJuZWxzW2VdLm9ucG9zdD10fX0se2tleTpcImVuYWJsZUtlcm5lbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMua2VybmVsc1tcIjBcInxlLnRvU3RyaW5nKCldLmVuYWJsZWQ9ITB9fSx7a2V5OlwiZGlzYWJsZUtlcm5lbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMua2VybmVsc1tcIjBcInxlLnRvU3RyaW5nKCldLmVuYWJsZWQ9ITF9fSx7a2V5OlwiZ2V0S2VybmVsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMua2VybmVscylpZih0PT09ZSlyZXR1cm4gdGhpcy5rZXJuZWxzW3RdO3JldHVybiBudWxsfX0se2tleTpcImdldEFsbEtlcm5lbHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtlcm5lbHN9fSx7a2V5Olwib25QcmVQcm9jZXNzR3JhcGhpY1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy52ZXJ0ZXhGcmFnbWVudFByb2dyYW1zW2VdLm9ucHJlPXR9fSx7a2V5Olwib25Qb3N0UHJvY2Vzc0dyYXBoaWNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMudmVydGV4RnJhZ21lbnRQcm9ncmFtc1tlXS5vbnBvc3Q9dH19LHtrZXk6XCJlbmFibGVHcmFwaGljXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy52ZXJ0ZXhGcmFnbWVudFByb2dyYW1zW1wiMFwifGUudG9TdHJpbmcoKV0uZW5hYmxlZD0hMH19LHtrZXk6XCJkaXNhYmxlR3JhcGhpY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudmVydGV4RnJhZ21lbnRQcm9ncmFtc1tcIjBcInxlLnRvU3RyaW5nKCldLmVuYWJsZWQ9ITF9fSx7a2V5OlwiZ2V0VmVydGV4RnJhZ21lbnRQcm9ncmFtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMudmVydGV4RnJhZ21lbnRQcm9ncmFtcylpZih0PT09ZSlyZXR1cm4gdGhpcy52ZXJ0ZXhGcmFnbWVudFByb2dyYW1zW3RdO3JldHVybiBudWxsfX0se2tleTpcImdldEFsbFZlcnRleEZyYWdtZW50UHJvZ3JhbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVydGV4RnJhZ21lbnRQcm9ncmFtc319LHtrZXk6XCJwcm9jZXNzS2VybmVsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2lmKCEwPT09ZS5lbmFibGVkKXtpZih2b2lkIDAhPT1uJiZudWxsIT09biYmITA9PT1uJiYodGhpcy5hcnJNYWtlQ29weT1bXSksITA9PT1lLmRlcHRoVGVzdD90aGlzLl9nbC5lbmFibGUodGhpcy5fZ2wuREVQVEhfVEVTVCk6dGhpcy5fZ2wuZGlzYWJsZSh0aGlzLl9nbC5ERVBUSF9URVNUKSwhMD09PWUuYmxlbmQ/dGhpcy5fZ2wuZW5hYmxlKHRoaXMuX2dsLkJMRU5EKTp0aGlzLl9nbC5kaXNhYmxlKHRoaXMuX2dsLkJMRU5EKSx0aGlzLl9nbC5ibGVuZEZ1bmModGhpcy5fZ2xbZS5ibGVuZFNyY01vZGVdLHRoaXMuX2dsW2UuYmxlbmREc3RNb2RlXSksdGhpcy5fZ2wuYmxlbmRFcXVhdGlvbih0aGlzLl9nbFtlLmJsZW5kRXF1YXRpb25dKSx2b2lkIDAhPT1lLm9ucHJlJiZudWxsIT09ZS5vbnByZSYmZS5vbnByZSgpLHZvaWQgMD09PXR8fG51bGw9PT10fHwhMD09PXQpe2Zvcih2YXIgcj0hMSxvPTA7bzxlLm91dHB1dC5sZW5ndGg7bysrKWlmKG51bGwhPWUub3V0cHV0W29dJiYhMD09PWUub3V0cHV0VGVtcE1vZGVzW29dKXtyPSEwO2JyZWFrfSEwPT09cj8odGhpcy5fd2ViQ0xHTC5lbnF1ZXVlTkRSYW5nZUtlcm5lbChlLGwuV2ViQ0xHTFV0aWxzLmdldE91dHB1dEJ1ZmZlcnMoZSx0aGlzLl9hcmdzVmFsdWVzKSwhMCx0aGlzLl9hcmdzVmFsdWVzKSx0aGlzLmFyck1ha2VDb3B5LnB1c2goZSkpOnRoaXMuX3dlYkNMR0wuZW5xdWV1ZU5EUmFuZ2VLZXJuZWwoZSxsLldlYkNMR0xVdGlscy5nZXRPdXRwdXRCdWZmZXJzKGUsdGhpcy5fYXJnc1ZhbHVlcyksITEsdGhpcy5fYXJnc1ZhbHVlcyl9ZWxzZSB0aGlzLl93ZWJDTEdMLmVucXVldWVORFJhbmdlS2VybmVsKGUsbC5XZWJDTEdMVXRpbHMuZ2V0T3V0cHV0QnVmZmVycyhlLHRoaXMuX2FyZ3NWYWx1ZXMpLCExLHRoaXMuX2FyZ3NWYWx1ZXMpO3ZvaWQgMCE9PWUub25wb3N0JiZudWxsIT09ZS5vbnBvc3QmJmUub25wb3N0KCksdm9pZCAwIT09biYmbnVsbCE9PW4mJiEwPT09biYmdGhpcy5wcm9jZXNzQ29waWVzKCl9fX0se2tleTpcInByb2Nlc3NDb3BpZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMuYXJyTWFrZUNvcHkubGVuZ3RoO3QrKyl0aGlzLl93ZWJDTEdMLmNvcHkodGhpcy5hcnJNYWtlQ29weVt0XSxsLldlYkNMR0xVdGlscy5nZXRPdXRwdXRCdWZmZXJzKHRoaXMuYXJyTWFrZUNvcHlbdF0sdGhpcy5fYXJnc1ZhbHVlcykpfX0se2tleTpcInByb2Nlc3NLZXJuZWxzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5hcnJNYWtlQ29weT1bXTtmb3IodmFyIHQgaW4gdGhpcy5rZXJuZWxzKXRoaXMucHJvY2Vzc0tlcm5lbCh0aGlzLmtlcm5lbHNbdF0sZSk7dGhpcy5wcm9jZXNzQ29waWVzKCl9fSx7a2V5OlwicHJvY2Vzc0dyYXBoaWNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIG4gaW4gdGhpcy52ZXJ0ZXhGcmFnbWVudFByb2dyYW1zKXt2YXIgcj10aGlzLnZlcnRleEZyYWdtZW50UHJvZ3JhbXNbbl07aWYoITA9PT1yLmVuYWJsZWQpe3ZhciBvPXZvaWQgMCE9PWUmJm51bGwhPT1lfHx2b2lkIDA9PT10aGlzLkNMR0xfYnVmZmVySW5kaWNlc3x8bnVsbD09PXRoaXMuQ0xHTF9idWZmZXJJbmRpY2VzP3RoaXMuX2FyZ3NWYWx1ZXNbZV06dGhpcy5DTEdMX2J1ZmZlckluZGljZXM7aWYodm9pZCAwIT09byYmbnVsbCE9PW8mJm8ubGVuZ3RoPjApeyEwPT09ci5kZXB0aFRlc3Q/dGhpcy5fZ2wuZW5hYmxlKHRoaXMuX2dsLkRFUFRIX1RFU1QpOnRoaXMuX2dsLmRpc2FibGUodGhpcy5fZ2wuREVQVEhfVEVTVCksITA9PT1yLmJsZW5kP3RoaXMuX2dsLmVuYWJsZSh0aGlzLl9nbC5CTEVORCk6dGhpcy5fZ2wuZGlzYWJsZSh0aGlzLl9nbC5CTEVORCksdGhpcy5fZ2wuYmxlbmRGdW5jKHRoaXMuX2dsW3IuYmxlbmRTcmNNb2RlXSx0aGlzLl9nbFtyLmJsZW5kRHN0TW9kZV0pLHRoaXMuX2dsLmJsZW5kRXF1YXRpb24odGhpcy5fZ2xbci5ibGVuZEVxdWF0aW9uXSksdm9pZCAwIT09ci5vbnByZSYmbnVsbCE9PXIub25wcmUmJnIub25wcmUoKTtmb3IodmFyIGk9ITEscz0wO3M8ci5vdXRwdXQubGVuZ3RoO3MrKylpZihudWxsIT1yLm91dHB1dFtzXSYmITA9PT1yLm91dHB1dFRlbXBNb2Rlc1tzXSl7aT0hMDticmVha30hMD09PWk/KHRoaXMuX3dlYkNMR0wuZW5xdWV1ZVZlcnRleEZyYWdtZW50UHJvZ3JhbShyLG8sci5kcmF3TW9kZSxsLldlYkNMR0xVdGlscy5nZXRPdXRwdXRCdWZmZXJzKHIsdGhpcy5fYXJnc1ZhbHVlcyksITAsdGhpcy5fYXJnc1ZhbHVlcyksdC5wdXNoKHIpKTp0aGlzLl93ZWJDTEdMLmVucXVldWVWZXJ0ZXhGcmFnbWVudFByb2dyYW0ocixvLHIuZHJhd01vZGUsbC5XZWJDTEdMVXRpbHMuZ2V0T3V0cHV0QnVmZmVycyhyLHRoaXMuX2FyZ3NWYWx1ZXMpLCExLHRoaXMuX2FyZ3NWYWx1ZXMpLHZvaWQgMCE9PXIub25wb3N0JiZudWxsIT09ci5vbnBvc3QmJnIub25wb3N0KCl9fX1mb3IodmFyIGE9MDthPHQubGVuZ3RoO2ErKyl0aGlzLl93ZWJDTEdMLmNvcHkodFthXSxsLldlYkNMR0xVdGlscy5nZXRPdXRwdXRCdWZmZXJzKHRbYV0sdGhpcy5fYXJnc1ZhbHVlcykpfX0se2tleTpcImluaVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzWzBdLHQ9dm9pZCAwLG49dm9pZCAwLHI9dm9pZCAwO2UubGVuZ3RoPjM/KHRoaXMuX2FyZ3M9ZVswXSx0PWVbMV0sbj1lWzJdLHI9ZVszXSk6KHRoaXMuX2FyZ3M9ZVswXSx0PWVbMV0sbj1cIkZMT0FUXCIscj1lWzJdKTt2YXIgbz0wO2Zvcih2YXIgaSBpbiB0aGlzLl9hcmdzKXt2YXIgcz10aGlzLl9hcmdzW2ldO3RoaXMuc2V0QXJnKGkuc3BsaXQoXCIgXCIpWzFdLHMpLDA9PT1vJiYocyBpbnN0YW5jZW9mIEFycmF5fHxzIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHxzIGluc3RhbmNlb2YgVWludDhBcnJheXx8cyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpJiYobz1zLmxlbmd0aCl9cmV0dXJuXCJGTE9BVFwiPT09bj90aGlzLmFkZEFyZyhcImZsb2F0KiByZXN1bHRcIik6dGhpcy5hZGRBcmcoXCJmbG9hdDQqIHJlc3VsdFwiKSx0aGlzLnNldEFyZyhcInJlc3VsdFwiLG5ldyBGbG9hdDMyQXJyYXkobyksbnVsbCxuKSx0aGlzLmFkZEtlcm5lbCh7dHlwZTpcIktFUk5FTFwiLG5hbWU6XCJTSU1QTEVfS0VSTkVMXCIsdmlld1NvdXJjZTohMSxjb25maWc6W3QsW1wicmVzdWx0XCJdLFwiXCIscl19KSx0aGlzLnByb2Nlc3NLZXJuZWxzKCksdGhpcy5fd2ViQ0xHTC5yZWFkQnVmZmVyKHRoaXMuX2FyZ3NWYWx1ZXMucmVzdWx0KX19LHtrZXk6XCJpbmlHXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl93ZWJDTEdMLmdldENvbnRleHQoKS5kZXB0aEZ1bmModGhpcy5fd2ViQ0xHTC5nZXRDb250ZXh0KCkuTEVRVUFMKSx0aGlzLl93ZWJDTEdMLmdldENvbnRleHQoKS5jbGVhckRlcHRoKDEpO3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLl9hcmdzPWVbMV07Zm9yKHZhciB0PTI7dDxlLmxlbmd0aDt0KyspXCJLRVJORUxcIj09PWVbdF0udHlwZT90aGlzLmFkZEtlcm5lbChlW3RdKTpcIkdSQVBISUNcIj09PWVbdF0udHlwZSYmdGhpcy5hZGRHcmFwaGljKGVbdF0pO2Zvcih2YXIgbiBpbiB0aGlzLl9hcmdzKXt2YXIgcj10aGlzLl9hcmdzW25dO1wiaW5kaWNlc1wiPT09bj9udWxsIT09ciYmdGhpcy5zZXRJbmRpY2VzKHIpOnRoaXMuc2V0QXJnKG4uc3BsaXQoXCIgXCIpWzFdLHIpfX19XSksZX0oKTt0LldlYkNMR0xGb3I9dSxuLmV4cG9ydHMuV2ViQ0xHTEZvcj11LHQuZ3B1Zm9yPWksbi5leHBvcnRzLmdwdWZvcj1pfSkuY2FsbCh0aGlzLHZvaWQgMCE9PXQ/dDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi9XZWJDTEdMLmNsYXNzXCI6MSxcIi4vV2ViQ0xHTFV0aWxzLmNsYXNzXCI6NX1dLDQ6W2Z1bmN0aW9uKGUsbixyKXsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5XZWJDTEdMS2VybmVsPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHM9ZShcIi4vV2ViQ0xHTFV0aWxzLmNsYXNzXCIpLGE9ci5XZWJDTEdMS2VybmVsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4scil7byh0aGlzLGUpLHRoaXMuX2dsPXQ7dmFyIGk9dGhpcy5fZ2wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KHRoaXMuX2dsLkZSQUdNRU5UX1NIQURFUix0aGlzLl9nbC5ISUdIX0ZMT0FUKTt0aGlzLl9wcmVjaXNpb249MCE9PWkucHJlY2lzaW9uP1wicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcblxcbnByZWNpc2lvbiBoaWdocCBpbnQ7XFxuXFxuXCI6XCJwcmVjaXNpb24gbG93cCBmbG9hdDtcXG5cXG5wcmVjaXNpb24gbG93cCBpbnQ7XFxuXFxuXCI7dmFyIHM9dGhpcy5fZ2wuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfZHJhd19idWZmZXJzXCIpO3RoaXMuX21heERyYXdCdWZmZXJzPW51bGwsbnVsbCE9cyYmKHRoaXMuX21heERyYXdCdWZmZXJzPXRoaXMuX2dsLmdldFBhcmFtZXRlcihzLk1BWF9EUkFXX0JVRkZFUlNfV0VCR0wpKSx0aGlzLm5hbWU9XCJcIix0aGlzLmVuYWJsZWQ9ITAsdGhpcy5kZXB0aFRlc3Q9bnVsbCx0aGlzLmJsZW5kPW51bGwsdGhpcy5ibGVuZFNyY01vZGU9bnVsbCx0aGlzLmJsZW5kRHN0TW9kZT1udWxsLHRoaXMuYmxlbmRFcXVhdGlvbj1udWxsLHRoaXMub25wcmU9bnVsbCx0aGlzLm9ucG9zdD1udWxsLHRoaXMudmlld1NvdXJjZT0hMSx0aGlzLmluX3ZhbHVlcz17fSx0aGlzLm91dHB1dD1udWxsLHRoaXMub3V0cHV0VGVtcE1vZGVzPW51bGwsdGhpcy5mQnVmZmVyPW51bGwsdGhpcy5mQnVmZmVyVGVtcD1udWxsLHRoaXMuZkJ1ZmZlckxlbmd0aD0wLHRoaXMuZkJ1ZmZlckNvdW50PTAsdm9pZCAwIT09biYmbnVsbCE9PW4mJnRoaXMuc2V0S2VybmVsU291cmNlKG4scil9cmV0dXJuIGkoZSxbe2tleTpcInNldEtlcm5lbFNvdXJjZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcHJlY2lzaW9uK1wiYXR0cmlidXRlIHZlYzMgYVZlcnRleFBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMiBnbG9iYWxfaWQ7XFxudm9pZCBtYWluKHZvaWQpIHtcXG5nbF9Qb3NpdGlvbiA9IHZlYzQoYVZlcnRleFBvc2l0aW9uLCAxLjApO1xcbmdsb2JhbF9pZCA9IGFWZXJ0ZXhQb3NpdGlvbi54eSowLjUrMC41O1xcbn1cXG5cIix0PVwiI2V4dGVuc2lvbiBHTF9FWFRfZHJhd19idWZmZXJzIDogcmVxdWlyZVxcblwiK3RoaXMuX3ByZWNpc2lvbitzLldlYkNMR0xVdGlscy5saW5lc19mcmFnbWVudF9hdHRycyh0aGlzLmluX3ZhbHVlcykrXCJ2YXJ5aW5nIHZlYzIgZ2xvYmFsX2lkO1xcbnVuaWZvcm0gZmxvYXQgdUJ1ZmZlcldpZHRoO3ZlYzIgZ2V0X2dsb2JhbF9pZCgpIHtcXG5yZXR1cm4gZ2xvYmFsX2lkO1xcbn1cXG5cIitzLldlYkNMR0xVdGlscy5nZXRfZ2xvYmFsX2lkM19HTFNMRnVuY3Rpb25TdHJpbmcoKStzLldlYkNMR0xVdGlscy5nZXRfZ2xvYmFsX2lkMl9HTFNMRnVuY3Rpb25TdHJpbmcoKSt0aGlzLl9oZWFkK1widm9pZCBtYWluKHZvaWQpIHtcXG5cIitzLldlYkNMR0xVdGlscy5saW5lc19kcmF3QnVmZmVyc0luaXQoOCkrdGhpcy5fc291cmNlK3MuV2ViQ0xHTFV0aWxzLmxpbmVzX2RyYXdCdWZmZXJzV3JpdGUoOCkrXCJ9XFxuXCI7dGhpcy5rZXJuZWw9dGhpcy5fZ2wuY3JlYXRlUHJvZ3JhbSgpLChuZXcgcy5XZWJDTEdMVXRpbHMpLmNyZWF0ZVNoYWRlcih0aGlzLl9nbCxcIldFQkNMR0xcIixlLHQsdGhpcy5rZXJuZWwpLHRoaXMuYXR0cl9WZXJ0ZXhQb3M9dGhpcy5fZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5rZXJuZWwsXCJhVmVydGV4UG9zaXRpb25cIiksdGhpcy51QnVmZmVyV2lkdGg9dGhpcy5fZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMua2VybmVsLFwidUJ1ZmZlcldpZHRoXCIpO2Zvcih2YXIgbiBpbiB0aGlzLmluX3ZhbHVlcyl7dmFyIHI9e2Zsb2F0NF9mcm9tU2FtcGxlcjpcIlNBTVBMRVJcIixmbG9hdF9mcm9tU2FtcGxlcjpcIlNBTVBMRVJcIixmbG9hdDpcIlVOSUZPUk1cIixmbG9hdDQ6XCJVTklGT1JNXCIsbWF0NDpcIlVOSUZPUk1cIn1bdGhpcy5pbl92YWx1ZXNbbl0udHlwZV07cy5XZWJDTEdMVXRpbHMuY2hlY2tBcmdOYW1lSW5pdGlhbGl6YXRpb24odGhpcy5pbl92YWx1ZXMsbiksdGhpcy5pbl92YWx1ZXNbbl0ubG9jYXRpb249W3RoaXMuX2dsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmtlcm5lbCxuLnJlcGxhY2UoL1xcW1xcZC4qLyxcIlwiKSldLHRoaXMuaW5fdmFsdWVzW25dLmV4cGVjdGVkTW9kZT1yfXJldHVyblwiVkVSVEVYIFBST0dSQU1cXG5cIitlK1wiXFxuIEZSQUdNRU5UIFBST0dSQU1cXG5cIit0fS5iaW5kKHRoaXMpLHI9ZS5zcGxpdChcIilcIilbMF0uc3BsaXQoXCIoXCIpWzFdLnNwbGl0KFwiLFwiKSxvPTAsaT1yLmxlbmd0aDtvPGk7bysrKWlmKG51bGwhPT1yW29dLm1hdGNoKC9cXCovZ20pKXt2YXIgYT1yW29dLnNwbGl0KFwiKlwiKVsxXS50cmltKCk7cy5XZWJDTEdMVXRpbHMuY2hlY2tBcmdOYW1lSW5pdGlhbGl6YXRpb24odGhpcy5pbl92YWx1ZXMsYSksbnVsbCE9cltvXS5tYXRjaCgvZmxvYXQ0L2dtKT90aGlzLmluX3ZhbHVlc1thXS50eXBlPVwiZmxvYXQ0X2Zyb21TYW1wbGVyXCI6bnVsbCE9cltvXS5tYXRjaCgvZmxvYXQvZ20pJiYodGhpcy5pbl92YWx1ZXNbYV0udHlwZT1cImZsb2F0X2Zyb21TYW1wbGVyXCIpfWVsc2UgaWYoXCJcIiE9PXJbb10pe3ZhciBsPXJbb10uc3BsaXQoXCIgXCIpWzFdLnRyaW0oKTtmb3IodmFyIHUgaW4gdGhpcy5pbl92YWx1ZXMpaWYodS5yZXBsYWNlKC9cXFtcXGQuKi8sXCJcIik9PT1sKXtsPXU7YnJlYWt9cy5XZWJDTEdMVXRpbHMuY2hlY2tBcmdOYW1lSW5pdGlhbGl6YXRpb24odGhpcy5pbl92YWx1ZXMsbCksbnVsbCE9cltvXS5tYXRjaCgvZmxvYXQ0L2dtKT90aGlzLmluX3ZhbHVlc1tsXS50eXBlPVwiZmxvYXQ0XCI6bnVsbCE9cltvXS5tYXRjaCgvZmxvYXQvZ20pP3RoaXMuaW5fdmFsdWVzW2xdLnR5cGU9XCJmbG9hdFwiOm51bGwhPXJbb10ubWF0Y2goL21hdDQvZ20pJiYodGhpcy5pbl92YWx1ZXNbbF0udHlwZT1cIm1hdDRcIil9dGhpcy5faGVhZD12b2lkIDAhPT10JiZudWxsIT09dD90OlwiXCIsdGhpcy5faGVhZD10aGlzLl9oZWFkLnJlcGxhY2UoL1xcclxcbi9naSxcIlwiKS5yZXBsYWNlKC9cXHIvZ2ksXCJcIikucmVwbGFjZSgvXFxuL2dpLFwiXCIpLHRoaXMuX2hlYWQ9cy5XZWJDTEdMVXRpbHMucGFyc2VTb3VyY2UodGhpcy5faGVhZCx0aGlzLmluX3ZhbHVlcyksdGhpcy5fc291cmNlPWUucmVwbGFjZSgvXFxyXFxuL2dpLFwiXCIpLnJlcGxhY2UoL1xcci9naSxcIlwiKS5yZXBsYWNlKC9cXG4vZ2ksXCJcIiksdGhpcy5fc291cmNlPXRoaXMuX3NvdXJjZS5yZXBsYWNlKC9eXFx3KiBcXHcqXFwoW1xcd1xcc1xcKixdKlxcKSB7L2dpLFwiXCIpLnJlcGxhY2UoL30oXFxzfFxcdCkqJC9naSxcIlwiKSx0aGlzLl9zb3VyY2U9cy5XZWJDTEdMVXRpbHMucGFyc2VTb3VyY2UodGhpcy5fc291cmNlLHRoaXMuaW5fdmFsdWVzKTt2YXIgYz1uKCk7ITA9PT10aGlzLnZpZXdTb3VyY2UmJihjb25zb2xlLmxvZyhcIiVjIEtFUk5FTDogXCIrdGhpcy5uYW1lLFwiZm9udC1zaXplOiAyMHB4OyBjb2xvcjogYmx1ZVwiKSxjb25zb2xlLmxvZyhcIiVjIFdFQkNMR0wgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIixcImNvbG9yOiBncmF5XCIpLGNvbnNvbGUubG9nKFwiJWMgXCIrdCtlLFwiY29sb3I6IGdyYXlcIiksY29uc29sZS5sb2coXCIlYyBUUkFOU0xBVEVEIFdFQkdMIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLFwiY29sb3I6IGRhcmtncmF5XCIpLGNvbnNvbGUubG9nKFwiJWMgXCIrYyxcImNvbG9yOiBkYXJrZ3JheVwiKSl9fV0pLGV9KCk7dC5XZWJDTEdMS2VybmVsPWEsbi5leHBvcnRzLldlYkNMR0xLZXJuZWw9YX0pLmNhbGwodGhpcyx2b2lkIDAhPT10P3Q6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vV2ViQ0xHTFV0aWxzLmNsYXNzXCI6NX1dLDU6W2Z1bmN0aW9uKGUsbixyKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxpPXIuV2ViQ0xHTFV0aWxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3QodGhpcyxlKX1yZXR1cm4gbyhlLFt7a2V5OlwibG9hZFF1YWRcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9dm9pZCAwPT09dHx8bnVsbD09PXQ/LjU6dCxvPXZvaWQgMD09PW58fG51bGw9PT1uPy41Om47dGhpcy52ZXJ0ZXhBcnJheT1bLXIsLW8sMCxyLC1vLDAscixvLDAsLXIsbywwXSx0aGlzLnRleHR1cmVBcnJheT1bMCwwLDAsMSwwLDAsMSwxLDAsMCwxLDBdLHRoaXMuaW5kZXhBcnJheT1bMCwxLDIsMCwyLDNdO3ZhciBpPXt9O3JldHVybiBpLnZlcnRleEFycmF5PXRoaXMudmVydGV4QXJyYXksaS50ZXh0dXJlQXJyYXk9dGhpcy50ZXh0dXJlQXJyYXksaS5pbmRleEFycmF5PXRoaXMuaW5kZXhBcnJheSxpfX0se2tleTpcImNyZWF0ZVNoYWRlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIsbyl7dmFyIGk9ITEscz0hMSxhPWZ1bmN0aW9uKHQsbil7Y29uc29sZS5sb2codCk7Zm9yKHZhciByPVtdLG89dC5zcGxpdChcIlxcblwiKSxpPTAscz1vLmxlbmd0aDtpPHM7aSsrKWlmKG51bGwhPW9baV0ubWF0Y2goL15FUlJPUi9naW0pKXt2YXIgYT1vW2ldLnNwbGl0KFwiOlwiKSxsPXBhcnNlSW50KGFbMl0pO3IucHVzaChbbCxvW2ldXSl9dmFyIHU9ZS5nZXRTaGFkZXJTb3VyY2Uobikuc3BsaXQoXCJcXG5cIik7dS51bnNoaWZ0KFwiXCIpO2Zvcih2YXIgYz0wLGg9dS5sZW5ndGg7YzxoO2MrKyl7Zm9yKHZhciBmPSExLGQ9XCJcIixnPTAsXz1yLmxlbmd0aDtnPF87ZysrKWlmKGM9PT1yW2ddWzBdKXtmPSEwLGQ9cltnXVsxXTticmVha30hMT09PWY/Y29uc29sZS5sb2coXCIlY1wiK2MrXCIgJWNcIit1W2NdLFwiY29sb3I6YmxhY2tcIixcImNvbG9yOmJsdWVcIik6Y29uc29sZS5sb2coXCIlY+KWuuKWuiVjXCIrYytcIiAlY1wiK3VbY10rXCJcXG4lY1wiK2QsXCJjb2xvcjpyZWRcIixcImNvbG9yOmJsYWNrXCIsXCJjb2xvcjpibHVlXCIsXCJjb2xvcjpyZWRcIil9fS5iaW5kKHRoaXMpLGw9ZS5jcmVhdGVTaGFkZXIoZS5WRVJURVhfU0hBREVSKTtpZihlLnNoYWRlclNvdXJjZShsLG4pLGUuY29tcGlsZVNoYWRlcihsKSxlLmdldFNoYWRlclBhcmFtZXRlcihsLGUuQ09NUElMRV9TVEFUVVMpKWUuYXR0YWNoU2hhZGVyKG8sbCksaT0hMDtlbHNle3ZhciB1PWUuZ2V0U2hhZGVySW5mb0xvZyhsKTtjb25zb2xlLmxvZyhcIiVjXCIrdCtcIiBFUlJPUiAodmVydGV4IHByb2dyYW0pXCIsXCJjb2xvcjpyZWRcIiksdm9pZCAwIT09dSYmbnVsbCE9PXUmJmEodSxsKX12YXIgYz1lLmNyZWF0ZVNoYWRlcihlLkZSQUdNRU5UX1NIQURFUik7aWYoZS5zaGFkZXJTb3VyY2UoYyxyKSxlLmNvbXBpbGVTaGFkZXIoYyksZS5nZXRTaGFkZXJQYXJhbWV0ZXIoYyxlLkNPTVBJTEVfU1RBVFVTKSllLmF0dGFjaFNoYWRlcihvLGMpLHM9ITA7ZWxzZXt2YXIgaD1lLmdldFNoYWRlckluZm9Mb2coYyk7Y29uc29sZS5sb2coXCIlY1wiK3QrXCIgRVJST1IgKGZyYWdtZW50IHByb2dyYW0pXCIsXCJjb2xvcjpyZWRcIiksdm9pZCAwIT09aCYmbnVsbCE9PWgmJmEoaCxjKX1pZighMD09PWkmJiEwPT09cyl7aWYoZS5saW5rUHJvZ3JhbShvKSxlLmdldFByb2dyYW1QYXJhbWV0ZXIobyxlLkxJTktfU1RBVFVTKSlyZXR1cm4hMDtjb25zb2xlLmxvZyhcIkVycm9yIHNoYWRlciBwcm9ncmFtIFwiK3QrXCI6XFxuIFwiKTt2YXIgZj1lLmdldFByb2dyYW1JbmZvTG9nKG8pO3JldHVybiB2b2lkIDAhPT1mJiZudWxsIT09ZiYmY29uc29sZS5sb2coZiksITF9cmV0dXJuITF9fSx7a2V5OlwicGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVsxLzI1NSwxLzI1NSwxLzI1NSwwXSxuPWUscj10aGlzLmZyYWN0KDI1NSpuKSxvPXRoaXMuZnJhY3QoMjU1KnIpLGk9W24scixvLHRoaXMuZnJhY3QoMjU1Km8pXSxzPVtpWzFdKnRbMF0saVsyXSp0WzFdLGlbM10qdFsyXSxpWzNdKnRbM11dO3JldHVybltpWzBdLXNbMF0saVsxXS1zWzFdLGlbMl0tc1syXSxpWzNdLXNbM11dfX0se2tleTpcInVucGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVsxLDEvMjU1LDEvNjUwMjUsMS8xNjU4MTM3NV07cmV0dXJuIHRoaXMuZG90NChlLHQpfX1dLFt7a2V5OlwiZ2V0V2ViR0xDb250ZXh0RnJvbUNhbnZhc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49bnVsbDtpZihudWxsPT1uKXRyeXtuPXZvaWQgMD09PXR8fG51bGw9PT10P2UuZ2V0Q29udGV4dChcIndlYmdsXCIpOmUuZ2V0Q29udGV4dChcIndlYmdsXCIsdCksY29uc29sZS5sb2cobnVsbD09bj9cIm5vIHdlYmdsXCI6XCJ1c2luZyB3ZWJnbFwiKX1jYXRjaChlKXtuPW51bGx9aWYobnVsbD09bil0cnl7bj12b2lkIDA9PT10fHxudWxsPT09dD9lLmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIik6ZS5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsdCksY29uc29sZS5sb2cobnVsbD09bj9cIm5vIGV4cGVyaW1lbnRhbC13ZWJnbFwiOlwidXNpbmcgZXhwZXJpbWVudGFsLXdlYmdsXCIpfWNhdGNoKGUpe249bnVsbH1yZXR1cm4gbnVsbD09biYmKG49ITEpLG59fSx7a2V5OlwiZ2V0VWludDhBcnJheUZyb21IVE1MSW1hZ2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTt0LndpZHRoPWUud2lkdGgsdC5oZWlnaHQ9ZS5oZWlnaHQ7dmFyIG49dC5nZXRDb250ZXh0KFwiMmRcIik7cmV0dXJuIG4uZHJhd0ltYWdlKGUsMCwwKSxuLmdldEltYWdlRGF0YSgwLDAsZS53aWR0aCxlLmhlaWdodCkuZGF0YX19LHtrZXk6XCJkb3Q0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVswXSp0WzBdK2VbMV0qdFsxXStlWzJdKnRbMl0rZVszXSp0WzNdfX0se2tleTpcImZyYWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9lLU1hdGguZmxvb3IoZSk6ZS1NYXRoLmNlaWwoZSl9fSx7a2V5OlwicGFja0dMU0xGdW5jdGlvblN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJ2ZWM0IHBhY2sgKGZsb2F0IGRlcHRoKSB7XFxuY29uc3QgdmVjNCBiaWFzID0gdmVjNCgxLjAgLyAyNTUuMCxcXG4xLjAgLyAyNTUuMCxcXG4xLjAgLyAyNTUuMCxcXG4wLjApO1xcbmZsb2F0IHIgPSBkZXB0aDtcXG5mbG9hdCBnID0gZnJhY3QociAqIDI1NS4wKTtcXG5mbG9hdCBiID0gZnJhY3QoZyAqIDI1NS4wKTtcXG5mbG9hdCBhID0gZnJhY3QoYiAqIDI1NS4wKTtcXG52ZWM0IGNvbG91ciA9IHZlYzQociwgZywgYiwgYSk7XFxucmV0dXJuIGNvbG91ciAtIChjb2xvdXIueXp3dyAqIGJpYXMpO1xcbn1cXG5cIn19LHtrZXk6XCJ1bnBhY2tHTFNMRnVuY3Rpb25TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiZmxvYXQgdW5wYWNrICh2ZWM0IGNvbG91cikge1xcbmNvbnN0IHZlYzQgYml0U2hpZnRzID0gdmVjNCgxLjAsXFxuMS4wIC8gMjU1LjAsXFxuMS4wIC8gKDI1NS4wICogMjU1LjApLFxcbjEuMCAvICgyNTUuMCAqIDI1NS4wICogMjU1LjApKTtcXG5yZXR1cm4gZG90KGNvbG91ciwgYml0U2hpZnRzKTtcXG59XFxuXCJ9fSx7a2V5OlwiZ2V0T3V0cHV0QnVmZmVyc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49bnVsbDtpZih2b2lkIDAhPT1lLm91dHB1dCYmbnVsbCE9PWUub3V0cHV0KWlmKG49W10sbnVsbCE9ZS5vdXRwdXRbMF0pZm9yKHZhciByPTA7cjxlLm91dHB1dC5sZW5ndGg7cisrKW5bcl09dFtlLm91dHB1dFtyXV07ZWxzZSBuPW51bGw7cmV0dXJuIG59fSx7a2V5OlwicGFyc2VTb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj1uZXcgUmVnRXhwKG4rXCJcXFxcWyg/IVxcXFxkKS4qP1xcXFxdXCIsXCJnbVwiKSxvPWUubWF0Y2gocik7aWYobnVsbCE9bylmb3IodmFyIGk9MCxzPW8ubGVuZ3RoO2k8cztpKyspe3ZhciBhPW5ldyBSZWdFeHAoXCJgYGAoc3xcXHQpKmdsLipcIitvW2ldK1wiLipgYGBbXmBgYChzfFxcdCkqZ2xdXCIsXCJnbVwiKTtpZihudWxsPT1lLm1hdGNoKGEpKXt2YXIgbD1vW2ldLnNwbGl0KFwiW1wiKVswXSx1PW9baV0uc3BsaXQoXCJbXCIpWzFdLnNwbGl0KFwiXVwiKVswXTtlPXtmbG9hdDRfZnJvbVNhbXBsZXI6ZS5yZXBsYWNlKGwrXCJbXCIrdStcIl1cIixcInRleHR1cmUyRChcIitsK1wiLFwiK3UrXCIpXCIpLGZsb2F0X2Zyb21TYW1wbGVyOmUucmVwbGFjZShsK1wiW1wiK3UrXCJdXCIsXCJ0ZXh0dXJlMkQoXCIrbCtcIixcIit1K1wiKS54XCIpLGZsb2F0NF9mcm9tQXR0cjplLnJlcGxhY2UobCtcIltcIit1K1wiXVwiLGwpLGZsb2F0X2Zyb21BdHRyOmUucmVwbGFjZShsK1wiW1wiK3UrXCJdXCIsbCl9W3Rbbl0udHlwZV19fX1yZXR1cm4gZT1lLnJlcGxhY2UoL2BgYChcXHN8XFx0KSpnbC9naSxcIlwiKS5yZXBsYWNlKC9gYGAvZ2ksXCJcIikucmVwbGFjZSgvOy9naSxcIjtcXG5cIikucmVwbGFjZSgvfS9naSxcIn1cXG5cIikucmVwbGFjZSgvey9naSxcIntcXG5cIil9fSx7a2V5OlwibGluZXNfdmVydGV4X2F0dHJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtmb3IodmFyIG4gaW4gZSl0Kz17ZmxvYXQ0X2Zyb21TYW1wbGVyOlwidW5pZm9ybSBzYW1wbGVyMkQgXCIrbitcIjtcIixmbG9hdF9mcm9tU2FtcGxlcjpcInVuaWZvcm0gc2FtcGxlcjJEIFwiK24rXCI7XCIsZmxvYXQ0X2Zyb21BdHRyOlwiYXR0cmlidXRlIHZlYzQgXCIrbitcIjtcIixmbG9hdF9mcm9tQXR0cjpcImF0dHJpYnV0ZSBmbG9hdCBcIituK1wiO1wiLGZsb2F0OlwidW5pZm9ybSBmbG9hdCBcIituK1wiO1wiLGZsb2F0NDpcInVuaWZvcm0gdmVjNCBcIituK1wiO1wiLG1hdDQ6XCJ1bmlmb3JtIG1hdDQgXCIrbitcIjtcIn1bZVtuXS50eXBlXStcIlxcblwiO3JldHVybiB0fX0se2tleTpcImxpbmVzX2ZyYWdtZW50X2F0dHJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtmb3IodmFyIG4gaW4gZSl0Kz17ZmxvYXQ0X2Zyb21TYW1wbGVyOlwidW5pZm9ybSBzYW1wbGVyMkQgXCIrbitcIjtcIixmbG9hdF9mcm9tU2FtcGxlcjpcInVuaWZvcm0gc2FtcGxlcjJEIFwiK24rXCI7XCIsZmxvYXQ6XCJ1bmlmb3JtIGZsb2F0IFwiK24rXCI7XCIsZmxvYXQ0OlwidW5pZm9ybSB2ZWM0IFwiK24rXCI7XCIsbWF0NDpcInVuaWZvcm0gbWF0NCBcIituK1wiO1wifVtlW25dLnR5cGVdK1wiXFxuXCI7cmV0dXJuIHR9fSx7a2V5OlwibGluZXNfZHJhd0J1ZmZlcnNJbml0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwiXCIsbj0wLHI9ZTtuPHI7bisrKXQrPVwiZmxvYXQgb3V0XCIrbitcIl9mbG9hdCA9IC05OTkuOTk5ODk7XFxudmVjNCBvdXRcIituK1wiX2Zsb2F0NDtcXG5cIjtyZXR1cm4gdH19LHtrZXk6XCJsaW5lc19kcmF3QnVmZmVyc1dyaXRlSW5pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1cIlwiLG49MCxyPWU7bjxyO24rKyl0Kz1cImxheW91dChsb2NhdGlvbiA9IFwiK24rXCIpIG91dCB2ZWM0IG91dENvbFwiK24rXCI7XFxuXCI7cmV0dXJuIHR9fSx7a2V5OlwibGluZXNfZHJhd0J1ZmZlcnNXcml0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1cIlwiLG49MCxyPWU7bjxyO24rKyl0Kz1cImlmKG91dFwiK24rXCJfZmxvYXQgIT0gLTk5OS45OTk4OSkgZ2xfRnJhZ0RhdGFbXCIrbitcIl0gPSB2ZWM0KG91dFwiK24rXCJfZmxvYXQsMC4wLDAuMCwxLjApO1xcbiBlbHNlIGdsX0ZyYWdEYXRhW1wiK24rXCJdID0gb3V0XCIrbitcIl9mbG9hdDQ7XFxuXCI7cmV0dXJuIHR9fSx7a2V5OlwiY2hlY2tBcmdOYW1lSW5pdGlhbGl6YXRpb25cIix2YWx1ZTpmdW5jdGlvbihlLHQpeyExPT09ZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKGVbdF09e3R5cGU6bnVsbCxleHBlY3RlZE1vZGU6bnVsbCxsb2NhdGlvbjpudWxsfSl9fSx7a2V5OlwiZ2V0X2dsb2JhbF9pZDNfR0xTTEZ1bmN0aW9uU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cInZlYzIgZ2V0X2dsb2JhbF9pZChmbG9hdCBpZCwgZmxvYXQgYnVmZmVyV2lkdGgsIGZsb2F0IGdlb21ldHJ5TGVuZ3RoKSB7XFxuZmxvYXQgdGV4ZWxTaXplID0gMS4wL2J1ZmZlcldpZHRoO2Zsb2F0IG51bSA9IChpZCpnZW9tZXRyeUxlbmd0aCkvYnVmZmVyV2lkdGg7ZmxvYXQgY29sdW1uID0gZnJhY3QobnVtKSsodGV4ZWxTaXplLzIuMCk7ZmxvYXQgcm93ID0gKGZsb29yKG51bSkvYnVmZmVyV2lkdGgpKyh0ZXhlbFNpemUvMi4wKTtyZXR1cm4gdmVjMihjb2x1bW4sIHJvdyk7fVxcblwifX0se2tleTpcImdldF9nbG9iYWxfaWQyX0dMU0xGdW5jdGlvblN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJ2ZWMyIGdldF9nbG9iYWxfaWQodmVjMiBpZCwgZmxvYXQgYnVmZmVyV2lkdGgpIHtcXG5mbG9hdCB0ZXhlbFNpemUgPSAxLjAvYnVmZmVyV2lkdGg7ZmxvYXQgY29sdW1uID0gKGlkLngvYnVmZmVyV2lkdGgpKyh0ZXhlbFNpemUvMi4wKTtmbG9hdCByb3cgPSAoaWQueS9idWZmZXJXaWR0aCkrKHRleGVsU2l6ZS8yLjApO3JldHVybiB2ZWMyKGNvbHVtbiwgcm93KTt9XFxuXCJ9fV0pLGV9KCk7ZS5XZWJDTEdMVXRpbHM9aSxuLmV4cG9ydHMuV2ViQ0xHTFV0aWxzPWl9KS5jYWxsKHRoaXMsdm9pZCAwIT09dD90OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sNjpbZnVuY3Rpb24oZSxuLHIpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLldlYkNMR0xWZXJ0ZXhGcmFnbWVudFByb2dyYW09dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKFwiLi9XZWJDTEdMVXRpbHMuY2xhc3NcIiksYT1yLldlYkNMR0xWZXJ0ZXhGcmFnbWVudFByb2dyYW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyLGkscyl7byh0aGlzLGUpLHRoaXMuX2dsPXQ7dmFyIGE9dGhpcy5fZ2wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KHRoaXMuX2dsLkZSQUdNRU5UX1NIQURFUix0aGlzLl9nbC5ISUdIX0ZMT0FUKTt0aGlzLl9wcmVjaXNpb249MCE9PWEucHJlY2lzaW9uP1wicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcblxcbnByZWNpc2lvbiBoaWdocCBpbnQ7XFxuXFxuXCI6XCJwcmVjaXNpb24gbG93cCBmbG9hdDtcXG5cXG5wcmVjaXNpb24gbG93cCBpbnQ7XFxuXFxuXCI7dmFyIGw9dGhpcy5fZ2wuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfZHJhd19idWZmZXJzXCIpO3RoaXMuX21heERyYXdCdWZmZXJzPW51bGwsbnVsbCE9bCYmKHRoaXMuX21heERyYXdCdWZmZXJzPXRoaXMuX2dsLmdldFBhcmFtZXRlcihsLk1BWF9EUkFXX0JVRkZFUlNfV0VCR0wpKSx0aGlzLm5hbWU9XCJcIix0aGlzLnZpZXdTb3VyY2U9ITEsdGhpcy5pbl92ZXJ0ZXhfdmFsdWVzPXt9LHRoaXMuaW5fZnJhZ21lbnRfdmFsdWVzPXt9LHRoaXMuX3ZlcnRleFBfcmVhZHk9ITEsdGhpcy5fZnJhZ21lbnRQX3JlYWR5PSExLHRoaXMuX3ZlcnRleEhlYWQ9bnVsbCx0aGlzLl92ZXJ0ZXhTb3VyY2U9bnVsbCx0aGlzLl9mcmFnbWVudEhlYWQ9bnVsbCx0aGlzLl9mcmFnbWVudFNvdXJjZT1udWxsLHRoaXMub3V0cHV0PW51bGwsdGhpcy5vdXRwdXRUZW1wTW9kZXM9bnVsbCx0aGlzLmZCdWZmZXI9bnVsbCx0aGlzLmZCdWZmZXJUZW1wPW51bGwsdGhpcy5kcmF3TW9kZT00LHZvaWQgMCE9PW4mJm51bGwhPT1uJiZ0aGlzLnNldFZlcnRleFNvdXJjZShuLHIpLHZvaWQgMCE9PWkmJm51bGwhPT1pJiZ0aGlzLnNldEZyYWdtZW50U291cmNlKGkscyl9cmV0dXJuIGkoZSxbe2tleTpcImNvbXBpbGVWZXJ0ZXhGcmFnbWVudFNvdXJjZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcHJlY2lzaW9uK1widW5pZm9ybSBmbG9hdCB1T2Zmc2V0O1xcbnVuaWZvcm0gZmxvYXQgdUJ1ZmZlcldpZHRoO1wiK3MuV2ViQ0xHTFV0aWxzLmxpbmVzX3ZlcnRleF9hdHRycyh0aGlzLmluX3ZlcnRleF92YWx1ZXMpK3MuV2ViQ0xHTFV0aWxzLnVucGFja0dMU0xGdW5jdGlvblN0cmluZygpK3MuV2ViQ0xHTFV0aWxzLmdldF9nbG9iYWxfaWQzX0dMU0xGdW5jdGlvblN0cmluZygpK3MuV2ViQ0xHTFV0aWxzLmdldF9nbG9iYWxfaWQyX0dMU0xGdW5jdGlvblN0cmluZygpK3RoaXMuX3ZlcnRleEhlYWQrXCJ2b2lkIG1haW4odm9pZCkge1xcblwiK3RoaXMuX3ZlcnRleFNvdXJjZStcIn1cXG5cIix0PVwiI2V4dGVuc2lvbiBHTF9FWFRfZHJhd19idWZmZXJzIDogcmVxdWlyZVxcblwiK3RoaXMuX3ByZWNpc2lvbitzLldlYkNMR0xVdGlscy5saW5lc19mcmFnbWVudF9hdHRycyh0aGlzLmluX2ZyYWdtZW50X3ZhbHVlcykrcy5XZWJDTEdMVXRpbHMuZ2V0X2dsb2JhbF9pZDNfR0xTTEZ1bmN0aW9uU3RyaW5nKCkrcy5XZWJDTEdMVXRpbHMuZ2V0X2dsb2JhbF9pZDJfR0xTTEZ1bmN0aW9uU3RyaW5nKCkrdGhpcy5fZnJhZ21lbnRIZWFkK1widm9pZCBtYWluKHZvaWQpIHtcXG5cIitzLldlYkNMR0xVdGlscy5saW5lc19kcmF3QnVmZmVyc0luaXQoOCkrdGhpcy5fZnJhZ21lbnRTb3VyY2Urcy5XZWJDTEdMVXRpbHMubGluZXNfZHJhd0J1ZmZlcnNXcml0ZSg4KStcIn1cXG5cIjt0aGlzLnZlcnRleEZyYWdtZW50UHJvZ3JhbT10aGlzLl9nbC5jcmVhdGVQcm9ncmFtKCksKG5ldyBzLldlYkNMR0xVdGlscykuY3JlYXRlU2hhZGVyKHRoaXMuX2dsLFwiV0VCQ0xHTCBWRVJURVggRlJBR01FTlQgUFJPR1JBTVwiLGUsdCx0aGlzLnZlcnRleEZyYWdtZW50UHJvZ3JhbSksdGhpcy51T2Zmc2V0PXRoaXMuX2dsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnZlcnRleEZyYWdtZW50UHJvZ3JhbSxcInVPZmZzZXRcIiksdGhpcy51QnVmZmVyV2lkdGg9dGhpcy5fZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMudmVydGV4RnJhZ21lbnRQcm9ncmFtLFwidUJ1ZmZlcldpZHRoXCIpO2Zvcih2YXIgbiBpbiB0aGlzLmluX3ZlcnRleF92YWx1ZXMpe3ZhciByPXtmbG9hdDRfZnJvbVNhbXBsZXI6XCJTQU1QTEVSXCIsZmxvYXRfZnJvbVNhbXBsZXI6XCJTQU1QTEVSXCIsZmxvYXQ0X2Zyb21BdHRyOlwiQVRUUklCVVRFXCIsZmxvYXRfZnJvbUF0dHI6XCJBVFRSSUJVVEVcIixmbG9hdDpcIlVOSUZPUk1cIixmbG9hdDQ6XCJVTklGT1JNXCIsbWF0NDpcIlVOSUZPUk1cIn1bdGhpcy5pbl92ZXJ0ZXhfdmFsdWVzW25dLnR5cGVdO3MuV2ViQ0xHTFV0aWxzLmNoZWNrQXJnTmFtZUluaXRpYWxpemF0aW9uKHRoaXMuaW5fdmVydGV4X3ZhbHVlcyxuKTt2YXIgbz1cIkFUVFJJQlVURVwiPT09cj90aGlzLl9nbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLnZlcnRleEZyYWdtZW50UHJvZ3JhbSxuKTp0aGlzLl9nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy52ZXJ0ZXhGcmFnbWVudFByb2dyYW0sbi5yZXBsYWNlKC9cXFtcXGQuKi8sXCJcIikpO3RoaXMuaW5fdmVydGV4X3ZhbHVlc1tuXS5sb2NhdGlvbj1bb10sdGhpcy5pbl92ZXJ0ZXhfdmFsdWVzW25dLmV4cGVjdGVkTW9kZT1yfWZvcih2YXIgaSBpbiB0aGlzLmluX2ZyYWdtZW50X3ZhbHVlcyl7dmFyIGE9e2Zsb2F0NF9mcm9tU2FtcGxlcjpcIlNBTVBMRVJcIixmbG9hdF9mcm9tU2FtcGxlcjpcIlNBTVBMRVJcIixmbG9hdDpcIlVOSUZPUk1cIixmbG9hdDQ6XCJVTklGT1JNXCIsbWF0NDpcIlVOSUZPUk1cIn1bdGhpcy5pbl9mcmFnbWVudF92YWx1ZXNbaV0udHlwZV07cy5XZWJDTEdMVXRpbHMuY2hlY2tBcmdOYW1lSW5pdGlhbGl6YXRpb24odGhpcy5pbl9mcmFnbWVudF92YWx1ZXMsaSksdGhpcy5pbl9mcmFnbWVudF92YWx1ZXNbaV0ubG9jYXRpb249W3RoaXMuX2dsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnZlcnRleEZyYWdtZW50UHJvZ3JhbSxpLnJlcGxhY2UoL1xcW1xcZC4qLyxcIlwiKSldLHRoaXMuaW5fZnJhZ21lbnRfdmFsdWVzW2ldLmV4cGVjdGVkTW9kZT1hfXJldHVyblwiVkVSVEVYIFBST0dSQU1cXG5cIitlK1wiXFxuIEZSQUdNRU5UIFBST0dSQU1cXG5cIit0fX0se2tleTpcInNldFZlcnRleFNvdXJjZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPWUuc3BsaXQoXCIpXCIpWzBdLnNwbGl0KFwiKFwiKVsxXS5zcGxpdChcIixcIikscj0wLG89bi5sZW5ndGg7cjxvO3IrKylpZihudWxsIT09bltyXS5tYXRjaCgvXFwqYXR0ci9nbSkpe3ZhciBpPW5bcl0uc3BsaXQoXCIqYXR0clwiKVsxXS50cmltKCk7cy5XZWJDTEdMVXRpbHMuY2hlY2tBcmdOYW1lSW5pdGlhbGl6YXRpb24odGhpcy5pbl92ZXJ0ZXhfdmFsdWVzLGkpLG51bGwhPW5bcl0ubWF0Y2goL2Zsb2F0NC9nbSk/dGhpcy5pbl92ZXJ0ZXhfdmFsdWVzW2ldLnR5cGU9XCJmbG9hdDRfZnJvbUF0dHJcIjpudWxsIT1uW3JdLm1hdGNoKC9mbG9hdC9nbSkmJih0aGlzLmluX3ZlcnRleF92YWx1ZXNbaV0udHlwZT1cImZsb2F0X2Zyb21BdHRyXCIpfWVsc2UgaWYobnVsbCE9PW5bcl0ubWF0Y2goL1xcKi9nbSkpe3ZhciBhPW5bcl0uc3BsaXQoXCIqXCIpWzFdLnRyaW0oKTtzLldlYkNMR0xVdGlscy5jaGVja0FyZ05hbWVJbml0aWFsaXphdGlvbih0aGlzLmluX3ZlcnRleF92YWx1ZXMsYSksbnVsbCE9bltyXS5tYXRjaCgvZmxvYXQ0L2dtKT90aGlzLmluX3ZlcnRleF92YWx1ZXNbYV0udHlwZT1cImZsb2F0NF9mcm9tU2FtcGxlclwiOm51bGwhPW5bcl0ubWF0Y2goL2Zsb2F0L2dtKSYmKHRoaXMuaW5fdmVydGV4X3ZhbHVlc1thXS50eXBlPVwiZmxvYXRfZnJvbVNhbXBsZXJcIil9ZWxzZSBpZihcIlwiIT09bltyXSl7dmFyIGw9bltyXS5zcGxpdChcIiBcIilbMV0udHJpbSgpO2Zvcih2YXIgdSBpbiB0aGlzLmluX3ZlcnRleF92YWx1ZXMpaWYodS5yZXBsYWNlKC9cXFtcXGQuKi8sXCJcIik9PT1sKXtsPXU7YnJlYWt9cy5XZWJDTEdMVXRpbHMuY2hlY2tBcmdOYW1lSW5pdGlhbGl6YXRpb24odGhpcy5pbl92ZXJ0ZXhfdmFsdWVzLGwpLG51bGwhPW5bcl0ubWF0Y2goL2Zsb2F0NC9nbSk/dGhpcy5pbl92ZXJ0ZXhfdmFsdWVzW2xdLnR5cGU9XCJmbG9hdDRcIjpudWxsIT1uW3JdLm1hdGNoKC9mbG9hdC9nbSk/dGhpcy5pbl92ZXJ0ZXhfdmFsdWVzW2xdLnR5cGU9XCJmbG9hdFwiOm51bGwhPW5bcl0ubWF0Y2goL21hdDQvZ20pJiYodGhpcy5pbl92ZXJ0ZXhfdmFsdWVzW2xdLnR5cGU9XCJtYXQ0XCIpfWlmKHRoaXMuX3ZlcnRleEhlYWQ9dm9pZCAwIT09dCYmbnVsbCE9PXQ/dDpcIlwiLHRoaXMuX3ZlcnRleEhlYWQ9dGhpcy5fdmVydGV4SGVhZC5yZXBsYWNlKC9cXHJcXG4vZ2ksXCJcIikucmVwbGFjZSgvXFxyL2dpLFwiXCIpLnJlcGxhY2UoL1xcbi9naSxcIlwiKSx0aGlzLl92ZXJ0ZXhIZWFkPXMuV2ViQ0xHTFV0aWxzLnBhcnNlU291cmNlKHRoaXMuX3ZlcnRleEhlYWQsdGhpcy5pbl92ZXJ0ZXhfdmFsdWVzKSx0aGlzLl92ZXJ0ZXhTb3VyY2U9ZS5yZXBsYWNlKC9cXHJcXG4vZ2ksXCJcIikucmVwbGFjZSgvXFxyL2dpLFwiXCIpLnJlcGxhY2UoL1xcbi9naSxcIlwiKSx0aGlzLl92ZXJ0ZXhTb3VyY2U9dGhpcy5fdmVydGV4U291cmNlLnJlcGxhY2UoL15cXHcqIFxcdypcXChbXFx3XFxzXFwqLF0qXFwpIHsvZ2ksXCJcIikucmVwbGFjZSgvfShcXHN8XFx0KSokL2dpLFwiXCIpLHRoaXMuX3ZlcnRleFNvdXJjZT1zLldlYkNMR0xVdGlscy5wYXJzZVNvdXJjZSh0aGlzLl92ZXJ0ZXhTb3VyY2UsdGhpcy5pbl92ZXJ0ZXhfdmFsdWVzKSx0aGlzLl92ZXJ0ZXhQX3JlYWR5PSEwLCEwPT09dGhpcy5fZnJhZ21lbnRQX3JlYWR5KXt2YXIgYz10aGlzLmNvbXBpbGVWZXJ0ZXhGcmFnbWVudFNvdXJjZSgpOyEwPT09dGhpcy52aWV3U291cmNlJiYoY29uc29sZS5sb2coXCIlYyBWRlA6IFwiK3RoaXMubmFtZSxcImZvbnQtc2l6ZTogMjBweDsgY29sb3I6IGdyZWVuXCIpLGNvbnNvbGUubG9nKFwiJWMgV0VCQ0xHTCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLFwiY29sb3I6IGdyYXlcIiksY29uc29sZS5sb2coXCIlYyBcIit0K2UsXCJjb2xvcjogZ3JheVwiKSxjb25zb2xlLmxvZyhcIiVjIFRSQU5TTEFURUQgV0VCR0wgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsXCJjb2xvcjogZGFya2dyYXlcIiksY29uc29sZS5sb2coXCIlYyBcIitjLFwiY29sb3I6IGRhcmtncmF5XCIpKX19fSx7a2V5Olwic2V0RnJhZ21lbnRTb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1lLnNwbGl0KFwiKVwiKVswXS5zcGxpdChcIihcIilbMV0uc3BsaXQoXCIsXCIpLHI9MCxvPW4ubGVuZ3RoO3I8bztyKyspaWYobnVsbCE9PW5bcl0ubWF0Y2goL1xcKi9nbSkpe3ZhciBpPW5bcl0uc3BsaXQoXCIqXCIpWzFdLnRyaW0oKTtzLldlYkNMR0xVdGlscy5jaGVja0FyZ05hbWVJbml0aWFsaXphdGlvbih0aGlzLmluX2ZyYWdtZW50X3ZhbHVlcyxpKSxudWxsIT1uW3JdLm1hdGNoKC9mbG9hdDQvZ20pP3RoaXMuaW5fZnJhZ21lbnRfdmFsdWVzW2ldLnR5cGU9XCJmbG9hdDRfZnJvbVNhbXBsZXJcIjpudWxsIT1uW3JdLm1hdGNoKC9mbG9hdC9nbSkmJih0aGlzLmluX2ZyYWdtZW50X3ZhbHVlc1tpXS50eXBlPVwiZmxvYXRfZnJvbVNhbXBsZXJcIil9ZWxzZSBpZihcIlwiIT09bltyXSl7dmFyIGE9bltyXS5zcGxpdChcIiBcIilbMV0udHJpbSgpO2Zvcih2YXIgbCBpbiB0aGlzLmluX2ZyYWdtZW50X3ZhbHVlcylpZihsLnJlcGxhY2UoL1xcW1xcZC4qLyxcIlwiKT09PWEpe2E9bDticmVha31zLldlYkNMR0xVdGlscy5jaGVja0FyZ05hbWVJbml0aWFsaXphdGlvbih0aGlzLmluX2ZyYWdtZW50X3ZhbHVlcyxhKSxudWxsIT1uW3JdLm1hdGNoKC9mbG9hdDQvZ20pP3RoaXMuaW5fZnJhZ21lbnRfdmFsdWVzW2FdLnR5cGU9XCJmbG9hdDRcIjpudWxsIT1uW3JdLm1hdGNoKC9mbG9hdC9nbSk/dGhpcy5pbl9mcmFnbWVudF92YWx1ZXNbYV0udHlwZT1cImZsb2F0XCI6bnVsbCE9bltyXS5tYXRjaCgvbWF0NC9nbSkmJih0aGlzLmluX2ZyYWdtZW50X3ZhbHVlc1thXS50eXBlPVwibWF0NFwiKX1pZih0aGlzLl9mcmFnbWVudEhlYWQ9dm9pZCAwIT09dCYmbnVsbCE9PXQ/dDpcIlwiLHRoaXMuX2ZyYWdtZW50SGVhZD10aGlzLl9mcmFnbWVudEhlYWQucmVwbGFjZSgvXFxyXFxuL2dpLFwiXCIpLnJlcGxhY2UoL1xcci9naSxcIlwiKS5yZXBsYWNlKC9cXG4vZ2ksXCJcIiksdGhpcy5fZnJhZ21lbnRIZWFkPXMuV2ViQ0xHTFV0aWxzLnBhcnNlU291cmNlKHRoaXMuX2ZyYWdtZW50SGVhZCx0aGlzLmluX2ZyYWdtZW50X3ZhbHVlcyksdGhpcy5fZnJhZ21lbnRTb3VyY2U9ZS5yZXBsYWNlKC9cXHJcXG4vZ2ksXCJcIikucmVwbGFjZSgvXFxyL2dpLFwiXCIpLnJlcGxhY2UoL1xcbi9naSxcIlwiKSx0aGlzLl9mcmFnbWVudFNvdXJjZT10aGlzLl9mcmFnbWVudFNvdXJjZS5yZXBsYWNlKC9eXFx3KiBcXHcqXFwoW1xcd1xcc1xcKixdKlxcKSB7L2dpLFwiXCIpLnJlcGxhY2UoL30oXFxzfFxcdCkqJC9naSxcIlwiKSx0aGlzLl9mcmFnbWVudFNvdXJjZT1zLldlYkNMR0xVdGlscy5wYXJzZVNvdXJjZSh0aGlzLl9mcmFnbWVudFNvdXJjZSx0aGlzLmluX2ZyYWdtZW50X3ZhbHVlcyksdGhpcy5fZnJhZ21lbnRQX3JlYWR5PSEwLCEwPT09dGhpcy5fdmVydGV4UF9yZWFkeSl7dmFyIHU9dGhpcy5jb21waWxlVmVydGV4RnJhZ21lbnRTb3VyY2UoKTshMD09PXRoaXMudmlld1NvdXJjZSYmKGNvbnNvbGUubG9nKFwiJWMgVkZQOiBcIixcImZvbnQtc2l6ZTogMjBweDsgY29sb3I6IGdyZWVuXCIpLGNvbnNvbGUubG9nKFwiJWMgV0VCQ0xHTCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLFwiY29sb3I6IGdyYXlcIiksY29uc29sZS5sb2coXCIlYyBcIit0K2UsXCJjb2xvcjogZ3JheVwiKSxjb25zb2xlLmxvZyhcIiVjIFRSQU5TTEFURUQgV0VCR0wgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsXCJjb2xvcjogZGFya2dyYXlcIiksY29uc29sZS5sb2coXCIlYyBcIit1LFwiY29sb3I6IGRhcmtncmF5XCIpKX19fV0pLGV9KCk7dC5XZWJDTEdMVmVydGV4RnJhZ21lbnRQcm9ncmFtPWEsbi5leHBvcnRzLldlYkNMR0xWZXJ0ZXhGcmFnbWVudFByb2dyYW09YX0pLmNhbGwodGhpcyx2b2lkIDAhPT10P3Q6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vV2ViQ0xHTFV0aWxzLmNsYXNzXCI6NX1dLDc6W2Z1bmN0aW9uKGUsbixyKXsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZShcIi4vV2ViQ0xHTC5jbGFzc1wiKSxlKFwiLi9XZWJDTEdMQnVmZmVyLmNsYXNzXCIpLGUoXCIuL1dlYkNMR0xGb3IuY2xhc3NcIiksZShcIi4vV2ViQ0xHTEtlcm5lbC5jbGFzc1wiKSxlKFwiLi9XZWJDTEdMVXRpbHMuY2xhc3NcIiksZShcIi4vV2ViQ0xHTFZlcnRleEZyYWdtZW50UHJvZ3JhbS5jbGFzc1wiKSxuLmV4cG9ydHMuV2ViQ0xHTD10LldlYkNMR0w9V2ViQ0xHTCxuLmV4cG9ydHMuV2ViQ0xHTEJ1ZmZlcj10LldlYkNMR0xCdWZmZXI9V2ViQ0xHTEJ1ZmZlcixuLmV4cG9ydHMuV2ViQ0xHTEZvcj10LldlYkNMR0xGb3I9V2ViQ0xHTEZvcixuLmV4cG9ydHMuV2ViQ0xHTEtlcm5lbD10LldlYkNMR0xLZXJuZWw9V2ViQ0xHTEtlcm5lbCxuLmV4cG9ydHMuV2ViQ0xHTFV0aWxzPXQuV2ViQ0xHTFV0aWxzPVdlYkNMR0xVdGlscyxuLmV4cG9ydHMuV2ViQ0xHTFZlcnRleEZyYWdtZW50UHJvZ3JhbT10LldlYkNMR0xWZXJ0ZXhGcmFnbWVudFByb2dyYW09V2ViQ0xHTFZlcnRleEZyYWdtZW50UHJvZ3JhbX0pLmNhbGwodGhpcyx2b2lkIDAhPT10P3Q6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vV2ViQ0xHTC5jbGFzc1wiOjEsXCIuL1dlYkNMR0xCdWZmZXIuY2xhc3NcIjoyLFwiLi9XZWJDTEdMRm9yLmNsYXNzXCI6MyxcIi4vV2ViQ0xHTEtlcm5lbC5jbGFzc1wiOjQsXCIuL1dlYkNMR0xVdGlscy5jbGFzc1wiOjUsXCIuL1dlYkNMR0xWZXJ0ZXhGcmFnbWVudFByb2dyYW0uY2xhc3NcIjo2fV19LHt9LFs3XSl9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwyOltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG4uQXJyYXlHZW5lcmF0b3I9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKFwiLi9VdGlscy5jbGFzc1wiKSxhPW4uQXJyYXlHZW5lcmF0b3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpfXJldHVybiBpKGUsW3trZXk6XCJ2b2x1bWVBcnJheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuYXJyYXlOb2RlRGVzdGluYXRpb249W10sdGhpcy5hcnJheU5vZGVWZXJ0ZXhDb2xvcj1bXSx0aGlzLnZvPWUsdGhpcy52byBpbnN0YW5jZW9mIFN0b3JtVm94ZWxpemF0b3I9PSExKXJldHVybiBhbGVydChcIllvdSBtdXN0IHNlbGVjdCBhIHZveGVsaXphdG9yIG9iamVjdCB3aXRoIGFsYmVkbyBmaWxsbW9kZSBlbmFibGVkLlwiKSwhMTtpZih2b2lkIDA9PT10aGlzLnZvLmltYWdlM0RfVm94ZWxzQ29sb3J8fG51bGw9PT10aGlzLnZvLmltYWdlM0RfVm94ZWxzQ29sb3IpcmV0dXJuIGFsZXJ0KFwiWW91IG11c3Qgc2VsZWN0IGEgdm94ZWxpemF0b3Igb2JqZWN0IHdpdGggYWxiZWRvIGZpbGxtb2RlIGVuYWJsZWQuXCIpLCExO3RoaXMuZGF0YT10aGlzLnZvLmNsZ2xCdWZmX1ZveGVsc0NvbG9yLml0ZW1zWzBdLmluRGF0YTtmb3IodmFyIHQ9MCxuPTAscj10aGlzLmRhdGEubGVuZ3RoLzQ7bjxyO24rKyl7dmFyIG89NCpuO3RoaXMuZGF0YVtvKzNdPjAmJnQrK312YXIgaT0odGhpcy5jdXJyZW50Tm9kZUlkLTEpL3Q7dGhpcy5pbmNyZW1Ob2Rlc0NlbGw9MDt2YXIgcz0tMTt0aGlzLmN1cnJlbnRWb3hlbENlbGw9bnVsbCx0aGlzLkNDWD0wLHRoaXMuQ0NZPTAsdGhpcy5DQ1o9MCx0aGlzLkNDWE1BWD10aGlzLnZvLnJlc29sdXRpb24tMSx0aGlzLkNDWU1BWD10aGlzLnZvLnJlc29sdXRpb24tMSx0aGlzLkNDWk1BWD10aGlzLnZvLnJlc29sdXRpb24tMTtmb3IodmFyIGE9dm9pZCAwLGw9dm9pZCAwLHU9ZnVuY3Rpb24oKXtmb3IoOzspe2lmKHRoaXMuQ0NYPT09dGhpcy5DQ1hNQVgmJnRoaXMuQ0NaPT09dGhpcy5DQ1pNQVgmJnRoaXMuQ0NZPT09dGhpcy5DQ1lNQVgpYnJlYWs7aWYodGhpcy5DQ1g9PT10aGlzLkNDWE1BWCYmdGhpcy5DQ1o9PT10aGlzLkNDWk1BWD8odGhpcy5DQ1g9MCx0aGlzLkNDWj0wLHRoaXMuQ0NZKyspOnRoaXMuQ0NYPT09dGhpcy5DQ1hNQVg/KHRoaXMuQ0NYPTAsdGhpcy5DQ1orKyk6dGhpcy5DQ1grKyx0aGlzLmN1cnJlbnRWb3hlbENlbGw9dGhpcy5DQ1kqKHRoaXMudm8ucmVzb2x1dGlvbip0aGlzLnZvLnJlc29sdXRpb24pK3RoaXMuQ0NaKnRoaXMudm8ucmVzb2x1dGlvbit0aGlzLkNDWCx0aGlzLmRhdGFbNCp0aGlzLmN1cnJlbnRWb3hlbENlbGwrM10+MCYmKHRoaXMuaW5jcmVtTm9kZXNDZWxsKz1pLHRoaXMuaW5jcmVtTm9kZXNDZWxsPj0xKSl7dGhpcy5pbmNyZW1Ob2Rlc0NlbGwtPTE7YnJlYWt9fX0uYmluZCh0aGlzKSxjPTA7Yzx0aGlzLmFycmF5Tm9kZUlkLmxlbmd0aDtjKyspcyE9PXRoaXMuYXJyYXlOb2RlSWRbY10/KHM9dGhpcy5hcnJheU5vZGVJZFtjXSx0aGlzLmluY3JlbU5vZGVzQ2VsbD49MT90aGlzLmluY3JlbU5vZGVzQ2VsbC09MTp1KCksYT0oYT0oYT0kVjMoWzAsMCwwXSkuYWRkKCRWMyhbLXRoaXMudm8uc2l6ZS8yLC10aGlzLnZvLnNpemUvMiwtdGhpcy52by5zaXplLzJdKSkpLmFkZCgkVjMoW3RoaXMudm8uY3MqdGhpcy5DQ1gqMSx0aGlzLnZvLmNzKnRoaXMuQ0NZKjEsdGhpcy52by5jcyoodGhpcy5DQ1pNQVgtdGhpcy5DQ1opKjFdKSkpLmFkZCgkVjMoW3RoaXMudm8uY3MqTWF0aC5yYW5kb20oKSx0aGlzLnZvLmNzKk1hdGgucmFuZG9tKCksdGhpcy52by5jcypNYXRoLnJhbmRvbSgpXSkpLGw9JFYzKFt0aGlzLmRhdGFbNCp0aGlzLmN1cnJlbnRWb3hlbENlbGxdLzI1NSx0aGlzLmRhdGFbNCp0aGlzLmN1cnJlbnRWb3hlbENlbGwrMV0vMjU1LHRoaXMuZGF0YVs0KnRoaXMuY3VycmVudFZveGVsQ2VsbCsyXS8yNTVdKSx0aGlzLmFycmF5Tm9kZURlc3RpbmF0aW9uLnB1c2goYS5lWzBdLGEuZVsxXSxhLmVbMl0sMSksdGhpcy5hcnJheU5vZGVWZXJ0ZXhDb2xvci5wdXNoKGwuZVswXSxsLmVbMV0sbC5lWzJdLDEpKToodGhpcy5hcnJheU5vZGVEZXN0aW5hdGlvbi5wdXNoKGEuZVswXSxhLmVbMV0sYS5lWzJdLDEpLHRoaXMuYXJyYXlOb2RlVmVydGV4Q29sb3IucHVzaChsLmVbMF0sbC5lWzFdLGwuZVsyXSwxKSk7Y29tcF9yZW5kZXJlcl9ub2Rlcy5zZXRBcmcoXCJkZXN0XCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcnJheU5vZGVEZXN0aW5hdGlvbn0uYmluZCh0aGlzKSx0aGlzLnNwbGl0Tm9kZXMpLGNvbXBfcmVuZGVyZXJfbm9kZXMuc2V0QXJnKFwibm9kZVZlcnRleENvbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXlOb2RlVmVydGV4Q29sb3J9LmJpbmQodGhpcyksdGhpcy5zcGxpdE5vZGVzKX19XSxbe2tleTpcInJhbmRvbUFycmF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUuY291bnQ7bisrKVwiZmxvYXRcIj09PWUudHlwZT90LnB1c2goLWUub2Zmc2V0LzIrTWF0aC5yYW5kb20oKSplLm9mZnNldCk6dC5wdXNoKC1lLm9mZnNldC8yK01hdGgucmFuZG9tKCkqZS5vZmZzZXQsLWUub2Zmc2V0LzIrTWF0aC5yYW5kb20oKSplLm9mZnNldCwtZS5vZmZzZXQvMitNYXRoLnJhbmRvbSgpKmUub2Zmc2V0LC1lLm9mZnNldC8yK01hdGgucmFuZG9tKCkqZS5vZmZzZXQpO3JldHVybiB0fX0se2tleTpcIndpZHRoSGVpZ2h0QXJyYXlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj1lLndpZHRoKmUuaGVpZ2h0LHI9ZS5jb3VudC9uLG89MCxpPTAscz0wLGE9dm9pZCAwIT09ZS5zcGFjaW5nJiZudWxsIT09ZS5zcGFjaW5nP2Uuc3BhY2luZzouMDEsbD0wO2w8ZS5jb3VudDtsKyspbz49ciYmKCsraT5lLndpZHRoLTEmJihpPTAscysrKSxvLT1yKSxvKz0xLHQucHVzaChpKmEsMCxzKmEsMSk7cmV0dXJuIHR9fSx7a2V5OlwiZmxvYXQ0QXJyYXlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0wO248ZS5jb3VudDtuKyspdC5wdXNoKGUuZmxvYXQ0WzBdLGUuZmxvYXQ0WzFdLGUuZmxvYXQ0WzJdLGUuZmxvYXQ0WzNdKTtyZXR1cm4gdH19LHtrZXk6XCJzcGhlcmljYWxBcnJheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPXZvaWQgMD09PWU/MTplLnJhZGl1cyxyPTA7cjxlLmNvdW50O3IrKyl7dmFyIG89MzYwKk1hdGgucmFuZG9tKCksaT0xODAqTWF0aC5yYW5kb20oKTt0LnB1c2goTWF0aC5jb3MobykqTWF0aC5hYnMoTWF0aC5zaW4oaSkpKm4sTWF0aC5jb3MoaSkqbipNYXRoLnJhbmRvbSgpLE1hdGguc2luKG8pKk1hdGguYWJzKE1hdGguc2luKGkpKSpuLDEpfXJldHVybiB0fX0se2tleTpcImhlbUFycmF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49dm9pZCAwPT09ZT8xOmUucmFkaXVzLHI9MDtyPGUuY291bnQ7cisrKXt2YXIgbz0obmV3IHMuVXRpbHMpLmdldFZlY3RvcihlLm5vcm1hbFZlY3RvcixlLmRlZ3JlZXMpO3QucHVzaChvLmVbMF0qbixvLmVbMV0qbixvLmVbMl0qbiwxKX1yZXR1cm4gdH19LHtrZXk6XCJpbWFnZUFycmF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXMuVXRpbHMuZ2V0VWludDhBcnJheUZyb21IVE1MSW1hZ2VFbGVtZW50KGUuaW1hZ2UpLG49W10scj0wO3I8ZS5jb3VudDtyKyspe3ZhciBvPTQqcjtuLnB1c2gocGFyc2VGbG9hdCh0W29dLzI1NSkscGFyc2VGbG9hdCh0W28rMV0vMjU1KSxwYXJzZUZsb2F0KHRbbysyXS8yNTUpLHBhcnNlRmxvYXQodFtvKzNdLzI1NSkpfXJldHVybiBufX1dKSxlfSgpO3IuQXJyYXlHZW5lcmF0b3I9YSx0LmV4cG9ydHMuQXJyYXlHZW5lcmF0b3I9YX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi9VdGlscy5jbGFzc1wiOjIyfV0sMzpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLGk9bi5Db21wb25lbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLHRoaXMudHlwZT1udWxsLHRoaXMubm9kZT1udWxsfXJldHVybiBvKGUsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt9fSx7a2V5OlwidGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe319XSksZX0oKTtlLkNvbXBvbmVudD1pLHQuZXhwb3J0cy5Db21wb25lbnQ9aX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDQ6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hdHx8XCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/ZTp0fWZ1bmN0aW9uIHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkobixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxuLkNvbXBvbmVudENvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQ9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksbD1lKFwiLi9Db21wb25lbnQuY2xhc3NcIiksdT1lKFwiLi9Db25zdGFudHNcIiksYz1uLkNvbXBvbmVudENvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KTt2YXIgZT1pKHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcykpO3JldHVybiBlLnR5cGU9dS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLkNPTlRST0xMRVJfVFJBTlNGT1JNX1RBUkdFVCxlLm5vZGU9bnVsbCxlLmdsPW51bGwsZS5jb21wX3RyYW5zZm9ybVRhcmdldD1udWxsLGUuY29tcF9wcm9qZWN0aW9uPW51bGwsZS5fdmVsPS4xLGUuZm9yd2FyZD0wLGUuYmFja3dhcmRFPTAsZS5sZWZ0RT0wLGUucmlnaHRFPTAsZS5mcm9udEU9MCxlLmJhY2tFPTAsZS5sZWZ0QnV0dG9uPTAsZS5taWRkbGVCdXR0b249MCxlLnJpZ2h0QnV0dG9uPTAsZS5sZWZ0QnV0dG9uQWN0aW9uPVwiT1JCSVRcIixlLm1pZGRsZUJ1dHRvbkFjdGlvbj1cIlBBTlwiLGUucmlnaHRCdXR0b25BY3Rpb249XCJaT09NXCIsZS5sYXN0WD0wLGUubGFzdFk9MCxlLmxvY2tSb3RYPSExLGUubG9ja1JvdFk9ITEsZX1yZXR1cm4gcyh0LGwuQ29tcG9uZW50KSxhKHQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLm5vZGU9ZSx0aGlzLmdsPXQsdGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldD10aGlzLm5vZGUuZ2V0Q29tcG9uZW50KHUuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5UUkFOU0ZPUk1fVEFSR0VUKSx0aGlzLmNvbXBfcHJvamVjdGlvbj10aGlzLm5vZGUuZ2V0Q29tcG9uZW50KHUuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5QUk9KRUNUSU9OKX19LHtrZXk6XCJzZXRWZWxvY2l0eVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3ZlbD1lfX0se2tleTpcImxvY2tSb3RYXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmxvY2tSb3RYPSEwfX0se2tleTpcInVubG9ja1JvdFhcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubG9ja1JvdFg9ITF9fSx7a2V5OlwiaXNMb2NrUm90WFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9ja1JvdFh9fSx7a2V5OlwibG9ja1JvdFlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubG9ja1JvdFk9ITB9fSx7a2V5OlwidW5sb2NrUm90WVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5sb2NrUm90WT0hMX19LHtrZXk6XCJpc0xvY2tSb3RZXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NrUm90WX19LHtrZXk6XCJmb3J3YXJkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZvcndhcmQ9MX19LHtrZXk6XCJiYWNrd2FyZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5iYWNrd2FyZEU9MX19LHtrZXk6XCJzdHJhZmVMZWZ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmxlZnRFPTF9fSx7a2V5Olwic3RyYWZlUmlnaHRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmlnaHRFPTF9fSx7a2V5Olwic3RyYWZlRnJvbnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZnJvbnRFPTF9fSx7a2V5Olwic3RyYWZlQmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5iYWNrRT0xfX0se2tleTpcInN0b3BGb3J3YXJkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZvcndhcmQ9MH19LHtrZXk6XCJzdG9wQmFja3dhcmRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuYmFja3dhcmRFPTB9fSx7a2V5Olwic3RvcFN0cmFmZUxlZnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubGVmdEU9MH19LHtrZXk6XCJzdG9wU3RyYWZlUmlnaHRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmlnaHRFPTB9fSx7a2V5Olwic3RvcFN0cmFmZUZyb250XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZyb250RT0wfX0se2tleTpcInN0b3BTdHJhZmVCYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmJhY2tFPTB9fSx7a2V5OlwibW91c2VEb3duXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5sYXN0WD1lLnNjcmVlblgsdGhpcy5sYXN0WT1lLnNjcmVlblksMD09PWUuYnV0dG9uJiYodGhpcy5sZWZ0QnV0dG9uPTEpLDE9PT1lLmJ1dHRvbiYmKHRoaXMubWlkZGxlQnV0dG9uPTEpLDI9PT1lLmJ1dHRvbiYmKHRoaXMucmlnaHRCdXR0b249MSksdGhpcy51cGRhdGVHb2FsKGUpfX0se2tleTpcIm1vdXNlVXBcIix2YWx1ZTpmdW5jdGlvbihlKXswPT09ZS5idXR0b24mJih0aGlzLmxlZnRCdXR0b249MCksMT09PWUuYnV0dG9uJiYodGhpcy5taWRkbGVCdXR0b249MCksMj09PWUuYnV0dG9uJiYodGhpcy5yaWdodEJ1dHRvbj0wKX19LHtrZXk6XCJtb3VzZU1vdmVcIix2YWx1ZTpmdW5jdGlvbihlKXsxIT09dGhpcy5sZWZ0QnV0dG9uJiYxIT09dGhpcy5taWRkbGVCdXR0b258fHRoaXMudXBkYXRlR29hbChlKX19LHtrZXk6XCJpc0xlZnRCdG5BY3RpdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5sZWZ0QnV0dG9ufX0se2tleTpcImlzTWlkZGxlQnRuQWN0aXZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMubWlkZGxlQnV0dG9ufX0se2tleTpcImlzUmlnaHRCdG5BY3RpdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5yaWdodEJ1dHRvbn19LHtrZXk6XCJzZXRMZWZ0QnV0dG9uQWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5sZWZ0QnV0dG9uQWN0aW9uPWV9fSx7a2V5Olwic2V0TWlkZGxlQnV0dG9uQWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5taWRkbGVCdXR0b25BY3Rpb249ZX19LHtrZXk6XCJzZXRSaWdodEJ1dHRvbkFjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucmlnaHRCdXR0b25BY3Rpb249ZX19LHtrZXk6XCJ0aWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9JFYzKFswLDAsMF0pOzE9PT10aGlzLmZvcndhcmQmJih0PXQuYWRkKHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0TWF0cml4KCkuaW52ZXJzZSgpLmdldEZvcndhcmQoKS54KC10aGlzLl92ZWwpKSksMT09PXRoaXMuYmFja3dhcmRFJiYodD10LmFkZCh0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LmdldE1hdHJpeCgpLmludmVyc2UoKS5nZXRGb3J3YXJkKCkueCh0aGlzLl92ZWwpKSksMT09PXRoaXMubGVmdEUmJih0PXQuYWRkKHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0TWF0cml4KCkuaW52ZXJzZSgpLmdldExlZnQoKS54KC10aGlzLl92ZWwpKSksMT09PXRoaXMucmlnaHRFJiYodD10LmFkZCh0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LmdldE1hdHJpeCgpLmludmVyc2UoKS5nZXRMZWZ0KCkueCh0aGlzLl92ZWwpKSksMT09PXRoaXMuYmFja0UmJih0PXQuYWRkKHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0TWF0cml4KCkuaW52ZXJzZSgpLmdldFVwKCkueCgtdGhpcy5fdmVsKSkpLDE9PT10aGlzLmZyb250RSYmKHQ9dC5hZGQodGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldC5nZXRNYXRyaXgoKS5pbnZlcnNlKCkuZ2V0VXAoKS54KHRoaXMuX3ZlbCkpKSx0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LnNldFBvc2l0aW9uVGFyZ2V0KHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0UG9zaXRpb25UYXJnZXQoKS5hZGQodCkpLHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuc2V0UG9zaXRpb25Hb2FsKHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0UG9zaXRpb25Hb2FsKCkuYWRkKHQpKX19LHtrZXk6XCJ1cGRhdGVHb2FsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7MT09PXRoaXMubWlkZGxlQnV0dG9uP1wiUEFOXCI9PT10aGlzLm1pZGRsZUJ1dHRvbkFjdGlvbj90aGlzLm1ha2VQYW4oZSk6XCJPUkJJVFwiPT09dGhpcy5taWRkbGVCdXR0b25BY3Rpb24mJnRoaXMubWFrZU9yYml0KGUpOlwiUEFOXCI9PT10aGlzLmxlZnRCdXR0b25BY3Rpb24/dGhpcy5jb21wX3Byb2plY3Rpb24uZ2V0UHJvamVjdGlvbigpPT09dS5Db25zdGFudHMuUFJPSkVDVElPTl9UWVBFUy5QRVJTUEVDVElWRT90aGlzLm1ha2VPcmJpdChlKTp0aGlzLm1ha2VQYW4oZSk6XCJPUkJJVFwiPT09dGhpcy5sZWZ0QnV0dG9uQWN0aW9uJiZ0aGlzLm1ha2VPcmJpdChlKSx0aGlzLmxhc3RYPWUuc2NyZWVuWCx0aGlzLmxhc3RZPWUuc2NyZWVuWX19LHtrZXk6XCJtYWtlUGFuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciB0PXRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0TWF0cml4KCkuZ2V0TGVmdCgpLngoKHRoaXMubGFzdFgtZS5zY3JlZW5YKSooLjAwNSp0aGlzLmNvbXBfcHJvamVjdGlvbi5nZXRGb3YoKSkpLG49dGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldC5nZXRNYXRyaXgoKS5nZXRVcCgpLngoKHRoaXMubGFzdFktZS5zY3JlZW5ZKSooLS4wMDUqdGhpcy5jb21wX3Byb2plY3Rpb24uZ2V0Rm92KCkpKSxyPXQuYWRkKG4ueCgtMSkpO3RoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuc2V0UG9zaXRpb25Hb2FsKHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0UG9zaXRpb25Hb2FsKCkuYWRkKHIpKSx0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LnNldFBvc2l0aW9uVGFyZ2V0KHRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQuZ2V0UG9zaXRpb25UYXJnZXQoKS5hZGQocikpfX0se2tleTpcIm1ha2VPcmJpdFwiLHZhbHVlOmZ1bmN0aW9uKGUpeyExPT09dGhpcy5sb2NrUm90WSYmKHRoaXMubGFzdFg+ZS5zY3JlZW5YP3RoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQueWF3KC41Ki0odGhpcy5sYXN0WC1lLnNjcmVlblgpKTp0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LnlhdyguNSooZS5zY3JlZW5YLXRoaXMubGFzdFgpKSksITE9PT10aGlzLmxvY2tSb3RYJiYodGhpcy5sYXN0WT5lLnNjcmVlblk/dGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldC5waXRjaCguNSoodGhpcy5sYXN0WS1lLnNjcmVlblkpKTp0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LnBpdGNoKC41Ki0oZS5zY3JlZW5ZLXRoaXMubGFzdFkpKSl9fV0pLHR9KCk7ci5Db21wb25lbnRDb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0PWMsdC5leHBvcnRzLkNvbXBvbmVudENvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQ9Y30pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi9Db21wb25lbnQuY2xhc3NcIjozLFwiLi9Db25zdGFudHNcIjoxMX1dLDU6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hdHx8XCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/ZTp0fWZ1bmN0aW9uIHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkobixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxuLkNvbXBvbmVudEtleWJvYXJkRXZlbnRzPXZvaWQgMDt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLGw9ZShcIi4vQ29tcG9uZW50LmNsYXNzXCIpLHU9ZShcIi4vQ29uc3RhbnRzXCIpLGM9bi5Db21wb25lbnRLZXlib2FyZEV2ZW50cz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7byh0aGlzLHQpO3ZhciBlPWkodGhpcywodC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGUudHlwZT11LkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuS0VZQk9BUkRfRVZFTlRTLGUubm9kZT1udWxsLGUuZ2w9bnVsbCxlLl9vbmtleWRvd249bnVsbCxlLl9vbmtleXVwPW51bGwsZX1yZXR1cm4gcyh0LGwuQ29tcG9uZW50KSxhKHQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLm5vZGU9ZSx0aGlzLmdsPXR9fSx7a2V5Olwib25rZXlkb3duXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25rZXlkb3duPWV9fSx7a2V5Olwib25rZXl1cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ua2V5dXA9ZX19XSksdH0oKTtyLkNvbXBvbmVudEtleWJvYXJkRXZlbnRzPWMsdC5leHBvcnRzLkNvbXBvbmVudEtleWJvYXJkRXZlbnRzPWN9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vQ29tcG9uZW50LmNsYXNzXCI6MyxcIi4vQ29uc3RhbnRzXCI6MTF9XSw2OltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2U6dH1mdW5jdGlvbiBzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksbi5Db21wb25lbnRNb3VzZUV2ZW50cz12b2lkIDA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxsPWUoXCIuL0NvbXBvbmVudC5jbGFzc1wiKSx1PWUoXCIuL0NvbnN0YW50c1wiKSxjPW4uQ29tcG9uZW50TW91c2VFdmVudHM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KTt2YXIgZT1pKHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcykpO3JldHVybiBlLnR5cGU9dS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLk1PVVNFX0VWRU5UUyxlLm5vZGU9bnVsbCxlLmdsPW51bGwsZS5fb25tb3VzZWRvd249bnVsbCxlLl9vbm1vdXNldXA9bnVsbCxlLl9vbm1vdXNlbW92ZT1udWxsLGUuX29ubW91c2V3aGVlbD1udWxsLGV9cmV0dXJuIHModCxsLkNvbXBvbmVudCksYSh0LFt7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5ub2RlPWUsdGhpcy5nbD10fX0se2tleTpcIm9ubW91c2Vkb3duXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25tb3VzZWRvd249ZX19LHtrZXk6XCJvbm1vdXNldXBcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbm1vdXNldXA9ZX19LHtrZXk6XCJvbm1vdXNlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ubW91c2Vtb3ZlPWV9fSx7a2V5Olwib25tb3VzZXdoZWVsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25tb3VzZXdoZWVsPWV9fV0pLHR9KCk7ci5Db21wb25lbnRNb3VzZUV2ZW50cz1jLHQuZXhwb3J0cy5Db21wb25lbnRNb3VzZUV2ZW50cz1jfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7XCIuL0NvbXBvbmVudC5jbGFzc1wiOjMsXCIuL0NvbnN0YW50c1wiOjExfV0sNzpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9ZnVuY3Rpb24gcyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG4uQ29tcG9uZW50UHJvamVjdGlvbj12b2lkIDA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxsPWUoXCIuL0NvbXBvbmVudC5jbGFzc1wiKSx1PWUoXCIuL1N0b3JtTWF0aC5jbGFzc1wiKSxjPWUoXCIuL0NvbnN0YW50c1wiKSxoPW4uQ29tcG9uZW50UHJvamVjdGlvbj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7byh0aGlzLHQpO3ZhciBlPWkodGhpcywodC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGUudHlwZT1jLkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuUFJPSkVDVElPTixlLm5vZGU9bnVsbCxlLmdsPW51bGwsZS5tUHJvamVjdGlvbk1hdHJpeD0kTTE2KFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSksZS5wcm95PWMuQ29uc3RhbnRzLlBST0pFQ1RJT05fVFlQRVMuUEVSU1BFQ1RJVkUsZS5fd2lkdGg9NTEyLGUuX2hlaWdodD01MTIsZS5fZm92PTQ1LGUuX2Zvdk9ydGhvPTIwLGUuX25lYXI9LjEsZS5fZmFyPTFlNCxlLl9uZWFyT3J0aG89LTFlNSxlLl9mYXJPcnRobz0xZTUsZX1yZXR1cm4gcyh0LGwuQ29tcG9uZW50KSxhKHQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLm5vZGU9ZSx0aGlzLmdsPXQsdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9fSx7a2V5OlwiZ2V0TWF0cml4XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tUHJvamVjdGlvbk1hdHJpeH19LHtrZXk6XCJnZXRQcm9qZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm95fX0se2tleTpcInNldFByb2plY3Rpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb3k9ZSx0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX19LHtrZXk6XCJzZXRSZXNvbHV0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl93aWR0aD1lLHRoaXMuX2hlaWdodD10LHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfX0se2tleTpcImdldFJlc29sdXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybnt3aWR0aDp0aGlzLl93aWR0aCxoZWlnaHQ6dGhpcy5faGVpZ2h0fX19LHtrZXk6XCJzZXRGb3ZcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb3k9PT1jLkNvbnN0YW50cy5QUk9KRUNUSU9OX1RZUEVTLlBFUlNQRUNUSVZFP3RoaXMuX2Zvdj1lOnRoaXMuX2Zvdk9ydGhvPWUsdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9fSx7a2V5OlwiZ2V0Rm92XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm95PT09Yy5Db25zdGFudHMuUFJPSkVDVElPTl9UWVBFUy5QRVJTUEVDVElWRT90aGlzLl9mb3Y6dGhpcy5fZm92T3J0aG99fSx7a2V5Olwic2V0TmVhclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucHJveT09PWMuQ29uc3RhbnRzLlBST0pFQ1RJT05fVFlQRVMuUEVSU1BFQ1RJVkU/dGhpcy5fbmVhcj1lOnRoaXMuX25lYXJPcnRobz1lLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfX0se2tleTpcImdldE5lYXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3k9PT1jLkNvbnN0YW50cy5QUk9KRUNUSU9OX1RZUEVTLlBFUlNQRUNUSVZFP3RoaXMuX25lYXI6dGhpcy5fbmVhck9ydGhvfX0se2tleTpcInNldEZhclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucHJveT09PWMuQ29uc3RhbnRzLlBST0pFQ1RJT05fVFlQRVMuUEVSU1BFQ1RJVkU/dGhpcy5fZmFyPWU6dGhpcy5fZmFyT3J0aG89ZSx0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX19LHtrZXk6XCJnZXRGYXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3k9PT1jLkNvbnN0YW50cy5QUk9KRUNUSU9OX1RZUEVTLlBFUlNQRUNUSVZFP3RoaXMuX2Zhcjp0aGlzLl9mYXJPcnRob319LHtrZXk6XCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3k9PT1jLkNvbnN0YW50cy5QUk9KRUNUSU9OX1RZUEVTLlBFUlNQRUNUSVZFP3RoaXMuX2Zvdjp0aGlzLl9mb3ZPcnRobyx0PXRoaXMuX3dpZHRoL3RoaXMuX2hlaWdodDt0aGlzLnByb3k9PT1jLkNvbnN0YW50cy5QUk9KRUNUSU9OX1RZUEVTLlBFUlNQRUNUSVZFP3RoaXMubVByb2plY3Rpb25NYXRyaXg9dS5TdG9ybU0xNi5zZXRQZXJzcGVjdGl2ZVByb2plY3Rpb24oZSx0LHRoaXMuX25lYXIsdGhpcy5fZmFyKTp0aGlzLm1Qcm9qZWN0aW9uTWF0cml4PXUuU3Rvcm1NMTYuc2V0T3J0aG9ncmFwaGljUHJvamVjdGlvbigtdCplLHQqZSwtdCplLHQqZSx0aGlzLl9uZWFyT3J0aG8sdGhpcy5fZmFyT3J0aG8pfX1dKSx0fSgpO3IuQ29tcG9uZW50UHJvamVjdGlvbj1oLHQuZXhwb3J0cy5Db21wb25lbnRQcm9qZWN0aW9uPWh9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vQ29tcG9uZW50LmNsYXNzXCI6MyxcIi4vQ29uc3RhbnRzXCI6MTEsXCIuL1N0b3JtTWF0aC5jbGFzc1wiOjIwfV0sODpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9ZnVuY3Rpb24gcyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG4uQ29tcG9uZW50VHJhbnNmb3JtPXZvaWQgMDt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLGw9ZShcIi4vQ29tcG9uZW50LmNsYXNzXCIpLHU9ZShcIi4vQ29uc3RhbnRzXCIpLGM9bi5Db21wb25lbnRUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KTt2YXIgZT1pKHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcykpO3JldHVybiBlLnR5cGU9dS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLlRSQU5TRk9STSxlLm5vZGU9bnVsbCxlLmdsPW51bGwsZS5tTW9kZWxNYXRyaXhfUG9zaXRpb249JE0xNihbMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV0pLGUubU1vZGVsTWF0cml4X1JvdGF0aW9uPSRNMTYoWzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdKSxlfXJldHVybiBzKHQsbC5Db21wb25lbnQpLGEodCxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMubm9kZT1lLHRoaXMuZ2w9dH19LHtrZXk6XCJnZXRNYXRyaXhQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubU1vZGVsTWF0cml4X1Bvc2l0aW9ufX0se2tleTpcImdldE1hdHJpeFJvdGF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tTW9kZWxNYXRyaXhfUm90YXRpb259fV0pLHR9KCk7ci5Db21wb25lbnRUcmFuc2Zvcm09Yyx0LmV4cG9ydHMuQ29tcG9uZW50VHJhbnNmb3JtPWN9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vQ29tcG9uZW50LmNsYXNzXCI6MyxcIi4vQ29uc3RhbnRzXCI6MTF9XSw5OltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2U6dH1mdW5jdGlvbiBzKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksbi5Db21wb25lbnRUcmFuc2Zvcm1UYXJnZXQ9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksbD1lKFwiLi9Db21wb25lbnQuY2xhc3NcIiksdT1lKFwiLi9VdGlscy5jbGFzc1wiKSxjPWUoXCIuL1N0b3JtTWF0aC5jbGFzc1wiKSxoPWUoXCIuL0NvbnN0YW50c1wiKSxmPW4uQ29tcG9uZW50VHJhbnNmb3JtVGFyZ2V0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtvKHRoaXMsdCk7dmFyIGU9aSh0aGlzLCh0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpKS5jYWxsKHRoaXMpKTtyZXR1cm4gZS50eXBlPWguQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5UUkFOU0ZPUk1fVEFSR0VULGUubm9kZT1udWxsLGUuZ2w9bnVsbCxlLm1Nb2RlbE1hdHJpeD0kTTE2KFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSksZS50YXJnZXREaXN0YW5jZT01LGUucG9zaXRpb25Hb2FsPSRWMyhbMCwwLGUudGFyZ2V0RGlzdGFuY2VdKSxlLnBvc2l0aW9uVGFyZ2V0PSRWMyhbMCwwLDBdKSxlfXJldHVybiBzKHQsbC5Db21wb25lbnQpLGEodCxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMubm9kZT1lLHRoaXMuZ2w9dCx0aGlzLnBlcmZvcm1NYXRyaXgoKX19LHtrZXk6XCJnZXRNYXRyaXhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1Nb2RlbE1hdHJpeH19LHtrZXk6XCJzZXRUYXJnZXREaXN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudGFyZ2V0RGlzdGFuY2U9ZX19LHtrZXk6XCJnZXRUYXJnZXREaXN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFyZ2V0RGlzdGFuY2V9fSx7a2V5Olwic2V0UG9zaXRpb25Hb2FsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5wb3NpdGlvbkdvYWw9ZSx0aGlzLnBlcmZvcm1NYXRyaXgoKX19LHtrZXk6XCJnZXRQb3NpdGlvbkdvYWxcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uR29hbH19LHtrZXk6XCJzZXRQb3NpdGlvblRhcmdldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucG9zaXRpb25UYXJnZXQ9ZSx0aGlzLnBlcmZvcm1NYXRyaXgoKX19LHtrZXk6XCJnZXRQb3NpdGlvblRhcmdldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zaXRpb25UYXJnZXR9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucG9zaXRpb25Hb2FsPSRWMyhbMCwwLHRoaXMudGFyZ2V0RGlzdGFuY2VdKSx0aGlzLnBvc2l0aW9uVGFyZ2V0PSRWMyhbMCwwLDBdKSx0aGlzLnBlcmZvcm1NYXRyaXgoKX19LHtrZXk6XCJ5YXdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldFBvc2l0aW9uR29hbCgpLnN1YnRyYWN0KHRoaXMuZ2V0UG9zaXRpb25UYXJnZXQoKSksbj11LlV0aWxzLmNhcnRlc2lhblRvU3BoZXJpY2FsKHQubm9ybWFsaXplKCkpLHI9dS5VdGlscy5zcGhlcmljYWxUb0NhcnRlc2lhbihuLnJhZGl1cyxuLmxhdCxuLmxuZytlKTt0aGlzLnNldFBvc2l0aW9uR29hbCh0aGlzLmdldFBvc2l0aW9uVGFyZ2V0KCkuYWRkKHIueCh0aGlzLmdldFRhcmdldERpc3RhbmNlKCkpKSl9fSx7a2V5OlwicGl0Y2hcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldFBvc2l0aW9uR29hbCgpLnN1YnRyYWN0KHRoaXMuZ2V0UG9zaXRpb25UYXJnZXQoKSksbj11LlV0aWxzLmNhcnRlc2lhblRvU3BoZXJpY2FsKHQubm9ybWFsaXplKCkpLHI9dS5VdGlscy5zcGhlcmljYWxUb0NhcnRlc2lhbihuLnJhZGl1cyxuLmxhdCtlLG4ubG5nKTt0aGlzLnNldFBvc2l0aW9uR29hbCh0aGlzLmdldFBvc2l0aW9uVGFyZ2V0KCkuYWRkKHIueCh0aGlzLmdldFRhcmdldERpc3RhbmNlKCkpKSl9fSx7a2V5OlwicGVyZm9ybU1hdHJpeFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5tTW9kZWxNYXRyaXg9Yy5TdG9ybU0xNi5tYWtlTG9va0F0KHRoaXMuZ2V0UG9zaXRpb25Hb2FsKCkuZVswXSx0aGlzLmdldFBvc2l0aW9uR29hbCgpLmVbMV0sdGhpcy5nZXRQb3NpdGlvbkdvYWwoKS5lWzJdLHRoaXMuZ2V0UG9zaXRpb25UYXJnZXQoKS5lWzBdLHRoaXMuZ2V0UG9zaXRpb25UYXJnZXQoKS5lWzFdLHRoaXMuZ2V0UG9zaXRpb25UYXJnZXQoKS5lWzJdLDAsMSwwKX19XSksdH0oKTtyLkNvbXBvbmVudFRyYW5zZm9ybVRhcmdldD1mLHQuZXhwb3J0cy5Db21wb25lbnRUcmFuc2Zvcm1UYXJnZXQ9Zn0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi9Db21wb25lbnQuY2xhc3NcIjozLFwiLi9Db25zdGFudHNcIjoxMSxcIi4vU3Rvcm1NYXRoLmNsYXNzXCI6MjAsXCIuL1V0aWxzLmNsYXNzXCI6MjJ9XSwxMDpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9ZnVuY3Rpb24gcyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG4uQ29tcG9uZW50X0dQVT12b2lkIDA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKTtlKFwid2ViY2xnbFwiKTt2YXIgbD1lKFwiLi9Db21wb25lbnQuY2xhc3NcIiksdT1lKFwiLi9Db25zdGFudHNcIiksYz1uLkNvbXBvbmVudF9HUFU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KTt2YXIgZT1pKHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcykpO3JldHVybiBlLnR5cGU9dS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLkdQVSxlLm5vZGU9bnVsbCxlLmdsPW51bGwsZS5ncHVmRz1udWxsLGUuYXJncz17fSxlfXJldHVybiBzKHQsbC5Db21wb25lbnQpLGEodCxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMubm9kZT1lLHRoaXMuZ2w9dH19LHtrZXk6XCJ0aWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy50aWNrQXJndW1lbnRzKCksbnVsbCE9dGhpcy5ncHVmRyYmdGhpcy5ncHVmRy5wcm9jZXNzS2VybmVscygpLG51bGwhPXRoaXMuZ3B1ZkcmJnRoaXMuZ3B1ZkcucHJvY2Vzc0dyYXBoaWModm9pZCAwKX19LHtrZXk6XCJzZXRHUFVGb3JcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHM7Zm9yKHZhciBuIGluIGFyZ3VtZW50c1sxXSl7dmFyIHI9bi5zcGxpdChcIiBcIik7aWYobnVsbCE9ciYmci5sZW5ndGg+MSl7dmFyIG89clsxXTt0aGlzLmFyZ3Nbb109e2ZudmFsdWU6YXJndW1lbnRzWzFdW25dLHVwZGF0YWJsZTpudWxsLHNwbGl0czpudWxsLG92ZXJyaWRlRGltZW5zaW9uczpudWxsfX1hcmd1bWVudHNbMV1bbl09YXJndW1lbnRzWzFdW25dKCl9dGhpcy5ncHVmRz1uZXcgZnVuY3Rpb24oKXtyZXR1cm4gZ3B1Zm9yLmFwcGx5KGUsdCl9fX0se2tleTpcImdldFdlYkNMR0xcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdwdWZHLmdldFdlYkNMR0woKX19LHtrZXk6XCJhZGRBcmd1bWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5hcmdzW2Uuc3BsaXQoXCIgXCIpWzFdXT17Zm52YWx1ZTp0LHVwZGF0YWJsZTpudWxsLHNwbGl0czpudWxsLG92ZXJyaWRlRGltZW5zaW9uczpudWxsfSx0aGlzLmdwdWZHLmFkZEFyZyhlKX19LHtrZXk6XCJzZXRBcmdcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgbz10aGlzLmdwdWZHLnNldEFyZyhlLHQoKSxuLHIpO3JldHVybiB0aGlzLmFyZ3NbZV09e2ZudmFsdWU6dCx1cGRhdGFibGU6bnVsbCxzcGxpdHM6bixvdmVycmlkZURpbWVuc2lvbnM6cn0sb319LHtrZXk6XCJnZXRDb21wb25lbnRCdWZmZXJBcmdcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuZ3B1ZkcuZ2V0R1BVRm9yQXJnKGUsdC5ncHVmRyksdGhpcy5hcmdzW2VdPXtmbnZhbHVlOm51bGwsdXBkYXRhYmxlOm51bGwsc3BsaXRzOm51bGwsb3ZlcnJpZGVEaW1lbnNpb25zOm51bGx9fX0se2tleTpcImdldEFyZ3NcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFyZ3N9fSx7a2V5OlwiZ2V0QWxsQXJnc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3B1ZkcuZ2V0QWxsQXJncygpfX0se2tleTpcImdldEJ1ZmZlcnNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdwdWZHLl9hcmdzVmFsdWVzfX0se2tleTpcInNldEFyZ1VwZGF0YWJsZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5hcmdzW2VdLnVwZGF0YWJsZT10fX0se2tleTpcInRpY2tBcmd1bWVudHNcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB0aGlzLmFyZ3MpaWYoITA9PT10aGlzLmFyZ3NbZV0udXBkYXRhYmxlKXt2YXIgdD10aGlzLmFyZ3NbZV07dGhpcy5ncHVmRy5zZXRBcmcoZSx0LmZudmFsdWUoKSx0LnNwbGl0cyx0Lm92ZXJyaWRlRGltZW5zaW9ucyl9fX1dKSx0fSgpO3IuQ29tcG9uZW50X0dQVT1jLHQuZXhwb3J0cy5Db21wb25lbnRfR1BVPWN9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vQ29tcG9uZW50LmNsYXNzXCI6MyxcIi4vQ29uc3RhbnRzXCI6MTEsd2ViY2xnbDoxfV0sMTE6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bi5Db25zdGFudHM9e0VWRU5UX1RZUEVTOntLRVlfRE9XTjowLEtFWV9VUDoxLE1PVVNFX0RPV046MixNT1VTRV9VUDozLE1PVVNFX01PVkU6NCxNT1VTRV9XSEVFTDo1fSxDT01QT05FTlRfVFlQRVM6e0tFWUJPQVJEX0VWRU5UUzowLE1PVVNFX0VWRU5UUzoxLFRSQU5TRk9STToyLFRSQU5TRk9STV9UQVJHRVQ6MyxDT05UUk9MTEVSX1RSQU5TRk9STV9UQVJHRVQ6NCxQUk9KRUNUSU9OOjUsR1BVOjZ9LFBST0pFQ1RJT05fVFlQRVM6e1BFUlNQRUNUSVZFOjAsT1JUSE86MX0sVklFV19UWVBFUzp7TEVGVDowLFJJR0hUOjEsRlJPTlQ6MixCQUNLOjMsVE9QOjQsQk9UVE9NOjV9LEJMRU5ESU5HX01PREVTOntaRVJPOlwiWkVST1wiLE9ORTpcIk9ORVwiLFNSQ19DT0xPUjpcIlNSQ19DT0xPUlwiLE9ORV9NSU5VU19TUkNfQ09MT1I6XCJPTkVfTUlOVVNfU1JDX0NPTE9SXCIsRFNUX0NPTE9SOlwiRFNUX0NPTE9SXCIsT05FX01JTlVTX0RTVF9DT0xPUjpcIk9ORV9NSU5VU19EU1RfQ09MT1JcIixTUkNfQUxQSEE6XCJTUkNfQUxQSEFcIixPTkVfTUlOVVNfU1JDX0FMUEhBOlwiT05FX01JTlVTX1NSQ19BTFBIQVwiLERTVF9BTFBIQTpcIkRTVF9BTFBIQVwiLE9ORV9NSU5VU19EU1RfQUxQSEE6XCJPTkVfTUlOVVNfRFNUX0FMUEhBXCIsU1JDX0FMUEhBX1NBVFVSQVRFOlwiU1JDX0FMUEhBX1NBVFVSQVRFXCIsQ09OU1RBTlRfQ09MT1I6XCJDT05TVEFOVF9DT0xPUlwiLE9ORV9NSU5VU19DT05TVEFOVF9DT0xPUjpcIk9ORV9NSU5VU19DT05TVEFOVF9DT0xPUlwiLENPTlNUQU5UX0FMUEhBOlwiQ09OU1RBTlRfQUxQSEFcIixPTkVfTUlOVVNfQ09OU1RBTlRfQUxQSEE6XCJPTkVfTUlOVVNfQ09OU1RBTlRfQUxQSEFcIn0sQkxFTkRJTkdfRVFVQVRJT05fVFlQRVM6e0ZVTkNfQUREOlwiRlVOQ19BRERcIixGVU5DX1NVQlRSQUNUOlwiRlVOQ19TVUJUUkFDVFwiLEZVTkNfUkVWRVJTRV9TVUJUUkFDVDpcIkZVTkNfUkVWRVJTRV9TVUJUUkFDVFwifSxEUkFXX01PREVTOntQT0lOVFM6MCxMSU5FUzoxLExJTkVfTE9PUDoyLExJTkVfU1RSSVA6MyxUUklBTkdMRVM6NCxUUklBTkdMRV9TVFJJUDo1LFRSSUFOR0xFX0ZBTjo2fX07ZS5Db25zdGFudHM9cix0LmV4cG9ydHMuQ29uc3RhbnRzPXJ9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwxMjpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxuLk1lc2g9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKFwiLi9VdGlscy5jbGFzc1wiKSxhPW4uTWVzaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5fb2JqPXt9LHRoaXMuX3RleHR1cmVzPXt9LHRoaXMub2JqSW5kZXg9bnVsbCx0aGlzLmluZGV4TWF4PTB9cmV0dXJuIGkoZSxbe2tleTpcImxvYWRQb2ludFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29iai52ZXJ0ZXhBcnJheT1bMCwwLDAsMF0sdGhpcy5fb2JqLm5vcm1hbEFycmF5PVswLDEsMCwwXSx0aGlzLl9vYmoudGV4dHVyZUFycmF5PVswLDAsMCwwXSx0aGlzLl9vYmoudGV4dHVyZVVuaXRBcnJheT1bMF0sdGhpcy5fb2JqLmluZGV4QXJyYXk9WzBdLHRoaXMuX29ian19LHtrZXk6XCJsb2FkVHJpYW5nbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD12b2lkIDAhPT1lJiZ2b2lkIDAhPT1lLnNjYWxlP2Uuc2NhbGU6MSxuPXZvaWQgMCE9PWUmJnZvaWQgMCE9PWUuc2lkZT9lLnNpZGU6MTtyZXR1cm4gdGhpcy5fb2JqLnZlcnRleEFycmF5PVswLDAsMCwxLG4vMip0LDAsLTEqdCwxLC1uLzIqdCwwLC0xKnQsMV0sdGhpcy5fb2JqLm5vcm1hbEFycmF5PVswLDAsMSwxLDAsMCwxLDEsMCwwLDEsMV0sdGhpcy5fb2JqLnRleHR1cmVBcnJheT1bMCwwLDAsMSwxLDAsMCwxLDEsMSwwLDFdLHRoaXMuX29iai50ZXh0dXJlVW5pdEFycmF5PVswLDAsMF0sdGhpcy5fb2JqLmluZGV4QXJyYXk9WzAsMSwyXSx0aGlzLl9vYmp9fSx7a2V5OlwibG9hZFF1YWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXZvaWQgMD09PWU/LjU6ZSxyPXZvaWQgMD09PXQ/LjU6dDtyZXR1cm4gdGhpcy5fb2JqPXt9LHRoaXMuX29iai52ZXJ0ZXhBcnJheT1bLW4sLXIsMCwxLG4sLXIsMCwxLG4sciwwLDEsLW4sciwwLDFdLHRoaXMuX29iai5ub3JtYWxBcnJheT1bMCwwLDEsMSwwLDAsMSwxLDAsMCwxLDEsMCwwLDEsMV0sdGhpcy5fb2JqLnRleHR1cmVBcnJheT1bMCwwLDAsMSwxLDAsMCwxLDEsMSwwLDEsMCwxLDAsMV0sdGhpcy5fb2JqLnRleHR1cmVVbml0QXJyYXk9WzAsMCwwLDBdLHRoaXMuX29iai5pbmRleEFycmF5PVswLDEsMiwwLDIsM10sdGhpcy5fb2JqfX0se2tleTpcImxvYWRDaXJjbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYmo9e3ZlcnRleEFycmF5OltdLG5vcm1hbEFycmF5OltdLHRleHR1cmVBcnJheTpbXSx0ZXh0dXJlVW5pdEFycmF5OltdLGluZGV4QXJyYXk6W119LHRoaXMub2JqSW5kZXg9W10sdGhpcy5pbmRleE1heD0wO2Zvcih2YXIgdD12b2lkIDAhPT1lJiZ2b2lkIDAhPT1lLnNlZ21lbnRzP2Uuc2VnbWVudHM6NixuPXZvaWQgMCE9PWUmJnZvaWQgMCE9PWUucmFkaXVzP2UucmFkaXVzOi41LHI9MzYwL3Qsbz0zNjAvcixpPWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmNvcygobmV3IHMuVXRpbHMpLmRlZ1RvUmFkKGUpKX0uYmluZCh0aGlzKSxhPWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnNpbigobmV3IHMuVXRpbHMpLmRlZ1RvUmFkKGUpKX0uYmluZCh0aGlzKSxsPTEsdT1vO2w8PXU7bCsrKXt2YXIgYz1yKmwsaD0kVjMoW2koYykqbiwwLGEoYykqbl0pLGY9JFYzKFtpKGMtcikqbiwwLGEoYy1yKSpuXSksZD0kVjMoWzAsMCwwXSksZz1mLnN1YnRyYWN0KGgpLmNyb3NzKGQuc3VidHJhY3QoaCkpLm5vcm1hbGl6ZSgpLF89JFYzKFtjLzM2MCwwLDBdKSx2PSRWMyhbKGMtcikvMzYwLDAsMF0pLHA9JFYzKFswLDAsMF0pLG09dGhpcy50ZXN0SWZJbkluZGljZXModGhpcy5fb2JqLGgsZyxfKSx5PXRoaXMudGVzdElmSW5JbmRpY2VzKHRoaXMuX29iaixmLGcsdiksYj10aGlzLnRlc3RJZkluSW5kaWNlcyh0aGlzLl9vYmosZCxnLHApO3RoaXMuX29iai5pbmRleEFycmF5LnB1c2gobSx5LGIpfXJldHVybiB0aGlzLl9vYmp9fSx7a2V5OlwidGVzdElmSW5JbmRpY2VzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4scil7Zm9yKHZhciBvPXZvaWQgMCxpPTAscz10aGlzLm9iakluZGV4Lmxlbmd0aDtpPHM7aSsrKXRoaXMub2JqSW5kZXhbaV0udi5lWzBdPT09dC5lWzBdJiZ0aGlzLm9iakluZGV4W2ldLnYuZVsxXT09PXQuZVsxXSYmdGhpcy5vYmpJbmRleFtpXS52LmVbMl09PT10LmVbMl0mJihvPXRoaXMub2JqSW5kZXhbaV0uaSk7cmV0dXJuIHZvaWQgMD09PW8mJihvPXRoaXMuaW5kZXhNYXgsdGhpcy5vYmpJbmRleC5wdXNoKHtpOm8sdjokVjMoW3QuZVswXSx0LmVbMV0sdC5lWzJdXSl9KSx0aGlzLmluZGV4TWF4KyssZS52ZXJ0ZXhBcnJheS5wdXNoKHQuZVswXSx0LmVbMV0sdC5lWzJdLDEpLGUubm9ybWFsQXJyYXkucHVzaChuLmVbMF0sbi5lWzFdLG4uZVsyXSwxKSxlLnRleHR1cmVBcnJheS5wdXNoKHQuZVswXSsuNSx0LmVbMl0rLjUsdC5lWzJdKy41LDEpLGUudGV4dHVyZVVuaXRBcnJheS5wdXNoKDApKSxvfX0se2tleTpcImxvYWRCb3hcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29iaj17fTt2YXIgZT1uZXcgRmxvYXQzMkFycmF5KFsuNSwuNSwuNV0pO3JldHVybiB0aGlzLl9vYmoudmVydGV4QXJyYXk9Wy0xKmVbMF0sLTEqZVsxXSwxKmVbMl0sMSwxKmVbMF0sLTEqZVsxXSwxKmVbMl0sMSwxKmVbMF0sMSplWzFdLDEqZVsyXSwxLC0xKmVbMF0sMSplWzFdLDEqZVsyXSwxLC0xKmVbMF0sLTEqZVsxXSwtMSplWzJdLDEsLTEqZVswXSwxKmVbMV0sLTEqZVsyXSwxLDEqZVswXSwxKmVbMV0sLTEqZVsyXSwxLDEqZVswXSwtMSplWzFdLC0xKmVbMl0sMSwtMSplWzBdLDEqZVsxXSwtMSplWzJdLDEsLTEqZVswXSwxKmVbMV0sMSplWzJdLDEsMSplWzBdLDEqZVsxXSwxKmVbMl0sMSwxKmVbMF0sMSplWzFdLC0xKmVbMl0sMSwtMSplWzBdLC0xKmVbMV0sLTEqZVsyXSwxLDEqZVswXSwtMSplWzFdLC0xKmVbMl0sMSwxKmVbMF0sLTEqZVsxXSwxKmVbMl0sMSwtMSplWzBdLC0xKmVbMV0sMSplWzJdLDEsMSplWzBdLC0xKmVbMV0sLTEqZVsyXSwxLDEqZVswXSwxKmVbMV0sLTEqZVsyXSwxLDEqZVswXSwxKmVbMV0sMSplWzJdLDEsMSplWzBdLC0xKmVbMV0sMSplWzJdLDEsLTEqZVswXSwtMSplWzFdLC0xKmVbMl0sMSwtMSplWzBdLC0xKmVbMV0sMSplWzJdLDEsLTEqZVswXSwxKmVbMV0sMSplWzJdLDEsLTEqZVswXSwxKmVbMV0sLTEqZVsyXSwxXSx0aGlzLl9vYmoubm9ybWFsQXJyYXk9WzAsMCwxLDEsMCwwLDEsMSwwLDAsMSwxLDAsMCwxLDEsMCwwLC0xLDEsMCwwLC0xLDEsMCwwLC0xLDEsMCwwLC0xLDEsMCwxLDAsMSwwLDEsMCwxLDAsMSwwLDEsMCwxLDAsMSwwLC0xLDAsMSwwLC0xLDAsMSwwLC0xLDAsMSwwLC0xLDAsMSwxLDAsMCwxLDEsMCwwLDEsMSwwLDAsMSwxLDAsMCwxLC0xLDAsMCwxLC0xLDAsMCwxLC0xLDAsMCwxLC0xLDAsMCwxXSx0aGlzLl9vYmoudGV4dHVyZUFycmF5PVswLDAsMCwxLDEsMCwwLDEsMSwxLDAsMSwwLDEsMCwxLDEsMCwwLDEsMSwxLDAsMSwwLDEsMCwxLDAsMCwwLDEsMCwxLDAsMSwwLDAsMCwxLDEsMCwwLDEsMSwxLDAsMSwxLDEsMCwxLDAsMSwwLDEsMCwwLDAsMSwxLDAsMCwxLDEsMCwwLDEsMSwxLDAsMSwwLDEsMCwxLDAsMCwwLDEsMCwwLDAsMSwxLDAsMCwxLDEsMSwwLDEsMCwxLDAsMV0sdGhpcy5fb2JqLnRleHR1cmVVbml0QXJyYXk9WzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwXSx0aGlzLl9vYmouaW5kZXhBcnJheT1bMCwxLDIsMCwyLDMsNCw1LDYsNCw2LDcsOCw5LDEwLDgsMTAsMTEsMTIsMTMsMTQsMTIsMTQsMTUsMTYsMTcsMTgsMTYsMTgsMTksMjAsMjEsMjIsMjAsMjIsMjNdLHRoaXMuX29ian19LHtrZXk6XCJsb2FkT2JqXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49XCJcIixyPWUuc3BsaXQoXCIvXCIpLG89MCxpPXIubGVuZ3RoLTE7bzxpO28rKyluPW4rcltvXStcIi9cIjt2YXIgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7cy5vcGVuKFwiR0VUXCIsZSwhMCkscy5yZXNwb25zZVR5cGU9XCJibG9iXCIscy5vbmxvYWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEZpbGVSZWFkZXI7dC5vbmxvYWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LnRhcmdldC5yZXN1bHQ7dGhpcy5sb2FkT2JqRnJvbVNvdXJjZVRleHQoe3NvdXJjZVRleHQ6cixvYmpEaXJlY3Rvcnk6bn0pLHZvaWQgMCE9PWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUodGhpcy5fb2JqLHRoaXMuX3RleHR1cmVzKX0uYmluZCh0aGlzLGUpLHQucmVhZEFzVGV4dChzLnJlc3BvbnNlKX0uYmluZCh0aGlzLHQpLHMuc2VuZChudWxsKX19LHtrZXk6XCJsb2FkT2JqRnJvbVNvdXJjZVRleHRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYmo9e30sdGhpcy5fdGV4dHVyZXM9e307dmFyIHQ9dm9pZCAwLG49dm9pZCAwO3Q9dm9pZCAwIT09ZS5zb3VyY2VUZXh0P2Uuc291cmNlVGV4dDp2b2lkIDAsbj12b2lkIDAhPT1lLm9iakRpcmVjdG9yeT9lLm9iakRpcmVjdG9yeTp2b2lkIDA7dmFyIHI9dC5zcGxpdChcIlxcclxcblwiKTtpZigxPT09ci5sZW5ndGgmJihyPXQuc3BsaXQoXCJcXG5cIikpLG51bGwhPXJbMF0ubWF0Y2goL09CSi9naW0pKXt2YXIgbz1bXSxpPVtdLHM9W10sYT1bXSxsPVtdLHU9W10sYz1bXSxoPVtdLGY9W10sZD1bXSxnPTAsXz1bXSx2PTAscD0wLG09ITEseT1bXSxiPVtdLEU9W10sQz1bXSxUPVtdLHg9W10sUD1bXSxMPVtdLEE9W10sdz0wLFI9MCxTPTAsaz1bXSxNPTAsTz17fSxGPVstMSwwXTtPLl91bm5hbWVkPUY7Zm9yKHZhciBOPVwiXCIsRz1cIlwiLFU9MCxCPXIubGVuZ3RoO1U8QjtVKyspe3ZhciBEPXJbVV0ucmVwbGFjZSgvXFx0Ky9naSxcIiBcIikucmVwbGFjZSgvXFxzKyQvZ2ksXCJcIikucmVwbGFjZSgvXFxzKy9naSxcIiBcIik7aWYoXCIjXCIhPT1EWzBdKXt2YXIgVz1ELnNwbGl0KFwiIFwiKTtpZihcIm10bGxpYlwiPT09V1swXSYmKE49V1sxXSksXCJnXCI9PT1XWzBdJiYoRj1bXy5sZW5ndGgsMF0sT1tXWzFdXT1GKSxcInZcIj09PVdbMF0mJih5W3ddPXBhcnNlRmxvYXQoV1sxXSksYlt3XT1wYXJzZUZsb2F0KFdbMl0pLEVbd109cGFyc2VGbG9hdChXWzNdKSx3KyspLFwidm5cIj09PVdbMF0mJihDW1JdPXBhcnNlRmxvYXQoV1sxXSksVFtSXT1wYXJzZUZsb2F0KFdbMl0pLHhbUl09cGFyc2VGbG9hdChXWzNdKSxSKyspLFwidnRcIj09PVdbMF0mJihQW1NdPXBhcnNlRmxvYXQoV1sxXSksTFtTXT1wYXJzZUZsb2F0KFdbMl0pLEFbU109cGFyc2VGbG9hdChXWzNdKSxTKyspLFwidXNlbXRsXCI9PT1XWzBdJiYoRz1XWzFdLHRoaXMuX3RleHR1cmVzW2ddPXtmaWxlVXJsOm4rTixtYXRlcmlhbE5hbWU6R30sZysrKSxcImZcIj09PVdbMF0pezQhPT1XLmxlbmd0aCYmY29uc29sZS5sb2coXCIqKiogRXJyb3I6IGZhY2UgJ1wiK0QrXCInIG5vdCBoYW5kbGVkXCIpO2Zvcih2YXIgVj0xO1Y8NDsrK1Ype209ITA7dmFyIGo9V1tWXS5zcGxpdChcIi9cIik7aWYodm9pZCAwPT09a1tXW1ZdXSl7dmFyIEk9dm9pZCAwLFk9dm9pZCAwLFg9dm9pZCAwO2lmKDE9PT1qLmxlbmd0aClZPUk9cGFyc2VJbnQoalswXSktMSxYPUk7ZWxzZXtpZigzIT09ai5sZW5ndGgpcmV0dXJuIG51bGw7ST1wYXJzZUludChqWzBdKS0xLFg9cGFyc2VJbnQoalsxXSktMSxZPXBhcnNlSW50KGpbMl0pLTF9ZFt2XT1nLTEsb1t2XT0wLGlbdl09MCxzW3ZdPTAsSTxFLmxlbmd0aCYmKG9bdl09eVtJXSxpW3ZdPWJbSV0sc1t2XT1FW0ldKSxjW3ZdPTAsaFt2XT0wLGZbdl09MCxYPEEubGVuZ3RoJiYoY1t2XT1QW1hdLGhbdl09TFtYXSxmW3ZdPUFbWF0pLGFbdl09MCxsW3ZdPTAsdVt2XT0xLFk8eC5sZW5ndGgmJihhW3ZdPUNbWV0sbFt2XT1UW1ldLHVbdl09eFtZXSksdisrLGtbV1tWXV09TSxNKyt9X1twXT1rW1dbVl1dLHArKyxGWzFdKyt9fX19aWYoITA9PT1tKXt0aGlzLl9vYmoudmVydGV4QXJyYXk9bmV3IEZsb2F0MzJBcnJheSg0Km8ubGVuZ3RoKTtmb3IodmFyIEg9MCx6PW8ubGVuZ3RoO0g8ejtIKyspe3ZhciBLPTQqSDt0aGlzLl9vYmoudmVydGV4QXJyYXlbS109b1tIXSx0aGlzLl9vYmoudmVydGV4QXJyYXlbSysxXT1pW0hdLHRoaXMuX29iai52ZXJ0ZXhBcnJheVtLKzJdPXNbSF0sdGhpcy5fb2JqLnZlcnRleEFycmF5W0srM109MX10aGlzLl9vYmoubm9ybWFsQXJyYXk9bmV3IEZsb2F0MzJBcnJheSg0KmEubGVuZ3RoKTtmb3IodmFyIHE9MCwkPWEubGVuZ3RoO3E8JDtxKyspe3ZhciBaPTQqcTt0aGlzLl9vYmoubm9ybWFsQXJyYXlbWl09YVtxXSx0aGlzLl9vYmoubm9ybWFsQXJyYXlbWisxXT1sW3FdLHRoaXMuX29iai5ub3JtYWxBcnJheVtaKzJdPXVbcV0sdGhpcy5fb2JqLm5vcm1hbEFycmF5W1orM109MX10aGlzLl9vYmoudGV4dHVyZUFycmF5PW5ldyBGbG9hdDMyQXJyYXkoNCpjLmxlbmd0aCk7Zm9yKHZhciBKPTAsUT1jLmxlbmd0aDtKPFE7SisrKXt2YXIgZWU9NCpKO3RoaXMuX29iai50ZXh0dXJlQXJyYXlbZWVdPWNbSl0sdGhpcy5fb2JqLnRleHR1cmVBcnJheVtlZSsxXT1oW0pdLHRoaXMuX29iai50ZXh0dXJlQXJyYXlbZWUrMl09ZltKXSx0aGlzLl9vYmoudGV4dHVyZUFycmF5W2VlKzNdPTF9dGhpcy5fb2JqLnRleHR1cmVVbml0QXJyYXk9ZCx0aGlzLl9vYmouaW5kZXhBcnJheT1ffX1lbHNlIGFsZXJ0KFwiTm90IE9CSiBmaWxlXCIpfX1dKSxlfSgpO3IuTWVzaD1hLHQuZXhwb3J0cy5NZXNoPWF9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vVXRpbHMuY2xhc3NcIjoyMn1dLDEzOltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksaT1uLk5vZGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLHRoaXMuX2NvbXBvbmVudHM9e30sdGhpcy5fbmFtZT1udWxsLHRoaXMuX2dsPW51bGwsdGhpcy5fZW5hYmxlZD0hMCx0aGlzLm9uVGljaz1udWxsfXJldHVybiBvKGUsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9uYW1lPWUsdGhpcy5fZ2w9dH19LHtrZXk6XCJhZGRDb21wb25lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jb21wb25lbnRzW2UudHlwZV09ZSx0aGlzLl9jb21wb25lbnRzW2UudHlwZV0uaW5pdGlhbGl6ZSh0aGlzLHRoaXMuX2dsKX19LHtrZXk6XCJnZXRDb21wb25lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50c1tlXX19LHtrZXk6XCJnZXRDb21wb25lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50c319LHtrZXk6XCJzZXRFbmFibGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZW5hYmxlZD1lfX0se2tleTpcImlzRW5hYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWR9fSx7a2V5Olwic2V0TmFtZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX25hbWU9ZX19LHtrZXk6XCJnZXROYW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmFtZX19XSksZX0oKTtlLk5vZGU9aSx0LmV4cG9ydHMuTm9kZT1pfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMTQ6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksbi5HcmlkPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHM9ZShcIi4uLy4uL1V0aWxzLmNsYXNzXCIpLGE9ZShcIi4uLy4uL0NvbXBvbmVudFRyYW5zZm9ybS5jbGFzc1wiKSxsPWUoXCIuLi8uLi9Db21wb25lbnRfR1BVLmNsYXNzXCIpLHU9ZShcIi4uLy4uL01lc2guY2xhc3NcIiksYz1lKFwiLi4vLi4vQ29uc3RhbnRzXCIpLGg9bi5HcmlkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fc2NlPXQsdGhpcy5fcHJvamVjdD10aGlzLl9zY2UuZ2V0TG9hZGVkUHJvamVjdCgpLHRoaXMuX2dsPXRoaXMuX3Byb2plY3QuZ2V0QWN0aXZlU3RhZ2UoKS5nZXRXZWJHTENvbnRleHQoKSx0aGlzLl91dGlscz1uZXcgcy5VdGlscyx0aGlzLm5vZGU9bmV3IE5vZGUsdGhpcy5ub2RlLnNldE5hbWUoXCJncmlkXCIpLHRoaXMuX3Byb2plY3QuZ2V0QWN0aXZlU3RhZ2UoKS5hZGROb2RlKHRoaXMubm9kZSksdGhpcy5tZXNoPShuZXcgdS5NZXNoKS5sb2FkQm94KCksdGhpcy5jb21wX3RyYW5zZm9ybT1uZXcgYS5Db21wb25lbnRUcmFuc2Zvcm0sdGhpcy5ub2RlLmFkZENvbXBvbmVudCh0aGlzLmNvbXBfdHJhbnNmb3JtKSx0aGlzLmNvbXBfcmVuZGVyZXI9bmV3IGwuQ29tcG9uZW50X0dQVSx0aGlzLm5vZGUuYWRkQ29tcG9uZW50KHRoaXMuY29tcF9yZW5kZXJlciksdGhpcy5ncmlkQ29sb3I9JFYzKFsuMywuMywuM10pfXJldHVybiBpKGUsW3trZXk6XCJnZW5lcmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5ncmlkRW5hYmxlZD0hMCx0aGlzLnNpemU9dm9pZCAwIT09ZSYmbnVsbCE9PWU/ZTp0aGlzLnNpemUsdGhpcy5zZXBhcmF0aW9uPXZvaWQgMCE9PXQmJm51bGwhPT10P3Q6dGhpcy5zZXBhcmF0aW9uLHRoaXMuY291bnRMaW5lcz10aGlzLnNpemUvdGhpcy5zZXBhcmF0aW9uKzEsdGhpcy5jb3VudExpbmVzKj0yO3ZhciBuPS10aGlzLnNpemUvMixyPXRoaXMuc2l6ZS8yLG89LXRoaXMuc2l6ZS8yLGk9dGhpcy5zaXplLzIscz1uLGE9byxsPVtdLHU9W10saD1bXTt0aGlzLmlkPTA7Zm9yKHZhciBmPTAsZD10aGlzLmNvdW50TGluZXM7ZjxkO2YrKylhPD1pPyhsLnB1c2gobiwwLGEsMSxyLDAsYSwxKSxhKz10aGlzLnNlcGFyYXRpb24pOihsLnB1c2gocywwLG8sMSxzLDAsaSwxKSxzKz10aGlzLnNlcGFyYXRpb24pLHUucHVzaCh0aGlzLmdyaWRDb2xvci5lWzBdLHRoaXMuZ3JpZENvbG9yLmVbMV0sdGhpcy5ncmlkQ29sb3IuZVsyXSwxLHRoaXMuZ3JpZENvbG9yLmVbMF0sdGhpcy5ncmlkQ29sb3IuZVsxXSx0aGlzLmdyaWRDb2xvci5lWzJdLDEpLGgucHVzaCh0aGlzLmlkLHRoaXMuaWQrMSksdGhpcy5pZCs9MjtsLnB1c2goMCwwLDAsMSwxMCwwLDAsMSksdS5wdXNoKDEsMCwwLDEsMSwwLDAsMSksaC5wdXNoKHRoaXMuaWQsdGhpcy5pZCsxKSx0aGlzLmlkKz0yLGwucHVzaCgwLDAsMCwxLDAsMTAsMCwxKSx1LnB1c2goMCwxLDAsMSwwLDEsMCwxKSxoLnB1c2godGhpcy5pZCx0aGlzLmlkKzEpLHRoaXMuaWQrPTIsbC5wdXNoKDAsMCwwLDEsMCwwLDEwLDEpLHUucHVzaCgwLDAsMSwxLDAsMCwxLDEpLGgucHVzaCh0aGlzLmlkLHRoaXMuaWQrMSksdGhpcy5jb21wX3JlbmRlcmVyLnNldEdQVUZvcih0aGlzLmNvbXBfcmVuZGVyZXIuZ2wse1wiZmxvYXQ0KmF0dHIgdmVydGV4UG9zXCI6ZnVuY3Rpb24oKXtyZXR1cm4gbH0uYmluZCh0aGlzKSxcImZsb2F0NCphdHRyIHZlcnRleENvbG9yXCI6ZnVuY3Rpb24oKXtyZXR1cm4gdX0uYmluZCh0aGlzKSxpbmRpY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIGh9LmJpbmQodGhpcyksXCJtYXQ0IFBNYXRyaXhcIjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9qZWN0LmdldEFjdGl2ZVN0YWdlKCkuZ2V0QWN0aXZlQ2FtZXJhKCkuZ2V0Q29tcG9uZW50KGMuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5QUk9KRUNUSU9OKS5nZXRNYXRyaXgoKS50cmFuc3Bvc2UoKS5lfS5iaW5kKHRoaXMpLFwibWF0NCBjYW1lcmFXTWF0cml4XCI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvamVjdC5nZXRBY3RpdmVTdGFnZSgpLmdldEFjdGl2ZUNhbWVyYSgpLmdldENvbXBvbmVudChjLkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuVFJBTlNGT1JNX1RBUkdFVCkuZ2V0TWF0cml4KCkudHJhbnNwb3NlKCkuZX0uYmluZCh0aGlzKSxcIm1hdDQgbm9kZVdNYXRyaXhcIjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGMuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5UUkFOU0ZPUk0pLmdldE1hdHJpeFBvc2l0aW9uKCkudHJhbnNwb3NlKCkuZX0uYmluZCh0aGlzKX0se3R5cGU6XCJHUkFQSElDXCIsY29uZmlnOltbXCJSR0JcIl0sXCJ2YXJ5aW5nIHZlYzQgdlZDO1xcblwiLFwidmVjNCB2cCA9IHZlcnRleFBvc1tdO1xcbnZlYzQgdmMgPSB2ZXJ0ZXhDb2xvcltdO1xcbnZWQyA9IHZjO2dsX1Bvc2l0aW9uID0gUE1hdHJpeCAqIGNhbWVyYVdNYXRyaXggKiBub2RlV01hdHJpeCAqIHZwO1xcblwiLFwidmFyeWluZyB2ZWM0IHZWQztcXG5cIixcInJldHVybiBbdlZDXTtcXG5cIl0sZHJhd01vZGU6MSxkZXB0aFRlc3Q6ITAsYmxlbmQ6ITAsYmxlbmRFcXVhdGlvbjpjLkNvbnN0YW50cy5CTEVORElOR19FUVVBVElPTl9UWVBFUy5GVU5DX0FERCxibGVuZFNyY01vZGU6Yy5Db25zdGFudHMuQkxFTkRJTkdfTU9ERVMuU1JDX0FMUEhBLGJsZW5kRHN0TW9kZTpjLkNvbnN0YW50cy5CTEVORElOR19NT0RFUy5PTkVfTUlOVVNfU1JDX0FMUEhBfSksdGhpcy5jb21wX3JlbmRlcmVyLnNldEFyZ1VwZGF0YWJsZShcIlBNYXRyaXhcIiwhMCksdGhpcy5jb21wX3JlbmRlcmVyLnNldEFyZ1VwZGF0YWJsZShcImNhbWVyYVdNYXRyaXhcIiwhMCksdGhpcy5jb21wX3JlbmRlcmVyLnNldEFyZ1VwZGF0YWJsZShcIm5vZGVXTWF0cml4XCIsITApLHRoaXMuY29tcF9yZW5kZXJlci5nZXRDb21wb25lbnRCdWZmZXJBcmcoXCJSR0JcIix0aGlzLl9wcm9qZWN0LmdldEFjdGl2ZVN0YWdlKCkuZ2V0QWN0aXZlQ2FtZXJhKCkuZ2V0Q29tcG9uZW50KGMuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5HUFUpKX19XSksZX0oKTtyLkdyaWQ9aCx0LmV4cG9ydHMuR3JpZD1ofSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7XCIuLi8uLi9Db21wb25lbnRUcmFuc2Zvcm0uY2xhc3NcIjo4LFwiLi4vLi4vQ29tcG9uZW50X0dQVS5jbGFzc1wiOjEwLFwiLi4vLi4vQ29uc3RhbnRzXCI6MTEsXCIuLi8uLi9NZXNoLmNsYXNzXCI6MTIsXCIuLi8uLi9VdGlscy5jbGFzc1wiOjIyfV0sMTU6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksbi5TaW1wbGVDYW1lcmE9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKFwiLi4vLi4vQ29tcG9uZW50VHJhbnNmb3JtVGFyZ2V0LmNsYXNzXCIpLGE9ZShcIi4uLy4uL0NvbXBvbmVudFByb2plY3Rpb24uY2xhc3NcIiksbD1lKFwiLi4vLi4vQ29tcG9uZW50Q29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5jbGFzc1wiKSx1PWUoXCIuLi8uLi9Db21wb25lbnRfR1BVLmNsYXNzXCIpLGM9ZShcIi4uLy4uL0NvbXBvbmVudEtleWJvYXJkRXZlbnRzLmNsYXNzXCIpLGg9ZShcIi4uLy4uL0NvbXBvbmVudE1vdXNlRXZlbnRzLmNsYXNzXCIpLGY9ZShcIi4uLy4uL05vZGUuY2xhc3NcIiksZD1lKFwiLi4vLi4vQ29uc3RhbnRzXCIpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7dmFyIHI9dGhpcztvKHRoaXMsZSk7dmFyIGk9dCxnPWkuZ2V0TG9hZGVkUHJvamVjdCgpO3RoaXMuX29ua2V5ZG93bj12b2lkIDAhPT1uJiZ2b2lkIDAhPT1uLm9ua2V5ZG93biYmbnVsbCE9PW4ub25rZXlkb3duP24ub25rZXlkb3duOm51bGwsdGhpcy5fb25rZXl1cD12b2lkIDAhPT1uJiZ2b2lkIDAhPT1uLm9ua2V5dXAmJm51bGwhPT1uLm9ua2V5dXA/bi5vbmtleXVwOm51bGwsdGhpcy5fb25tb3VzZWRvd249dm9pZCAwIT09biYmdm9pZCAwIT09bi5vbm1vdXNlZG93biYmbnVsbCE9PW4ub25tb3VzZWRvd24/bi5vbm1vdXNlZG93bjpudWxsLHRoaXMuX29ubW91c2V1cD12b2lkIDAhPT1uJiZ2b2lkIDAhPT1uLm9ubW91c2V1cCYmbnVsbCE9PW4ub25tb3VzZXVwP24ub25tb3VzZXVwOm51bGwsdGhpcy5fb25tb3VzZW1vdmU9dm9pZCAwIT09biYmdm9pZCAwIT09bi5vbm1vdXNlbW92ZSYmbnVsbCE9PW4ub25tb3VzZW1vdmU/bi5vbm1vdXNlbW92ZTpudWxsLHRoaXMuX29ubW91c2V3aGVlbD12b2lkIDAhPT1uJiZ2b2lkIDAhPT1uLm9ubW91c2V3aGVlbCYmbnVsbCE9PW4ub25tb3VzZXdoZWVsP24ub25tb3VzZXdoZWVsOm51bGwsdGhpcy5fdXNlQWx0S2V5PSEwLHRoaXMuYWx0S2V5UHJlc3NlZD0hMSx0aGlzLl9wcmV2ZW50TW92ZT0hMSx0aGlzLmNhbWVyYT1uZXcgZi5Ob2RlLHRoaXMuY2FtZXJhLnNldE5hbWUoXCJzaW1wbGUgY2FtZXJhXCIpLGcuZ2V0QWN0aXZlU3RhZ2UoKS5hZGROb2RlKHRoaXMuY2FtZXJhKSxnLmdldEFjdGl2ZVN0YWdlKCkuc2V0QWN0aXZlQ2FtZXJhKHRoaXMuY2FtZXJhKSx0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0PW5ldyBzLkNvbXBvbmVudFRyYW5zZm9ybVRhcmdldCx0aGlzLmNhbWVyYS5hZGRDb21wb25lbnQodGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldCksdGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldC5zZXRUYXJnZXREaXN0YW5jZSguNSksdGhpcy5jb21wX3Byb2plY3Rpb249bmV3IGEuQ29tcG9uZW50UHJvamVjdGlvbix0aGlzLmNhbWVyYS5hZGRDb21wb25lbnQodGhpcy5jb21wX3Byb2plY3Rpb24pLHRoaXMuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0PW5ldyBsLkNvbXBvbmVudENvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQsdGhpcy5jYW1lcmEuYWRkQ29tcG9uZW50KHRoaXMuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0KSx0aGlzLmNvbXBfc2NyZWVuRWZmZWN0cz1uZXcgdS5Db21wb25lbnRfR1BVLHRoaXMuY2FtZXJhLmFkZENvbXBvbmVudCh0aGlzLmNvbXBfc2NyZWVuRWZmZWN0cyksdGhpcy5jb21wX3NjcmVlbkVmZmVjdHMuc2V0R1BVRm9yKHRoaXMuY29tcF9zY3JlZW5FZmZlY3RzLmdsLHtcImZsb2F0NCogUkdCXCI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZsb2F0MzJBcnJheShpLmdldENhbnZhcygpLndpZHRoKmkuZ2V0Q2FudmFzKCkud2lkdGgqNCl9fSx7dHlwZTpcIktFUk5FTFwiLG5hbWU6XCJDQU1FUkFfUkdCX0tFUk5FTFwiLHZpZXdTb3VyY2U6ITEsY29uZmlnOltcIm5cIix2b2lkIDAsXCJcIixcInZlYzQgY29sb3IgPSBSR0Jbbl07XFxucmV0dXJuIGNvbG9yO1xcblwiXSxkcmF3TW9kZTo0LGRlcHRoVGVzdDohMSxibGVuZDohMSxibGVuZEVxdWF0aW9uOmQuQ29uc3RhbnRzLkJMRU5ESU5HX0VRVUFUSU9OX1RZUEVTLkZVTkNfQURELGJsZW5kU3JjTW9kZTpkLkNvbnN0YW50cy5CTEVORElOR19NT0RFUy5PTkUsYmxlbmREc3RNb2RlOmQuQ29uc3RhbnRzLkJMRU5ESU5HX01PREVTLlpFUk99KSx0aGlzLmNvbXBfc2NyZWVuRWZmZWN0cy5ncHVmRy5vblBvc3RQcm9jZXNzS2VybmVsKDAsZnVuY3Rpb24oKXt9KSx0aGlzLmNvbXBfa2V5Ym9hcmRFdmVudHM9bmV3IGMuQ29tcG9uZW50S2V5Ym9hcmRFdmVudHMsdGhpcy5jYW1lcmEuYWRkQ29tcG9uZW50KHRoaXMuY29tcF9rZXlib2FyZEV2ZW50cyksdGhpcy5jb21wX2tleWJvYXJkRXZlbnRzLm9ua2V5ZG93bihmdW5jdGlvbihlKXt2YXIgdD1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZSk7XCJXXCI9PT10JiZyLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5mb3J3YXJkKCksXCJTXCI9PT10JiZyLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5iYWNrd2FyZCgpLFwiQVwiIT09dCYmXCIlXCIhPT10fHxyLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5zdHJhZmVMZWZ0KCksXCJEXCIhPT10JiZcIidcIiE9PXR8fHIuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LnN0cmFmZVJpZ2h0KCksXCJFXCIhPT10JiZcIiZcIiE9PXR8fHIuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LnN0cmFmZUZyb250KCksXCJDXCIhPT10JiZcIihcIiE9PXR8fHIuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LnN0cmFmZUJhY2soKSxcIkxcIj09PXQmJnIuc2V0VmlldyhkLkNvbnN0YW50cy5WSUVXX1RZUEVTLkxFRlQpLFwiUlwiPT09dCYmci5zZXRWaWV3KGQuQ29uc3RhbnRzLlZJRVdfVFlQRVMuUklHSFQpLFwiRlwiPT09dCYmci5zZXRWaWV3KGQuQ29uc3RhbnRzLlZJRVdfVFlQRVMuRlJPTlQpLFwiQlwiPT09dCYmci5zZXRWaWV3KGQuQ29uc3RhbnRzLlZJRVdfVFlQRVMuQkFDSyksXCJUXCI9PT10JiZyLnNldFZpZXcoZC5Db25zdGFudHMuVklFV19UWVBFUy5UT1ApLFwiUFwiPT09dCYmci5jb21wX3Byb2plY3Rpb24uc2V0UHJvamVjdGlvbihkLkNvbnN0YW50cy5QUk9KRUNUSU9OX1RZUEVTLlBFUlNQRUNUSVZFKSxcIk9cIj09PXQmJnIuY29tcF9wcm9qZWN0aW9uLnNldFByb2plY3Rpb24oZC5Db25zdGFudHMuUFJPSkVDVElPTl9UWVBFUy5PUlRITyksITA9PT1lLmFsdEtleSYmKHIuYWx0S2V5UHJlc3NlZD0hMCksbnVsbCE9ci5fb25rZXlkb3duJiZyLl9vbmtleWRvd24oKX0pLHRoaXMuY29tcF9rZXlib2FyZEV2ZW50cy5vbmtleXVwKGZ1bmN0aW9uKGUpe3ZhciB0PVN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlKTtcIldcIj09PXQmJnIuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LnN0b3BGb3J3YXJkKCksXCJTXCI9PT10JiZyLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5zdG9wQmFja3dhcmQoKSxcIkFcIiE9PXQmJlwiJVwiIT09dHx8ci5jb21wX2NvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQuc3RvcFN0cmFmZUxlZnQoKSxcIkRcIiE9PXQmJlwiJ1wiIT09dHx8ci5jb21wX2NvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQuc3RvcFN0cmFmZVJpZ2h0KCksXCJFXCIhPT10JiZcIiZcIiE9PXR8fHIuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LnN0b3BTdHJhZmVGcm9udCgpLFwiQ1wiIT09dCYmXCIoXCIhPT10fHxyLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5zdG9wU3RyYWZlQmFjaygpLCExPT09ZS5hbHRLZXkmJihyLmFsdEtleVByZXNzZWQ9ITEpLG51bGwhPXIuX29ua2V5dXAmJnIuX29ua2V5dXAoKX0pO3ZhciBfPW5ldyBoLkNvbXBvbmVudE1vdXNlRXZlbnRzO3RoaXMuY2FtZXJhLmFkZENvbXBvbmVudChfKSxfLm9ubW91c2Vkb3duKGZ1bmN0aW9uKGUpe3IuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0Lm1vdXNlRG93bihlKSwhMD09PWUuYWx0S2V5JiYoci5hbHRLZXlQcmVzc2VkPSEwKSxudWxsIT1yLl9vbm1vdXNlZG93biYmci5fb25tb3VzZWRvd24oKX0pLF8ub25tb3VzZXVwKGZ1bmN0aW9uKGUpe3IuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0Lm1vdXNlVXAoZSksITE9PT1lLmFsdEtleSYmKHIuYWx0S2V5UHJlc3NlZD0hMSksbnVsbCE9ci5fb25tb3VzZXVwJiZyLl9vbm1vdXNldXAoKX0pLF8ub25tb3VzZW1vdmUoZnVuY3Rpb24oZSx0KXtudWxsIT1yLl9vbm1vdXNlbW92ZSYmci5fb25tb3VzZW1vdmUoKSwhMT09PXIuX3ByZXZlbnRNb3ZlJiYoKHIuY29tcF9wcm9qZWN0aW9uLmdldFByb2plY3Rpb24oKT09PWQuQ29uc3RhbnRzLlBST0pFQ1RJT05fVFlQRVMuUEVSU1BFQ1RJVkV8fCEwPT09ci5fdXNlQWx0S2V5JiYhMD09PXIuYWx0S2V5UHJlc3NlZHx8ITE9PT1yLl91c2VBbHRLZXkpJiZyLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5tb3VzZU1vdmUoZSksITA9PT1yLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5pc1JpZ2h0QnRuQWN0aXZlKCkmJnIuY29tcF9wcm9qZWN0aW9uLmdldFByb2plY3Rpb24oKT09PWQuQ29uc3RhbnRzLlBST0pFQ1RJT05fVFlQRVMuT1JUSE8mJiEwPT09ci5hbHRLZXlQcmVzc2VkJiYodC5lWzJdPjA/ci5jb21wX3Byb2plY3Rpb24uc2V0Rm92KHIuY29tcF9wcm9qZWN0aW9uLmdldEZvdigpKigxK01hdGguYWJzKC4wMDUqdC5lWzJdKSkpOnIuY29tcF9wcm9qZWN0aW9uLnNldEZvdihyLmNvbXBfcHJvamVjdGlvbi5nZXRGb3YoKS8oMStNYXRoLmFicyguMDA1KnQuZVsyXSkpKSkpfSksXy5vbm1vdXNld2hlZWwoZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT1lLndoZWVsRGVsdGFZJiZlLndoZWVsRGVsdGFZPj0wfHx2b2lkIDAhPT1lLmRlbHRhWSYmZS5kZWx0YVk8PTA/ci5jb21wX3Byb2plY3Rpb24uc2V0Rm92KHIuY29tcF9wcm9qZWN0aW9uLmdldEZvdigpLzEuMSk6ci5jb21wX3Byb2plY3Rpb24uc2V0Rm92KDEuMSpyLmNvbXBfcHJvamVjdGlvbi5nZXRGb3YoKSksci5jb21wX3Byb2plY3Rpb24uZ2V0UHJvamVjdGlvbigpPT09ZC5Db25zdGFudHMuUFJPSkVDVElPTl9UWVBFUy5PUlRITyYmKHIuY29tcF90cmFuc2Zvcm1UYXJnZXQuc2V0UG9zaXRpb25UYXJnZXQoci5jb21wX3RyYW5zZm9ybVRhcmdldC5nZXRQb3NpdGlvblRhcmdldCgpLmFkZCh0KSksci5jb21wX3RyYW5zZm9ybVRhcmdldC5zZXRQb3NpdGlvbkdvYWwoci5jb21wX3RyYW5zZm9ybVRhcmdldC5nZXRQb3NpdGlvbkdvYWwoKS5hZGQodCkpKSxudWxsIT1yLl9vbm1vdXNld2hlZWwmJnIuX29ubW91c2V3aGVlbCgpfSl9cmV0dXJuIGkoZSxbe2tleTpcInNldFZpZXdcIix2YWx1ZTpmdW5jdGlvbihlKXtzd2l0Y2godGhpcy5jb21wX3Byb2plY3Rpb24uc2V0UHJvamVjdGlvbihkLkNvbnN0YW50cy5QUk9KRUNUSU9OX1RZUEVTLk9SVEhPKSx0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LnJlc2V0KCksZSl7Y2FzZSBkLkNvbnN0YW50cy5WSUVXX1RZUEVTLkxFRlQ6dGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldC55YXcoOTApO2JyZWFrO2Nhc2UgZC5Db25zdGFudHMuVklFV19UWVBFUy5SSUdIVDp0aGlzLmNvbXBfdHJhbnNmb3JtVGFyZ2V0LnlhdygtOTApO2JyZWFrO2Nhc2UgZC5Db25zdGFudHMuVklFV19UWVBFUy5GUk9OVDpjYXNlIGQuQ29uc3RhbnRzLlZJRVdfVFlQRVMuQkFDSzpicmVhaztjYXNlIGQuQ29uc3RhbnRzLlZJRVdfVFlQRVMuVE9QOnRoaXMuY29tcF90cmFuc2Zvcm1UYXJnZXQucGl0Y2goLTg5LjkpO2JyZWFrO2Nhc2UgZC5Db25zdGFudHMuVklFV19UWVBFUy5CT1RUT006dGhpcy5jb21wX3RyYW5zZm9ybVRhcmdldC5waXRjaCg5MCl9fX0se2tleTpcInNldExlZnRCdXR0b25BY3Rpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5zZXRMZWZ0QnV0dG9uQWN0aW9uKGUpfX0se2tleTpcInNldE1pZGRsZUJ1dHRvbkFjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LnNldE1pZGRsZUJ1dHRvbkFjdGlvbihlKX19LHtrZXk6XCJzZXRSaWdodEJ1dHRvbkFjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY29tcF9jb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LnNldFJpZ2h0QnV0dG9uQWN0aW9uKGUpfX0se2tleTpcImlzQWx0S2V5RW5hYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZUFsdEtleX19LHtrZXk6XCJpc0FsdEtleVByZXNzZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFsdEtleVByZXNzZWR9fSx7a2V5Olwic2V0VmVsb2NpdHlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbXBfY29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5zZXRWZWxvY2l0eShlKX19LHtrZXk6XCJzZXRGb3ZcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbXBfcHJvamVjdGlvbi5zZXRGb3YoZSl9fSx7a2V5OlwiZ2V0Rm92XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wX3Byb2plY3Rpb24uZ2V0Rm92KCl9fV0sW3trZXk6XCJwcmV2ZW50TW92ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3ByZXZlbnRNb3ZlPWV9fSx7a2V5OlwidXNlQWx0S2V5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdXNlQWx0S2V5PWV9fV0pLGV9KCk7bi5TaW1wbGVDYW1lcmE9ZyxyLlNpbXBsZUNhbWVyYT1nLHQuZXhwb3J0cy5TaW1wbGVDYW1lcmE9Z30pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi4vLi4vQ29tcG9uZW50Q29udHJvbGxlclRyYW5zZm9ybVRhcmdldC5jbGFzc1wiOjQsXCIuLi8uLi9Db21wb25lbnRLZXlib2FyZEV2ZW50cy5jbGFzc1wiOjUsXCIuLi8uLi9Db21wb25lbnRNb3VzZUV2ZW50cy5jbGFzc1wiOjYsXCIuLi8uLi9Db21wb25lbnRQcm9qZWN0aW9uLmNsYXNzXCI6NyxcIi4uLy4uL0NvbXBvbmVudFRyYW5zZm9ybVRhcmdldC5jbGFzc1wiOjksXCIuLi8uLi9Db21wb25lbnRfR1BVLmNsYXNzXCI6MTAsXCIuLi8uLi9Db25zdGFudHNcIjoxMSxcIi4uLy4uL05vZGUuY2xhc3NcIjoxM31dLDE2OltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG4uU2ltcGxlTm9kZT12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoXCIuLi8uLi9Db21wb25lbnRUcmFuc2Zvcm0uY2xhc3NcIiksYT1lKFwiLi4vLi4vQ29tcG9uZW50X0dQVS5jbGFzc1wiKSxsPWUoXCIuLi8uLi9WRlBfUkdCLmNsYXNzXCIpLHU9ZShcIi4uLy4uL0NvbnN0YW50c1wiKSxjPW4uU2ltcGxlTm9kZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX3NjZT10LHRoaXMuX3Byb2plY3Q9dGhpcy5fc2NlLmdldExvYWRlZFByb2plY3QoKSx0aGlzLm5vZGU9bmV3IE5vZGUsdGhpcy5fcHJvamVjdC5nZXRBY3RpdmVTdGFnZSgpLmFkZE5vZGUodGhpcy5ub2RlKSx0aGlzLl9tZXNoPW51bGw7dmFyIG49bmV3IHMuQ29tcG9uZW50VHJhbnNmb3JtO3RoaXMubm9kZS5hZGRDb21wb25lbnQobiksdGhpcy5jb21wX3JlbmRlcmVyPW5ldyBhLkNvbXBvbmVudF9HUFUsdGhpcy5ub2RlLmFkZENvbXBvbmVudCh0aGlzLmNvbXBfcmVuZGVyZXIpfXJldHVybiBpKGUsW3trZXk6XCJzZXRNZXNoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9tZXNoPWUsdGhpcy5jb21wX3JlbmRlcmVyLnNldEdQVUZvcih0aGlzLmNvbXBfcmVuZGVyZXIuZ2wse1wiZmxvYXQ0KmF0dHIgdmVydGV4UG9zXCI6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fbWVzaC52ZXJ0ZXhBcnJheX0sXCJmbG9hdDQqYXR0ciB2ZXJ0ZXhOb3JtYWxcIjpmdW5jdGlvbigpe3JldHVybiB0Ll9tZXNoLm5vcm1hbEFycmF5fSxcImZsb2F0NCphdHRyIHZlcnRleFRleHR1cmVcIjpmdW5jdGlvbigpe3JldHVybiB0Ll9tZXNoLnRleHR1cmVBcnJheX0sXCJmbG9hdCphdHRyIHZlcnRleFRleHR1cmVVbml0XCI6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fbWVzaC50ZXh0dXJlVW5pdEFycmF5fSxpbmRpY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHQuX21lc2guaW5kZXhBcnJheX0sXCJtYXQ0IFBNYXRyaXhcIjpmdW5jdGlvbigpe3JldHVybiB0Ll9wcm9qZWN0LmdldEFjdGl2ZVN0YWdlKCkuZ2V0QWN0aXZlQ2FtZXJhKCkuZ2V0Q29tcG9uZW50KHUuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5QUk9KRUNUSU9OKS5nZXRNYXRyaXgoKS50cmFuc3Bvc2UoKS5lfSxcIm1hdDQgY2FtZXJhV01hdHJpeFwiOmZ1bmN0aW9uKCl7cmV0dXJuIHQuX3Byb2plY3QuZ2V0QWN0aXZlU3RhZ2UoKS5nZXRBY3RpdmVDYW1lcmEoKS5nZXRDb21wb25lbnQodS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLlRSQU5TRk9STV9UQVJHRVQpLmdldE1hdHJpeCgpLnRyYW5zcG9zZSgpLmV9LFwibWF0NCBub2RlV01hdHJpeFwiOmZ1bmN0aW9uKCl7cmV0dXJuIHQubm9kZS5nZXRDb21wb25lbnQodS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLlRSQU5TRk9STSkuZ2V0TWF0cml4UG9zaXRpb24oKS50cmFuc3Bvc2UoKS5lfSxcImZsb2F0IG5vZGVzU2l6ZVwiOmZ1bmN0aW9uKCl7cmV0dXJuIDMwfSxcImZsb2F0NCogdGV4QWxiZWRvXCI6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fbWVzaC52ZXJ0ZXhBcnJheX19LHt0eXBlOlwiR1JBUEhJQ1wiLGNvbmZpZzpuZXcgbC5WRlBfUkdCKDEpLmdldFNyYygpLGRyYXdNb2RlOjQsZGVwdGhUZXN0OiEwLGJsZW5kOiEwLGJsZW5kRXF1YXRpb246dS5Db25zdGFudHMuQkxFTkRJTkdfRVFVQVRJT05fVFlQRVMuRlVOQ19BREQsYmxlbmRTcmNNb2RlOnUuQ29uc3RhbnRzLkJMRU5ESU5HX01PREVTLlNSQ19BTFBIQSxibGVuZERzdE1vZGU6dS5Db25zdGFudHMuQkxFTkRJTkdfTU9ERVMuT05FX01JTlVTX1NSQ19BTFBIQX0pLHRoaXMuY29tcF9yZW5kZXJlci5zZXRBcmdVcGRhdGFibGUoXCJQTWF0cml4XCIsITApLHRoaXMuY29tcF9yZW5kZXJlci5zZXRBcmdVcGRhdGFibGUoXCJjYW1lcmFXTWF0cml4XCIsITApLHRoaXMuY29tcF9yZW5kZXJlci5zZXRBcmdVcGRhdGFibGUoXCJub2RlV01hdHJpeFwiLCEwKSx0aGlzLmNvbXBfcmVuZGVyZXIuZ2V0Q29tcG9uZW50QnVmZmVyQXJnKFwiUkdCXCIsdGhpcy5fcHJvamVjdC5nZXRBY3RpdmVTdGFnZSgpLmdldEFjdGl2ZUNhbWVyYSgpLmdldENvbXBvbmVudCh1LkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuR1BVKSksdGhpcy5jb21wX3JlbmRlcmVyLmdwdWZHLm9uUHJlUHJvY2Vzc0dyYXBoaWMoMCxmdW5jdGlvbigpe30pfX0se2tleTpcInNldEltYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBJbWFnZTtuLm9ubG9hZD1mdW5jdGlvbigpe3QuY29tcF9yZW5kZXJlci5zZXRBcmcoXCJ0ZXhBbGJlZG9cIixmdW5jdGlvbigpe3JldHVybiBufSl9LG4uc3JjPWV9fV0pLGV9KCk7ci5TaW1wbGVOb2RlPWMsdC5leHBvcnRzLlNpbXBsZU5vZGU9Y30pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi4vLi4vQ29tcG9uZW50VHJhbnNmb3JtLmNsYXNzXCI6OCxcIi4uLy4uL0NvbXBvbmVudF9HUFUuY2xhc3NcIjoxMCxcIi4uLy4uL0NvbnN0YW50c1wiOjExLFwiLi4vLi4vVkZQX1JHQi5jbGFzc1wiOjIzfV0sMTc6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxpPW4uUHJvamVjdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSksdGhpcy5zdGFnZXM9W10sdGhpcy5hY3RpdmVTdGFnZT1udWxsLHRoaXMuZ2w9bnVsbH1yZXR1cm4gbyhlLFt7a2V5Olwic2V0QWN0aXZlU3RhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmFjdGl2ZVN0YWdlPWUsdGhpcy5hY3RpdmVTdGFnZS5zZXRXZWJHTENvbnRleHQodGhpcy5nbCl9fSx7a2V5OlwiZ2V0QWN0aXZlU3RhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2ZVN0YWdlfX0se2tleTpcImFkZFN0YWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zdGFnZXMucHVzaChlKX19LHtrZXk6XCJzZXRXZWJHTENvbnRleHRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdsPWV9fV0pLGV9KCk7ZS5Qcm9qZWN0PWksdC5leHBvcnRzLlByb2plY3Q9aX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDE4OltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG4uU0NFPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHM9ZShcIi4vU3lzdGVtRXZlbnRzLmNsYXNzXCIpLGE9ZShcIi4vVXRpbHMuY2xhc3NcIiksbD1lKFwiLi9Db25zdGFudHNcIiksdT1uLlNDRT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy50YXJnZXQ9bnVsbCx0aGlzLnByb2plY3Q9bnVsbCx0aGlzLmRpbWVuc2lvbnM9bnVsbCx0aGlzLmNhbnZhcz1udWxsLHRoaXMuZ2w9bnVsbCx0aGlzLl9VST1udWxsLHRoaXMuX2VuYWJsZVVJPW51bGwsdGhpcy5fZXZlbnRzPW51bGx9cmV0dXJuIGkoZSxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLnRhcmdldD12b2lkIDAhPT1lLnRhcmdldD9lLnRhcmdldDp2b2lkIDAsdGhpcy5kaW1lbnNpb25zPXZvaWQgMCE9PWUuZGltZW5zaW9ucz9lLmRpbWVuc2lvbnM6e3dpZHRoOjUxMixoZWlnaHQ6NTEyfSx0aGlzLl9lbmFibGVVST12b2lkIDAhPT1lLmVuYWJsZVVJJiZlLmVuYWJsZVVJLG51bGwhPXRoaXMudGFyZ2V0KXtpZih0aGlzLmNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHRoaXMudGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKSx0aGlzLnNldERpbWVuc2lvbnModGhpcy5kaW1lbnNpb25zLndpZHRoLHRoaXMuZGltZW5zaW9ucy5oZWlnaHQpLHZvaWQgMCE9PWUuZ2wmJm51bGwhPT1lLmdsKXRoaXMuZ2w9ZS5nbDtlbHNlIGlmKCEodGhpcy5nbD1hLlV0aWxzLmdldFdlYkdMQ29udGV4dEZyb21DYW52YXModGhpcy5jYW52YXMpKSlyZXR1cm4gYWxlcnQoXCJObyBXZWJHTFJlbmRlcmluZ0NvbnRleHRcIiksITF9ZWxzZSBhbGVydChcIlRhcmdldCBESVYgcmVxdWlyZWRcIil9fSx7a2V5OlwibG9hZFByb2plY3RcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb2plY3Q9ZSx0aGlzLnByb2plY3Quc2V0V2ViR0xDb250ZXh0KHRoaXMuZ2wpLCEwPT09dGhpcy5fZW5hYmxlVUkmJih0aGlzLl9VST1uZXcgVUkodGhpcy5wcm9qZWN0KS5yZW5kZXIodGhpcy50YXJnZXQsdGhpcy5jYW52YXMpKSx0aGlzLl9ldmVudHM9bmV3IHMuU3lzdGVtRXZlbnRzKHRoaXMsdGhpcy5jYW52YXMpLHRoaXMuX2V2ZW50cy5pbml0aWFsaXplKCl9fSx7a2V5OlwiZ2V0TG9hZGVkUHJvamVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvamVjdH19LHtrZXk6XCJnZXRDYW52YXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhc319LHtrZXk6XCJnZXRFdmVudHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHN9fSx7a2V5Olwic2V0RGltZW5zaW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy5kaW1lbnNpb25zPXt3aWR0aDplLGhlaWdodDp0fSx0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHRoaXMuZGltZW5zaW9ucy53aWR0aCksdGhpcy5jYW52YXMuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsdGhpcy5kaW1lbnNpb25zLmhlaWdodCksbnVsbCE9dGhpcy5wcm9qZWN0JiZudWxsIT10aGlzLnByb2plY3QuZ2V0QWN0aXZlU3RhZ2UoKSl7dmFyIG49dGhpcy5wcm9qZWN0LmdldEFjdGl2ZVN0YWdlKCkuZ2V0QWN0aXZlQ2FtZXJhKCk7aWYobnVsbCE9bil7dmFyIHI9bi5nZXRDb21wb25lbnQobC5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLlBST0pFQ1RJT04pLG89bi5nZXRDb21wb25lbnQobC5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLkdQVSk7ci5zZXRSZXNvbHV0aW9uKHRoaXMuZGltZW5zaW9ucy53aWR0aCx0aGlzLmRpbWVuc2lvbnMud2lkdGgpLG8uc2V0QXJnKFwiUkdCXCIsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmRpbWVuc2lvbnMud2lkdGgqdGhpcy5kaW1lbnNpb25zLndpZHRoKjQpfS5iaW5kKHRoaXMpKX19fX0se2tleTpcImdldERpbWVuc2lvbnNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpbWVuc2lvbnN9fV0pLGV9KCk7ci5TQ0U9dSx0LmV4cG9ydHMuU0NFPXV9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vQ29uc3RhbnRzXCI6MTEsXCIuL1N5c3RlbUV2ZW50cy5jbGFzc1wiOjIxLFwiLi9VdGlscy5jbGFzc1wiOjIyfV0sMTk6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksbi5TdGFnZT12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoXCIuL0NvbnN0YW50c1wiKSxhPW4uU3RhZ2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMubm9kZXM9W10sdGhpcy5hY3RpdmVDYW1lcmE9bnVsbCx0aGlzLnNlbGVjdGVkTm9kZT1udWxsLHRoaXMucGF1c2VkPSExLHRoaXMuYmFja2dyb3VuZENvbG9yPVswLDAsMCwxXSx0aGlzLmdsPW51bGwsdGhpcy5fb250aWNrPW51bGx9cmV0dXJuIGkoZSxbe2tleTpcInNldEFjdGl2ZUNhbWVyYVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuYWN0aXZlQ2FtZXJhPWV9fSx7a2V5OlwiZ2V0QWN0aXZlQ2FtZXJhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmVDYW1lcmF9fSx7a2V5Olwic2V0U2VsZWN0ZWROb2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zZWxlY3RlZE5vZGU9ZX19LHtrZXk6XCJnZXRTZWxlY3RlZE5vZGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkTm9kZX19LHtrZXk6XCJhZGROb2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ub2Rlcy5wdXNoKGUpLGUuaW5pdGlhbGl6ZShudWxsIT1lLmdldE5hbWUoKT9lLmdldE5hbWUoKTpcIm5vZGUgXCIrKHRoaXMubm9kZXMubGVuZ3RoLTEpLHRoaXMuZ2wpfX0se2tleTpcInJlbW92ZU5vZGVcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMubm9kZXMubGVuZ3RoO3QrKylpZih0aGlzLm5vZGVzW3RdPT09ZSl7dGhpcy5ub2Rlcy5zcGxpY2UodCwxKTticmVha319fSx7a2V5OlwiZ2V0Tm9kZXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29udGljaz1lLHRoaXMucGF1c2VkPSExLHRoaXMuc2V0QmFja2dyb3VuZENvbG9yKHRoaXMuYmFja2dyb3VuZENvbG9yKSx0aGlzLnRpY2soKX19LHtrZXk6XCJwYXVzZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wYXVzZWQ9ITB9fSx7a2V5Olwic2V0V2ViR0xDb250ZXh0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nbD1lfX0se2tleTpcInNldEJhY2tncm91bmRDb2xvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuYmFja2dyb3VuZENvbG9yPWV9fSx7a2V5OlwiZ2V0QmFja2dyb3VuZENvbG9yXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iYWNrZ3JvdW5kQ29sb3J9fSx7a2V5OlwiZ2V0V2ViR0xDb250ZXh0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nbH19LHtrZXk6XCJ0aWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLmFjdGl2ZUNhbWVyYSl7dm9pZCAwIT09dGhpcy5fb250aWNrJiZudWxsIT09dGhpcy5fb250aWNrJiZ0aGlzLl9vbnRpY2soKTt2YXIgZT10aGlzLmFjdGl2ZUNhbWVyYS5nZXRDb21wb25lbnQocy5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLlBST0pFQ1RJT04pLmdldFJlc29sdXRpb24oKTt0aGlzLmdsLnZpZXdwb3J0KDAsMCxlLndpZHRoLGUuaGVpZ2h0KSx0aGlzLmdsLmNsZWFyQ29sb3IodGhpcy5iYWNrZ3JvdW5kQ29sb3JbMF0sdGhpcy5iYWNrZ3JvdW5kQ29sb3JbMV0sdGhpcy5iYWNrZ3JvdW5kQ29sb3JbMl0sdGhpcy5iYWNrZ3JvdW5kQ29sb3JbM10pLHRoaXMuZ2wuY2xlYXJEZXB0aCgxKSx0aGlzLmdsLmRlcHRoRnVuYyh0aGlzLmdsLkxFUVVBTCk7dmFyIHQ9dGhpcy5hY3RpdmVDYW1lcmEuZ2V0Q29tcG9uZW50KHMuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5HUFUpO3ZvaWQgMCE9PXQmJm51bGwhPT10JiZ0LmdwdWZHLmZpbGxBcmcoXCJSR0JcIixbdGhpcy5iYWNrZ3JvdW5kQ29sb3JbMF0sdGhpcy5iYWNrZ3JvdW5kQ29sb3JbMV0sdGhpcy5iYWNrZ3JvdW5kQ29sb3JbMl0sdGhpcy5iYWNrZ3JvdW5kQ29sb3JbM11dKTtmb3IodmFyIG49MCxyPXRoaXMubm9kZXMubGVuZ3RoO248cjtuKyspaWYodGhpcy5ub2Rlc1tuXSE9PXRoaXMuYWN0aXZlQ2FtZXJhKXtmb3IodmFyIG8gaW4gdGhpcy5ub2Rlc1tuXS5nZXRDb21wb25lbnRzKCkpe3ZhciBpPXRoaXMubm9kZXNbbl0uZ2V0Q29tcG9uZW50KG8pO251bGwhPWkudGljayYmaS50aWNrKCl9bnVsbCE9dGhpcy5ub2Rlc1tuXS5vblRpY2smJnRoaXMubm9kZXNbbl0ub25UaWNrKCl9Zm9yKHZhciBhPTAsbD10aGlzLm5vZGVzLmxlbmd0aDthPGw7YSsrKWlmKHRoaXMubm9kZXNbYV0hPT10aGlzLmFjdGl2ZUNhbWVyYSlmb3IodmFyIHUgaW4gdGhpcy5ub2Rlc1thXS5nZXRDb21wb25lbnRzKCkpe3ZhciBjPXRoaXMubm9kZXNbYV0uZ2V0Q29tcG9uZW50KHUpO2lmKG51bGwhPWMuZ3B1ZkcpZm9yKHZhciBoIGluIGMuZ3B1ZkcudmVydGV4RnJhZ21lbnRQcm9ncmFtcyl7dmFyIGY9Yy5ncHVmRy52ZXJ0ZXhGcmFnbWVudFByb2dyYW1zW2hdLGQ9V2ViQ0xHTFV0aWxzLmdldE91dHB1dEJ1ZmZlcnMoZixjLmdwdWZHLl9hcmdzVmFsdWVzKTshMD09PWYuZW5hYmxlZCYmbnVsbCE9ZCYmKGMuZ3B1ZkcuX2dsLmJpbmRGcmFtZWJ1ZmZlcihjLmdwdWZHLl9nbC5GUkFNRUJVRkZFUixkWzBdLmZCdWZmZXIpLGMuZ3B1ZkcuX2dsLmNsZWFyKGMuZ3B1ZkcuX2dsLkRFUFRIX0JVRkZFUl9CSVQpLGMuZ3B1ZkcuX2dsLmJpbmRGcmFtZWJ1ZmZlcihjLmdwdWZHLl9nbC5GUkFNRUJVRkZFUixkWzBdLmZCdWZmZXJUZW1wKSxjLmdwdWZHLl9nbC5jbGVhcihjLmdwdWZHLl9nbC5ERVBUSF9CVUZGRVJfQklUKSl9fWZvcih2YXIgZyBpbiB0aGlzLmFjdGl2ZUNhbWVyYS5nZXRDb21wb25lbnRzKCkpe3ZhciBfPXRoaXMuYWN0aXZlQ2FtZXJhLmdldENvbXBvbmVudChnKTtudWxsIT1fLnRpY2smJl8udGljaygpfX19fV0pLGV9KCk7ci5TdGFnZT1hLHQuZXhwb3J0cy5TdGFnZT1hfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7XCIuL0NvbnN0YW50c1wiOjExfV0sMjA6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gbmV3IGEoZSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gbmV3IGwoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKTtuLiRNMTY9byxuLiRWMz1pO3ZhciBhPW4uU3Rvcm1NMTY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKSx0aGlzLmU9bnVsbCx0aGlzLmU9dm9pZCAwIT09dCYmbnVsbCE9PXQ/bmV3IEZsb2F0MzJBcnJheSh0KTpuZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSl9cmV0dXJuIHMoZSxbe2tleTpcInhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbyh0IGluc3RhbmNlb2YgZT9bdGhpcy5lWzBdKnQuZVswXSt0aGlzLmVbMV0qdC5lWzRdK3RoaXMuZVsyXSp0LmVbOF0rdGhpcy5lWzNdKnQuZVsxMl0sdGhpcy5lWzBdKnQuZVsxXSt0aGlzLmVbMV0qdC5lWzVdK3RoaXMuZVsyXSp0LmVbOV0rdGhpcy5lWzNdKnQuZVsxM10sdGhpcy5lWzBdKnQuZVsyXSt0aGlzLmVbMV0qdC5lWzZdK3RoaXMuZVsyXSp0LmVbMTBdK3RoaXMuZVszXSp0LmVbMTRdLHRoaXMuZVswXSp0LmVbM10rdGhpcy5lWzFdKnQuZVs3XSt0aGlzLmVbMl0qdC5lWzExXSt0aGlzLmVbM10qdC5lWzE1XSx0aGlzLmVbNF0qdC5lWzBdK3RoaXMuZVs1XSp0LmVbNF0rdGhpcy5lWzZdKnQuZVs4XSt0aGlzLmVbN10qdC5lWzEyXSx0aGlzLmVbNF0qdC5lWzFdK3RoaXMuZVs1XSp0LmVbNV0rdGhpcy5lWzZdKnQuZVs5XSt0aGlzLmVbN10qdC5lWzEzXSx0aGlzLmVbNF0qdC5lWzJdK3RoaXMuZVs1XSp0LmVbNl0rdGhpcy5lWzZdKnQuZVsxMF0rdGhpcy5lWzddKnQuZVsxNF0sdGhpcy5lWzRdKnQuZVszXSt0aGlzLmVbNV0qdC5lWzddK3RoaXMuZVs2XSp0LmVbMTFdK3RoaXMuZVs3XSp0LmVbMTVdLHRoaXMuZVs4XSp0LmVbMF0rdGhpcy5lWzldKnQuZVs0XSt0aGlzLmVbMTBdKnQuZVs4XSt0aGlzLmVbMTFdKnQuZVsxMl0sdGhpcy5lWzhdKnQuZVsxXSt0aGlzLmVbOV0qdC5lWzVdK3RoaXMuZVsxMF0qdC5lWzldK3RoaXMuZVsxMV0qdC5lWzEzXSx0aGlzLmVbOF0qdC5lWzJdK3RoaXMuZVs5XSp0LmVbNl0rdGhpcy5lWzEwXSp0LmVbMTBdK3RoaXMuZVsxMV0qdC5lWzE0XSx0aGlzLmVbOF0qdC5lWzNdK3RoaXMuZVs5XSp0LmVbN10rdGhpcy5lWzEwXSp0LmVbMTFdK3RoaXMuZVsxMV0qdC5lWzE1XSx0aGlzLmVbMTJdKnQuZVswXSt0aGlzLmVbMTNdKnQuZVs0XSt0aGlzLmVbMTRdKnQuZVs4XSt0aGlzLmVbMTVdKnQuZVsxMl0sdGhpcy5lWzEyXSp0LmVbMV0rdGhpcy5lWzEzXSp0LmVbNV0rdGhpcy5lWzE0XSp0LmVbOV0rdGhpcy5lWzE1XSp0LmVbMTNdLHRoaXMuZVsxMl0qdC5lWzJdK3RoaXMuZVsxM10qdC5lWzZdK3RoaXMuZVsxNF0qdC5lWzEwXSt0aGlzLmVbMTVdKnQuZVsxNF0sdGhpcy5lWzEyXSp0LmVbM10rdGhpcy5lWzEzXSp0LmVbN10rdGhpcy5lWzE0XSp0LmVbMTFdK3RoaXMuZVsxNV0qdC5lWzE1XV06WzAsMCwwLHRoaXMuZVswXSp0LmVbMF0rdGhpcy5lWzFdKnQuZVsxXSt0aGlzLmVbMl0qdC5lWzJdLDAsMCwwLHRoaXMuZVs0XSp0LmVbMF0rdGhpcy5lWzVdKnQuZVsxXSt0aGlzLmVbNl0qdC5lWzJdLDAsMCwwLHRoaXMuZVs4XSp0LmVbMF0rdGhpcy5lWzldKnQuZVsxXSt0aGlzLmVbMTBdKnQuZVsyXSwwLDAsMCx0aGlzLmVbMTJdKnQuZVswXSt0aGlzLmVbMTNdKnQuZVsxXSt0aGlzLmVbMTRdKnQuZVsyXV0pfX0se2tleTpcInRyYW5zcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG8oW3RoaXMuZVswXSx0aGlzLmVbNF0sdGhpcy5lWzhdLHRoaXMuZVsxMl0sdGhpcy5lWzFdLHRoaXMuZVs1XSx0aGlzLmVbOV0sdGhpcy5lWzEzXSx0aGlzLmVbMl0sdGhpcy5lWzZdLHRoaXMuZVsxMF0sdGhpcy5lWzE0XSx0aGlzLmVbM10sdGhpcy5lWzddLHRoaXMuZVsxMV0sdGhpcy5lWzE1XV0pfX0se2tleTpcImludmVyc2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPW8odGhpcy5lKS50cmFuc3Bvc2UoKS5lLHQ9bmV3IEZsb2F0MzJBcnJheSgxMiksbj1uZXcgRmxvYXQzMkFycmF5KDE2KTt0WzBdPWVbMTBdKmVbMTVdLHRbMV09ZVsxMV0qZVsxNF0sdFsyXT1lWzldKmVbMTVdLHRbM109ZVsxMV0qZVsxM10sdFs0XT1lWzldKmVbMTRdLHRbNV09ZVsxMF0qZVsxM10sdFs2XT1lWzhdKmVbMTVdLHRbN109ZVsxMV0qZVsxMl0sdFs4XT1lWzhdKmVbMTRdLHRbOV09ZVsxMF0qZVsxMl0sdFsxMF09ZVs4XSplWzEzXSx0WzExXT1lWzldKmVbMTJdLG5bMF09dFswXSplWzVdK3RbM10qZVs2XSt0WzRdKmVbN10sblswXS09dFsxXSplWzVdK3RbMl0qZVs2XSt0WzVdKmVbN10sblsxXT10WzFdKmVbNF0rdFs2XSplWzZdK3RbOV0qZVs3XSxuWzFdLT10WzBdKmVbNF0rdFs3XSplWzZdK3RbOF0qZVs3XSxuWzJdPXRbMl0qZVs0XSt0WzddKmVbNV0rdFsxMF0qZVs3XSxuWzJdLT10WzNdKmVbNF0rdFs2XSplWzVdK3RbMTFdKmVbN10sblszXT10WzVdKmVbNF0rdFs4XSplWzVdK3RbMTFdKmVbNl0sblszXS09dFs0XSplWzRdK3RbOV0qZVs1XSt0WzEwXSplWzZdLG5bNF09dFsxXSplWzFdK3RbMl0qZVsyXSt0WzVdKmVbM10sbls0XS09dFswXSplWzFdK3RbM10qZVsyXSt0WzRdKmVbM10sbls1XT10WzBdKmVbMF0rdFs3XSplWzJdK3RbOF0qZVszXSxuWzVdLT10WzFdKmVbMF0rdFs2XSplWzJdK3RbOV0qZVszXSxuWzZdPXRbM10qZVswXSt0WzZdKmVbMV0rdFsxMV0qZVszXSxuWzZdLT10WzJdKmVbMF0rdFs3XSplWzFdK3RbMTBdKmVbM10sbls3XT10WzRdKmVbMF0rdFs5XSplWzFdK3RbMTBdKmVbMl0sbls3XS09dFs1XSplWzBdK3RbOF0qZVsxXSt0WzExXSplWzJdLHRbMF09ZVsyXSplWzddLHRbMV09ZVszXSplWzZdLHRbMl09ZVsxXSplWzddLHRbM109ZVszXSplWzVdLHRbNF09ZVsxXSplWzZdLHRbNV09ZVsyXSplWzVdLHRbNl09ZVswXSplWzddLHRbN109ZVszXSplWzRdLHRbOF09ZVswXSplWzZdLHRbOV09ZVsyXSplWzRdLHRbMTBdPWVbMF0qZVs1XSx0WzExXT1lWzFdKmVbNF0sbls4XT10WzBdKmVbMTNdK3RbM10qZVsxNF0rdFs0XSplWzE1XSxuWzhdLT10WzFdKmVbMTNdK3RbMl0qZVsxNF0rdFs1XSplWzE1XSxuWzldPXRbMV0qZVsxMl0rdFs2XSplWzE0XSt0WzldKmVbMTVdLG5bOV0tPXRbMF0qZVsxMl0rdFs3XSplWzE0XSt0WzhdKmVbMTVdLG5bMTBdPXRbMl0qZVsxMl0rdFs3XSplWzEzXSt0WzEwXSplWzE1XSxuWzEwXS09dFszXSplWzEyXSt0WzZdKmVbMTNdK3RbMTFdKmVbMTVdLG5bMTFdPXRbNV0qZVsxMl0rdFs4XSplWzEzXSt0WzExXSplWzE0XSxuWzExXS09dFs0XSplWzEyXSt0WzldKmVbMTNdK3RbMTBdKmVbMTRdLG5bMTJdPXRbMl0qZVsxMF0rdFs1XSplWzExXSt0WzFdKmVbOV0sblsxMl0tPXRbNF0qZVsxMV0rdFswXSplWzldK3RbM10qZVsxMF0sblsxM109dFs4XSplWzExXSt0WzBdKmVbOF0rdFs3XSplWzEwXSxuWzEzXS09dFs2XSplWzEwXSt0WzldKmVbMTFdK3RbMV0qZVs4XSxuWzE0XT10WzZdKmVbOV0rdFsxMV0qZVsxMV0rdFszXSplWzhdLG5bMTRdLT10WzEwXSplWzExXSt0WzJdKmVbOF0rdFs3XSplWzldLG5bMTVdPXRbMTBdKmVbMTBdK3RbNF0qZVs4XSt0WzldKmVbOV0sblsxNV0tPXRbOF0qZVs5XSt0WzExXSplWzEwXSt0WzVdKmVbOF07dmFyIHI9ZVswXSpuWzBdK2VbMV0qblsxXStlWzJdKm5bMl0rZVszXSpuWzNdO3JldHVybiBvKFtuWzBdKnIsblsxXSpyLG5bMl0qcixuWzNdKnIsbls0XSpyLG5bNV0qcixuWzZdKnIsbls3XSpyLG5bOF0qcixuWzldKnIsblsxMF0qcixuWzExXSpyLG5bMTJdKnIsblsxM10qcixuWzE0XSpyLG5bMTVdKnJdKX19LHtrZXk6XCJnZXRMZWZ0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gaShbdGhpcy5lWzBdLHRoaXMuZVs0XSx0aGlzLmVbOF1dKS5ub3JtYWxpemUoKX19LHtrZXk6XCJnZXRVcFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGkoW3RoaXMuZVsxXSx0aGlzLmVbNV0sdGhpcy5lWzldXSkubm9ybWFsaXplKCl9fSx7a2V5OlwiZ2V0Rm9yd2FyZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGkoW3RoaXMuZVsyXSx0aGlzLmVbNl0sdGhpcy5lWzEwXV0pLm5vcm1hbGl6ZSgpfX0se2tleTpcInNldFJvdGF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDAhPT1uJiZudWxsIT09biYmbnVsbCE9PW4uZVswXT92b2lkIDA9PT10fHxudWxsPT09dHx8ITA9PT10P3RoaXMueChvKFsxLDAsMCwwLDAsTWF0aC5jb3MoZSksLU1hdGguc2luKGUpLDAsMCxNYXRoLnNpbihlKSxNYXRoLmNvcyhlKSwwLDAsMCwwLDFdKSk6byhbMSwwLDAsMCwwLE1hdGguY29zKGUpLC1NYXRoLnNpbihlKSwwLDAsTWF0aC5zaW4oZSksTWF0aC5jb3MoZSksMCwwLDAsMCwxXSk6dm9pZCAwIT09biYmbnVsbCE9PW4mJm51bGwhPT1uLmVbMV0/dm9pZCAwPT09dHx8bnVsbD09PXR8fCEwPT09dD90aGlzLngobyhbTWF0aC5jb3MoZSksMCxNYXRoLnNpbihlKSwwLDAsMSwwLDAsLU1hdGguc2luKGUpLDAsTWF0aC5jb3MoZSksMCwwLDAsMCwxXSkpOm8oW01hdGguY29zKGUpLDAsTWF0aC5zaW4oZSksMCwwLDEsMCwwLC1NYXRoLnNpbihlKSwwLE1hdGguY29zKGUpLDAsMCwwLDAsMV0pOnZvaWQgMCE9PW4mJm51bGwhPT1uJiZudWxsIT09bi5lWzJdP3ZvaWQgMD09PXR8fG51bGw9PT10fHwhMD09PXQ/dGhpcy54KG8oW01hdGguY29zKGUpLC1NYXRoLnNpbihlKSwwLDAsTWF0aC5zaW4oZSksTWF0aC5jb3MoZSksMCwwLDAsMCwxLDAsMCwwLDAsMV0pKTpvKFtNYXRoLmNvcyhlKSwtTWF0aC5zaW4oZSksMCwwLE1hdGguc2luKGUpLE1hdGguY29zKGUpLDAsMCwwLDAsMSwwLDAsMCwwLDFdKTp2b2lkIDB9fSx7a2V5Olwic2V0Um90YXRpb25YXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zZXRSb3RhdGlvbihlLHQsaShbMSwwLDBdKSl9fSx7a2V5Olwic2V0Um90YXRpb25ZXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zZXRSb3RhdGlvbihlLHQsaShbMCwxLDBdKSl9fSx7a2V5Olwic2V0Um90YXRpb25aXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zZXRSb3RhdGlvbihlLHQsaShbMCwwLDFdKSl9fSx7a2V5Olwic2V0U2NhbGVcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMCE9PW4mJm51bGwhPT1uJiZudWxsIT09bi5lWzBdP3ZvaWQgMD09PXR8fG51bGw9PT10fHwhMD09PXQ/dGhpcy54KG8oW2UsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdKSk6byhbZSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV0pOnZvaWQgMCE9PW4mJm51bGwhPT1uJiZudWxsIT09bi5lWzFdP3ZvaWQgMD09PXR8fG51bGw9PT10fHwhMD09PXQ/dGhpcy54KG8oWzEsMCwwLDAsMCxlLDAsMCwwLDAsMSwwLDAsMCwwLDFdKSk6byhbMSwwLDAsMCwwLGUsMCwwLDAsMCwxLDAsMCwwLDAsMV0pOnZvaWQgMCE9PW4mJm51bGwhPT1uJiZudWxsIT09bi5lWzJdP3ZvaWQgMD09PXR8fG51bGw9PT10fHwhMD09PXQ/dGhpcy54KG8oWzEsMCwwLDAsMCwxLDAsMCwwLDAsZSwwLDAsMCwwLDFdKSk6byhbMSwwLDAsMCwwLDEsMCwwLDAsMCxlLDAsMCwwLDAsMV0pOnZvaWQgMH19LHtrZXk6XCJzZXRTY2FsZVhcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNldFNjYWxlKGUsdCxpKFsxLDAsMF0pKX19LHtrZXk6XCJzZXRTY2FsZVlcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNldFNjYWxlKGUsdCxpKFswLDEsMF0pKX19LHtrZXk6XCJzZXRTY2FsZVpcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNldFNjYWxlKGUsdCxpKFswLDAsMV0pKX19LHtrZXk6XCJnZXRQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGkoW3RoaXMuZVszXSx0aGlzLmVbN10sdGhpcy5lWzExXV0pfX0se2tleTpcInNldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZVszXT1lLmVbMF0sdGhpcy5lWzddPWUuZVsxXSx0aGlzLmVbMTFdPWUuZVsyXSx0aGlzfX1dLFt7a2V5OlwibWFrZUxvb2tBdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIscyxhLGwsdSxjKXt2YXIgaD1pKFtlLHQsbl0pLGY9aShbcixzLGFdKSxkPWkoW2wsdSxjXSksZz1oLnN1YnRyYWN0KGYpLm5vcm1hbGl6ZSgpLF89ZC5jcm9zcyhnKS5ub3JtYWxpemUoKSx2PWcuY3Jvc3MoXykubm9ybWFsaXplKCkscD1vKFtfLmVbMF0sXy5lWzFdLF8uZVsyXSwwLHYuZVswXSx2LmVbMV0sdi5lWzJdLDAsZy5lWzBdLGcuZVsxXSxnLmVbMl0sMCwwLDAsMCwxXSksbT1vKFsxLDAsMCwtZSwwLDEsMCwtdCwwLDAsMSwtbiwwLDAsMCwxXSk7cmV0dXJuIHAueChtKX19LHtrZXk6XCJzZXRQZXJzcGVjdGl2ZVByb2plY3Rpb25cIix2YWx1ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1NYXRoLnRhbihlKk1hdGguUEkvMzYwKSpuLHM9LWksYT10KnMsbD10Kmk7cmV0dXJuIG8oWzIqbi8obC1hKSwwLChsK2EpLyhsLWEpLDAsMCwyKm4vKGktcyksKGkrcykvKGktcyksMCwwLDAsLShyK24pLyhyLW4pLC0yKnIqbi8oci1uKSwwLDAsLTEsMF0pfX0se2tleTpcInNldE9ydGhvZ3JhcGhpY1Byb2plY3Rpb25cIix2YWx1ZTpmdW5jdGlvbihlLHQsbixyLGkscyl7cmV0dXJuIG8oWzIvKHQtZSksMCwwLC0odCtlKS8odC1lKSwwLDIvKHItbiksMCwtKHIrbikvKHItbiksMCwwLC0yLyhzLWkpLC0ocytpKS8ocy1pKSwwLDAsMCwxXSl9fV0pLGV9KCk7ZS5TdG9ybU0xNj1hLHQuZXhwb3J0cy5TdG9ybU0xNj1hLGUuJE0xNj1vLHQuZXhwb3J0cy4kTTE2PW87dmFyIGw9bi5TdG9ybVYzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSksdGhpcy5lPW5ldyBGbG9hdDMyQXJyYXkodCl9cmV0dXJuIHMoZSxbe2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBpKFt0aGlzLmVbMF0rZS5lWzBdLHRoaXMuZVsxXStlLmVbMV0sdGhpcy5lWzJdK2UuZVsyXV0pfX0se2tleTpcImNyb3NzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoW3RoaXMuZVsxXSplLmVbMl0tdGhpcy5lWzJdKmUuZVsxXSx0aGlzLmVbMl0qZS5lWzBdLXRoaXMuZVswXSplLmVbMl0sdGhpcy5lWzBdKmUuZVsxXS10aGlzLmVbMV0qZS5lWzBdXSl9fSx7a2V5OlwiZGlzdGFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5zcXJ0KCh0aGlzLmVbMF0tZS5lWzBdKSoodGhpcy5lWzBdLWUuZVswXSkrKHRoaXMuZVsxXS1lLmVbMV0pKih0aGlzLmVbMV0tZS5lWzFdKSsodGhpcy5lWzJdLWUuZVsyXSkqKHRoaXMuZVsyXS1lLmVbMl0pKX19LHtrZXk6XCJkb3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lWzBdKmUuZVswXSt0aGlzLmVbMV0qZS5lWzFdK3RoaXMuZVsyXSplLmVbMl19fSx7a2V5OlwiZXF1YWxcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lWzBdPT09ZS5lWzBdJiZ0aGlzLmVbMV09PT1lLmVbMV0mJnRoaXMuZVsyXT09PWUuZVsyXX19LHtrZXk6XCJtb2R1bHVzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuc3VtQ29tcG9uZW50U3FycygpKX19LHtrZXk6XCJzdW1Db21wb25lbnRTcXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNxckNvbXBvbmVudHMoKTtyZXR1cm4gZVswXStlWzFdK2VbMl19fSx7a2V5Olwic3FyQ29tcG9uZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IEZsb2F0MzJBcnJheSgzKTtyZXR1cm4gZS5zZXQoW3RoaXMuZVswXSp0aGlzLmVbMF0sdGhpcy5lWzFdKnRoaXMuZVsxXSx0aGlzLmVbMl0qdGhpcy5lWzJdXSksZX19LHtrZXk6XCJ4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49dCBpbnN0YW5jZW9mIGE7aWYodCBpbnN0YW5jZW9mIGUpcmV0dXJuIGkoW3RoaXMuZVswXSp0LmVbMF0sdGhpcy5lWzFdKnQuZVsxXSx0aGlzLmVbMl0qdC5lWzJdXSk7aWYobil7dmFyIHI9byhbMSwwLDAsdGhpcy5lWzBdLDAsMSwwLHRoaXMuZVsxXSwwLDAsMSx0aGlzLmVbMl0sMCwwLDAsMV0pO3JldHVybiBvKFtyLmVbMF0rMCswKzAsMCtyLmVbMV0rMCswLDArci5lWzJdKzAsci5lWzBdKnQuZVswXStyLmVbMV0qdC5lWzFdK3IuZVsyXSp0LmVbMl0rci5lWzNdLHIuZVs0XSswKzArMCwwK3IuZVs1XSswKzAsMCtyLmVbNl0rMCxyLmVbNF0qdC5lWzBdK3IuZVs1XSp0LmVbMV0rci5lWzZdKnQuZVsyXStyLmVbN10sci5lWzhdKzArMCswLDArci5lWzldKzArMCwwK3IuZVsxMF0rMCxyLmVbOF0qdC5lWzBdK3IuZVs5XSp0LmVbMV0rci5lWzEwXSp0LmVbMl0rci5lWzExXSxyLmVbMTJdKzArMCswLDArci5lWzEzXSswKzAsMCtyLmVbMTRdKzAsci5lWzEyXSp0LmVbMF0rci5lWzEzXSp0LmVbMV0rci5lWzE0XSp0LmVbMl0rci5lWzE1XSp0LmVbMTVdXSl9cmV0dXJuIGkoW3RoaXMuZVswXSp0LHRoaXMuZVsxXSp0LHRoaXMuZVsyXSp0XSl9fSx7a2V5OlwicmVmbGVjdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWkoW3RoaXMuZVswXSx0aGlzLmVbMV0sdGhpcy5lWzJdXSksbj1pKFtlLmVbMF0sZS5lWzFdLGUuZVsyXV0pLHI9bi54KHQuZG90KG4pKTtyZXR1cm4gcj1yLngoMikscj10LnN1YnRyYWN0KHIpfX0se2tleTpcInN1YnRyYWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoW3RoaXMuZVswXS1lLmVbMF0sdGhpcy5lWzFdLWUuZVsxXSx0aGlzLmVbMl0tZS5lWzJdXSl9fSx7a2V5Olwibm9ybWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0xL3RoaXMubW9kdWx1cygpO3JldHVybiBpKFt0aGlzLmVbMF0qZSx0aGlzLmVbMV0qZSx0aGlzLmVbMl0qZV0pfX1dKSxlfSgpO2UuU3Rvcm1WMz1sLHQuZXhwb3J0cy5TdG9ybVYzPWwsZS4kVjM9aSx0LmV4cG9ydHMuJFYzPWl9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwyMTpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxuLlN5c3RlbUV2ZW50cz12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoXCIuL1V0aWxzLmNsYXNzXCIpLGE9ZShcIi4vQ29uc3RhbnRzXCIpLGw9bi5TeXN0ZW1FdmVudHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpLHRoaXMuX3NjZT10LHRoaXMuX3Byb2plY3Q9dGhpcy5fc2NlLmdldExvYWRlZFByb2plY3QoKSx0aGlzLl90YXJnZXQ9bix0aGlzLl91dGlscz1uZXcgcy5VdGlscyx0aGlzLm1vdXNlUG9zWF9vcmlnPTAsdGhpcy5tb3VzZVBvc1lfb3JpZz0wLHRoaXMubW91c2VQb3NYPTAsdGhpcy5tb3VzZVBvc1k9MCx0aGlzLm1vdXNlT2xkUG9zWD0wLHRoaXMubW91c2VPbGRQb3NZPTAsdGhpcy5kaXZQb3NpdGlvblg9MCx0aGlzLmRpdlBvc2l0aW9uWT0wLHRoaXMuZm9jdXNlZD0hMX1yZXR1cm4gaShlLFt7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMua2V5ZG93bkxpc3RlbmVyLmJpbmQodGhpcykpLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsdGhpcy5rZXl1cExpc3RlbmVyLmJpbmQodGhpcykpLHRoaXMuX3RhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLHRoaXMubW91c2V3aGVlbExpc3RlbmVyLmJpbmQodGhpcykpLHRoaXMuX3RhcmdldC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIix0aGlzLm1vdXNld2hlZWxMaXN0ZW5lci5iaW5kKHRoaXMpKSxkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5tb3VzZXVwTGlzdGVuZXIuYmluZCh0aGlzKSwhMSksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm1vdXNldXBMaXN0ZW5lci5iaW5kKHRoaXMpLCExKSx0aGlzLl90YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMubW91c2Vkb3duTGlzdGVuZXIuYmluZCh0aGlzKSwhMSksdGhpcy5fdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5tb3VzZWRvd25MaXN0ZW5lci5iaW5kKHRoaXMpLmJpbmQodGhpcyksITEpLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMubW91c2Vtb3ZlTGlzdGVuZXIuYmluZCh0aGlzKSwhMSksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5tb3VzZW1vdmVMaXN0ZW5lci5iaW5kKHRoaXMpLCExKSx0aGlzLl90YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLGZ1bmN0aW9uKCl7dGhpcy5mb2N1c2VkPSEwfS5iaW5kKHRoaXMpLCExKSx0aGlzLl90YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe3RoaXMuZm9jdXNlZD0hMX0uYmluZCh0aGlzKSwhMSl9fSx7a2V5OlwiZ2V0TW91c2VQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJue3g6dGhpcy5tb3VzZVBvc1gseTp0aGlzLm1vdXNlUG9zWX19fSx7a2V5OlwidXBkYXRlRGl2UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmRpdlBvc2l0aW9uWD1zLlV0aWxzLmdldEVsZW1lbnRQb3NpdGlvbih0aGlzLl9zY2UuZ2V0Q2FudmFzKCkpLngsdGhpcy5kaXZQb3NpdGlvblk9cy5VdGlscy5nZXRFbGVtZW50UG9zaXRpb24odGhpcy5fc2NlLmdldENhbnZhcygpKS55LHRoaXMubW91c2VQb3NYPWUuY2xpZW50WC10aGlzLmRpdlBvc2l0aW9uWCx0aGlzLm1vdXNlUG9zWT1lLmNsaWVudFktdGhpcy5kaXZQb3NpdGlvblksdGhpcy5tb3VzZVBvc1hfb3JpZz10aGlzLm1vdXNlUG9zWCx0aGlzLm1vdXNlUG9zWV9vcmlnPXRoaXMubW91c2VQb3NZLHRoaXMubW91c2VPbGRQb3NYPXRoaXMubW91c2VQb3NYLHRoaXMubW91c2VPbGRQb3NZPXRoaXMubW91c2VQb3NZfX0se2tleTpcImNhbGxDb21wb25lbnRFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtpZih2b2lkIDAhPT10aGlzLl9wcm9qZWN0JiZudWxsIT09dGhpcy5fcHJvamVjdCl7dmFyIHI9dGhpcy5fcHJvamVjdC5nZXRBY3RpdmVTdGFnZSgpLG89ci5nZXRBY3RpdmVDYW1lcmEoKS5nZXRDb21wb25lbnQoYS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLlBST0pFQ1RJT04pLGk9bnVsbDtpZih0PT09YS5Db25zdGFudHMuRVZFTlRfVFlQRVMuTU9VU0VfRE9XTiYmdGhpcy51cGRhdGVEaXZQb3NpdGlvbihuKSx0PT09YS5Db25zdGFudHMuRVZFTlRfVFlQRVMuTU9VU0VfTU9WRSYmKHRoaXMubW91c2VPbGRQb3NYPXRoaXMubW91c2VQb3NYLHRoaXMubW91c2VPbGRQb3NZPXRoaXMubW91c2VQb3NZLHRoaXMubW91c2VQb3NYPW4uY2xpZW50WC10aGlzLmRpdlBvc2l0aW9uWCx0aGlzLm1vdXNlUG9zWT1uLmNsaWVudFktdGhpcy5kaXZQb3NpdGlvblksaT0kVjMoW3RoaXMubW91c2VQb3NYLXRoaXMubW91c2VQb3NYX29yaWcsMCx0aGlzLm1vdXNlUG9zWS10aGlzLm1vdXNlUG9zWV9vcmlnXSkpLHQ9PT1hLkNvbnN0YW50cy5FVkVOVF9UWVBFUy5NT1VTRV9XSEVFTCl7dGhpcy51cGRhdGVEaXZQb3NpdGlvbihuKTt2YXIgcz1vLmdldEZvdigpLGw9KHRoaXMubW91c2VQb3NYLXRoaXMuX3NjZS5nZXRDYW52YXMoKS53aWR0aC8yKS90aGlzLl9zY2UuZ2V0Q2FudmFzKCkud2lkdGgqcyouMix1PSh0aGlzLm1vdXNlUG9zWS10aGlzLl9zY2UuZ2V0Q2FudmFzKCkuaGVpZ2h0LzIpL3RoaXMuX3NjZS5nZXRDYW52YXMoKS5oZWlnaHQqcyouMjsodm9pZCAwIT09bi53aGVlbERlbHRhWSYmbi53aGVlbERlbHRhWT49MHx8dm9pZCAwIT09bi5kZWx0YVkmJm4uZGVsdGFZPj0wKSYmKGwqPS0xLHUqPS0xKTt2YXIgYz1yLmdldEFjdGl2ZUNhbWVyYSgpLmdldENvbXBvbmVudChhLkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuVFJBTlNGT1JNX1RBUkdFVCkuZ2V0TWF0cml4KCksaD1jLmdldExlZnQoKS54KGwpLGY9Yy5nZXRVcCgpLngodSk7aT1oLmFkZChmKX1mb3IodmFyIGQ9MCxnPXIuZ2V0Tm9kZXMoKS5sZW5ndGg7ZDxnO2QrKylmb3IodmFyIF8gaW4gci5nZXROb2RlcygpW2RdLmdldENvbXBvbmVudHMoKSl7dmFyIHY9ci5nZXROb2RlcygpW2RdLmdldENvbXBvbmVudChfKTt2LnR5cGU9PT1lJiYodD09PWEuQ29uc3RhbnRzLkVWRU5UX1RZUEVTLktFWV9ET1dOJiZudWxsIT12Ll9vbmtleWRvd24mJiEwPT09dGhpcy5mb2N1c2VkJiZ2Ll9vbmtleWRvd24obiksdD09PWEuQ29uc3RhbnRzLkVWRU5UX1RZUEVTLktFWV9VUCYmbnVsbCE9di5fb25rZXl1cCYmdi5fb25rZXl1cChuKSx0PT09YS5Db25zdGFudHMuRVZFTlRfVFlQRVMuTU9VU0VfRE9XTiYmbnVsbCE9di5fb25tb3VzZWRvd24mJnYuX29ubW91c2Vkb3duKG4pLHQ9PT1hLkNvbnN0YW50cy5FVkVOVF9UWVBFUy5NT1VTRV9VUCYmbnVsbCE9di5fb25tb3VzZXVwJiZ2Ll9vbm1vdXNldXAobiksdD09PWEuQ29uc3RhbnRzLkVWRU5UX1RZUEVTLk1PVVNFX01PVkUmJm51bGwhPXYuX29ubW91c2Vtb3ZlJiZ2Ll9vbm1vdXNlbW92ZShuLGkpLHQ9PT1hLkNvbnN0YW50cy5FVkVOVF9UWVBFUy5NT1VTRV9XSEVFTCYmbnVsbCE9di5fb25tb3VzZXdoZWVsJiZ2Ll9vbm1vdXNld2hlZWwobixpKSl9fX19LHtrZXk6XCJrZXlkb3duTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNhbGxDb21wb25lbnRFdmVudChhLkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuS0VZQk9BUkRfRVZFTlRTLGEuQ29uc3RhbnRzLkVWRU5UX1RZUEVTLktFWV9ET1dOLGUpfX0se2tleTpcImtleXVwTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNhbGxDb21wb25lbnRFdmVudChhLkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuS0VZQk9BUkRfRVZFTlRTLGEuQ29uc3RhbnRzLkVWRU5UX1RZUEVTLktFWV9VUCxlKX19LHtrZXk6XCJtb3VzZWRvd25MaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2FsbENvbXBvbmVudEV2ZW50KGEuQ29uc3RhbnRzLkNPTVBPTkVOVF9UWVBFUy5NT1VTRV9FVkVOVFMsYS5Db25zdGFudHMuRVZFTlRfVFlQRVMuTU9VU0VfRE9XTixlKX19LHtrZXk6XCJtb3VzZXVwTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNhbGxDb21wb25lbnRFdmVudChhLkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuTU9VU0VfRVZFTlRTLGEuQ29uc3RhbnRzLkVWRU5UX1RZUEVTLk1PVVNFX1VQLGUpfX0se2tleTpcIm1vdXNlbW92ZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jYWxsQ29tcG9uZW50RXZlbnQoYS5Db25zdGFudHMuQ09NUE9ORU5UX1RZUEVTLk1PVVNFX0VWRU5UUyxhLkNvbnN0YW50cy5FVkVOVF9UWVBFUy5NT1VTRV9NT1ZFLGUpfX0se2tleTpcIm1vdXNld2hlZWxMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmNhbGxDb21wb25lbnRFdmVudChhLkNvbnN0YW50cy5DT01QT05FTlRfVFlQRVMuTU9VU0VfRVZFTlRTLGEuQ29uc3RhbnRzLkVWRU5UX1RZUEVTLk1PVVNFX1dIRUVMLGUpfX1dKSxlfSgpO3IuU3lzdGVtRXZlbnRzPWwsdC5leHBvcnRzLlN5c3RlbUV2ZW50cz1sfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7XCIuL0NvbnN0YW50c1wiOjExLFwiLi9VdGlscy5jbGFzc1wiOjIyfV0sMjI6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksbi5VdGlscz12b2lkIDA7dmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0scz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpO2UoXCJ3ZWJjbGdsXCIpO3ZhciBhPW4uVXRpbHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHdpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe3dpbmRvdy5zZXRUaW1lb3V0KGUsMWUzLzYwKX19cmV0dXJuIHMoZSxbe2tleTpcImdldEltYWdlRnJvbUNhbnZhc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtuLm9ubG9hZD1mdW5jdGlvbigpe3Qobil9LG4uc3JjPWUudG9EYXRhVVJMKCl9fSx7a2V5OlwicGFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPVsxLzI1NSwxLzI1NSwxLzI1NSwwXSxyPXQsbz1lLmZyYWN0KDI1NSpyKSxpPWUuZnJhY3QoMjU1Km8pLHM9W3IsbyxpLGUuZnJhY3QoMjU1KmkpXSxhPVtzWzFdKm5bMF0sc1syXSpuWzFdLHNbM10qblsyXSxzWzNdKm5bM11dO3JldHVybltzWzBdLWFbMF0sc1sxXS1hWzFdLHNbMl0tYVsyXSxzWzNdLWFbM11dfX0se2tleTpcInVucGFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPVsxLDEvMjU1LDEvNjUwMjUsMS8xNjU4MTM3NV07cmV0dXJuIGUuZG90NCh0LG4pfX1dLFt7a2V5OlwiZ2V0Q2FudmFzRnJvbVVpbnQ4QXJyYXlcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtyLndpZHRoPXQsci5oZWlnaHQ9bjtmb3IodmFyIG89ci5nZXRDb250ZXh0KFwiMmRcIiksaT1vLmNyZWF0ZUltYWdlRGF0YSh0LG4pLHM9MDtzPGkuZGF0YS5sZW5ndGg7cysrKWkuZGF0YVtzXT1lW3NdO3JldHVybiBvLnB1dEltYWdlRGF0YShpLDAsMCkscn19LHtrZXk6XCJnZXRVaW50OEFycmF5RnJvbUhUTUxJbWFnZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3Qud2lkdGg9ZS53aWR0aCx0LmhlaWdodD1lLmhlaWdodDt2YXIgbj10LmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gbi5kcmF3SW1hZ2UoZSwwLDApLG4uZ2V0SW1hZ2VEYXRhKDAsMCxlLndpZHRoLGUuaGVpZ2h0KS5kYXRhfX0se2tleTpcImdldFZlY3RvclwiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dmFyIHI9ZS5jYXJ0ZXNpYW5Ub1NwaGVyaWNhbCh0KSxvPXIubGF0LGk9ci5sbmc7cmV0dXJuIG8rPW4qKDE4MCpNYXRoLnJhbmRvbSgpLTkwKSxpKz1uKigxODAqTWF0aC5yYW5kb20oKS05MCksZS5zcGhlcmljYWxUb0NhcnRlc2lhbigxLG8saSl9fSx7a2V5OlwiZ2V0VmVjdG9yR0xTTEZ1bmN0aW9uU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cInZlYzMgZ2V0VmVjdG9yKHZlYzMgdmVjTm9ybWFsLCBmbG9hdCBkZWdyZWVzLCB2ZWMyIHZlY05vaXNlKSB7XFxudmVjMyBvYiA9IGNhcnRlc2lhblRvU3BoZXJpY2FsKHZlY05vcm1hbCk7ZmxvYXQgYW5nbGVMYXQgPSBvYi55O2Zsb2F0IGFuZ2xlTG5nID0gb2IuejtmbG9hdCBkZXN2TGF0ID0gKHZlY05vaXNlLngqMTgwLjApLTkwLjA7ZmxvYXQgZGVzdkxuZyA9ICh2ZWNOb2lzZS55KjE4MC4wKS05MC4wO2FuZ2xlTGF0ICs9IChkZWdyZWVzKmRlc3ZMYXQpO2FuZ2xlTG5nICs9IChkZWdyZWVzKmRlc3ZMbmcpO3JldHVybiBzcGhlcmljYWxUb0NhcnRlc2lhbih2ZWMzKDEuMCwgYW5nbGVMYXQsIGFuZ2xlTG5nKSk7fVxcblwifX0se2tleTpcImNhcnRlc2lhblRvU3BoZXJpY2FsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49TWF0aC5zcXJ0KHQuZVswXSp0LmVbMF0rdC5lWzFdKnQuZVsxXSt0LmVbMl0qdC5lWzJdKTtyZXR1cm57cmFkaXVzOm4sbGF0OmUucmFkVG9EZWcoTWF0aC5hY29zKHQuZVsxXS9uKSksbG5nOmUucmFkVG9EZWcoTWF0aC5hdGFuMih0LmVbMl0sdC5lWzBdKSl9fX0se2tleTpcImNhcnRlc2lhblRvU3BoZXJpY2FsR0xTTEZ1bmN0aW9uU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cInZlYzMgY2FydGVzaWFuVG9TcGhlcmljYWwodmVjMyB2ZWN0KSB7XFxuZmxvYXQgciA9IHNxcnQodmVjdC54KnZlY3QueCArIHZlY3QueSp2ZWN0LnkgKyB2ZWN0LnoqdmVjdC56KTtmbG9hdCBhbmdsZUxhdCA9IHJhZFRvRGVnKGFjb3ModmVjdC55L3IpKTtmbG9hdCBhbmdsZUxuZyA9IHJhZFRvRGVnKGF0YW4odmVjdC56LCB2ZWN0LngpKTtyZXR1cm4gdmVjMyhyLCBhbmdsZUxhdCwgYW5nbGVMbmcpO31cXG5cIn19LHtrZXk6XCJzcGhlcmljYWxUb0NhcnRlc2lhblwiLHZhbHVlOmZ1bmN0aW9uKHQsbixyKXt2YXIgbz10LGk9ZS5kZWdUb1JhZChuKSxzPWUuZGVnVG9SYWQociksYT1vKk1hdGguc2luKGkpKk1hdGguY29zKHMpLGw9bypNYXRoLnNpbihpKSpNYXRoLnNpbihzKSx1PW8qTWF0aC5jb3MoaSk7cmV0dXJuIG5ldyBTdG9ybVYzKFthLHUsbF0pfX0se2tleTpcInNwaGVyaWNhbFRvQ2FydGVzaWFuR0xTTEZ1bmN0aW9uU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cInZlYzMgc3BoZXJpY2FsVG9DYXJ0ZXNpYW4odmVjMyB2ZWN0KSB7XFxuZmxvYXQgciA9IHZlY3QueDtmbG9hdCBhbmdsZUxhdCA9IGRlZ1RvUmFkKHZlY3QueSk7ZmxvYXQgYW5nbGVMbmcgPSBkZWdUb1JhZCh2ZWN0LnopO2Zsb2F0IHggPSByKnNpbihhbmdsZUxhdCkqY29zKGFuZ2xlTG5nKTtmbG9hdCB6ID0gcipzaW4oYW5nbGVMYXQpKnNpbihhbmdsZUxuZyk7ZmxvYXQgeSA9IHIqY29zKGFuZ2xlTGF0KTtyZXR1cm4gdmVjMyh4LHkseik7fVxcblwifX0se2tleTpcInJlZnJhY3RcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgbz1uL3IsaT0tMSp0LmRvdChlKSxzPTEtbypvKigxLWkqaSk7cmV0dXJuIGUueChvKS5hZGQodC54KG8qaS1NYXRoLnNxcnQocykpKX19LHtrZXk6XCJkZWdUb1JhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiAzLjE0MTU5KmUvMTgwfX0se2tleTpcImRlZ1RvUmFkR0xTTEZ1bmN0aW9uU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cImZsb2F0IGRlZ1RvUmFkKGZsb2F0IGRlZykge3JldHVybiAoZGVnKjMuMTQxNTkpLzE4MC4wO31cIn19LHtrZXk6XCJyYWRUb0RlZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlKigxODAvMy4xNDE1OSl9fSx7a2V5OlwicmFkVG9EZWdHTFNMRnVuY3Rpb25TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiZmxvYXQgcmFkVG9EZWcoZmxvYXQgcmFkKSB7cmV0dXJuIHJhZCooMTgwLjAvMy4xNDE1OSk7fVwifX0se2tleTpcImhleFRvUmdiXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9L14jPyhbYS1mXFxkXSkoW2EtZlxcZF0pKFthLWZcXGRdKSQvaTtlPWUucmVwbGFjZSh0LGZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0K3QrbituK3Ircn0pO3ZhciBuPS9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhlKTtyZXR1cm4gbj97cjpwYXJzZUludChuWzFdLDE2KSxnOnBhcnNlSW50KG5bMl0sMTYpLGI6cGFyc2VJbnQoblszXSwxNil9Om51bGx9fSx7a2V5OlwicmdiVG9IZXhcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm5cIiNcIisoMTY3NzcyMTYrKGVbMl18ZVsxXTw8OHxlWzBdPDwxNikpLnRvU3RyaW5nKDE2KS5zbGljZSgxKX19LHtrZXk6XCJpbnZzcXJ0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIDEvZX19LHtrZXk6XCJzbW9vdGhzdGVwXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2lmKG48ZSlyZXR1cm4gMDtpZihuPj10KXJldHVybiAxO2lmKGU9PT10KXJldHVybi0xO3ZhciByPShuLWUpLyh0LWUpO3JldHVybiByKnIqKDMtMipyKX19LHtrZXk6XCJkb3Q0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVswXSp0WzBdK2VbMV0qdFsxXStlWzJdKnRbMl0rZVszXSp0WzNdfX0se2tleTpcImZyYWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9lLU1hdGguZmxvb3IoZSk6ZS1NYXRoLmNlaWwoZSl9fSx7a2V5OlwicGFja0dMU0xGdW5jdGlvblN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJ2ZWM0IHBhY2sgKGZsb2F0IGRlcHRoKSB7Y29uc3QgdmVjNCBiaWFzID0gdmVjNCggMS4wIC8gMjU1LjAsMS4wIC8gMjU1LjAsMS4wIC8gMjU1LjAsMC4wKTtmbG9hdCByID0gZGVwdGg7ZmxvYXQgZyA9IGZyYWN0KHIgKiAyNTUuMCk7ZmxvYXQgYiA9IGZyYWN0KGcgKiAyNTUuMCk7ZmxvYXQgYSA9IGZyYWN0KGIgKiAyNTUuMCk7dmVjNCBjb2xvdXIgPSB2ZWM0KHIsIGcsIGIsIGEpO3JldHVybiBjb2xvdXIgLSAoY29sb3VyLnl6d3cgKiBiaWFzKTt9XCJ9fSx7a2V5OlwidW5wYWNrR0xTTEZ1bmN0aW9uU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cImZsb2F0IHVucGFjayAodmVjNCBjb2xvdXIpIHtjb25zdCB2ZWM0IGJpdFNoaWZ0cyA9IHZlYzQoMS4wLDEuMCAvIDI1NS4wLDEuMCAvICgyNTUuMCAqIDI1NS4wKSwxLjAgLyAoMjU1LjAgKiAyNTUuMCAqIDI1NS4wKSk7cmV0dXJuIGRvdChjb2xvdXIsIGJpdFNoaWZ0cyk7fVwifX0se2tleTpcInJheVRyYXZlcnNhbEluaXRTVFJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiZmxvYXQgd2ggPSBjZWlsKHNxcnQodVJlc29sdXRpb24qdVJlc29sdXRpb24qdVJlc29sdXRpb24pKTtcXG5mbG9hdCBjcyA9IHVHcmlkc2l6ZS91UmVzb2x1dGlvbjtcXG5mbG9hdCBjaHMgPSBjcy8yLjA7XFxuZmxvYXQgdGV4ZWxTaXplID0gMS4wLyh3aC0xLjApO1xcbnZlYzMgZ2wgPSB2ZWMzKC0odUdyaWRzaXplLzIuMCksIC0odUdyaWRzaXplLzIuMCksIC0odUdyaWRzaXplLzIuMCkpO1xcbnZlYzMgX3IgPSB2ZWMzKHVHcmlkc2l6ZSwgdUdyaWRzaXplLCB1R3JpZHNpemUpO1xcbnZlYzMgX3JSZXMgPSB2ZWMzKHVSZXNvbHV0aW9uLCB1UmVzb2x1dGlvbiwgdVJlc29sdXRpb24pO1xcbnZlYzMgX2xlbiA9IF9yL19yUmVzO1xcbnZlYzMgd29ybGRUb1ZveGVsKHZlYzMgd29ybGQpIHtcXG52ZWMzIGlqayA9ICh3b3JsZCAtIGdsKSAvIF9sZW47XFxuaWprID0gdmVjMyhmbG9vcihpamsueCksIGZsb29yKGlqay55KSwgZmxvb3IoaWprLnopKTtcXG5yZXR1cm4gaWprO1xcbn1cXG5mbG9hdCB2b3hlbFRvV29ybGRYKGZsb2F0IHgpIHtyZXR1cm4geCAqIF9sZW4ueCArIGdsLng7fVxcbmZsb2F0IHZveGVsVG9Xb3JsZFkoZmxvYXQgeSkge3JldHVybiB5ICogX2xlbi55ICsgZ2wueTt9XFxuZmxvYXQgdm94ZWxUb1dvcmxkWihmbG9hdCB6KSB7cmV0dXJuIHogKiBfbGVuLnogKyBnbC56O31cXG5cIn19LHtrZXk6XCJyYXlUcmF2ZXJzYWxTVFJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm5cInZlYzIgZ2V0SWQodmVjMyB2b3hlbCkge1xcbmludCB0ZXgzZElkID0gKGludCh2b3hlbC55KSooaW50KHVSZXNvbHV0aW9uKSppbnQodVJlc29sdXRpb24pKSkrKGludCh2b3hlbC56KSooaW50KHVSZXNvbHV0aW9uKSkpK2ludCh2b3hlbC54KTtcXG5mbG9hdCBudW0gPSBmbG9hdCh0ZXgzZElkKS93aDtcXG5mbG9hdCBjb2wgPSBmcmFjdChudW0pKndoO1xcbmZsb2F0IHJvdyA9IGZsb29yKG51bSk7XFxucmV0dXJuIHZlYzIoY29sKnRleGVsU2l6ZSwgcm93KnRleGVsU2l6ZSk7XFxufVxcbnZlYzQgZ2V0Vm94ZWxfQ29sb3IodmVjMiB0ZXhWZWMsIHZlYzMgdm94ZWwsIHZlYzMgUmF5T3JpZ2luKSB7XFxudmVjNCByZ2JhID0gdmVjNCgwLjAsMC4wLDAuMCwwLjApO1xcbnZlYzQgdGV4dHVyZSA9IHNhbXBsZXJfdm94ZWxDb2xvclt2ZWMyKHRleFZlYy54LCB0ZXhWZWMueSldO1xcbmlmKHRleHR1cmUuYS8yNTUuMCA+IDAuNSkge1xcbnJnYmEgPSB2ZWM0KHRleHR1cmUucmdiLzI1NS4wLGRpc3RhbmNlKHZlYzModm94ZWxUb1dvcmxkWCh2b3hlbC54KSwgdm94ZWxUb1dvcmxkWCh2b3hlbC55KSwgdm94ZWxUb1dvcmxkWCh2b3hlbC56KSksUmF5T3JpZ2luKSk7XFxufVxcbnJldHVybiByZ2JhO1xcbn1cXG52ZWM0IGdldFZveGVsX1Bvcyh2ZWMyIHRleFZlYykge1xcbnZlYzQgcmdiYSA9IHZlYzQoMC4wLDAuMCwwLjAsMC4wKTtcXG52ZWM0IHRleHR1cmUgPSBzYW1wbGVyX3ZveGVsUG9zW3ZlYzIodGV4VmVjLngsIHRleFZlYy55KV07XFxucmdiYSA9IHZlYzQoICgodGV4dHVyZS54eXovMjU1LjApKnVHcmlkc2l6ZSktKHVHcmlkc2l6ZS8yLjApLCAxLjApO1xcbnJldHVybiByZ2JhO1xcbn1cXG52ZWM0IGdldFZveGVsX05vcm1hbCh2ZWMyIHRleFZlYykge1xcbnZlYzQgcmdiYSA9IHZlYzQoMC4wLDAuMCwwLjAsMC4wKTtcXG52ZWM0IHRleHR1cmUgPSBzYW1wbGVyX3ZveGVsTm9ybWFsW3ZlYzIodGV4VmVjLngsIHRleFZlYy55KV07XFxucmdiYSA9IHZlYzQoKCh0ZXh0dXJlLnJnYi8yNTUuMCkqMi4wKS0xLjAsIDEuMCk7XFxucmV0dXJuIHJnYmE7XFxufVxcbnN0cnVjdCBSYXlUcmF2ZXJzYWxSZXNwb25zZSB7dmVjNCB2b3hlbENvbG9yO3ZlYzQgdm94ZWxQb3M7dmVjNCB2b3hlbE5vcm1hbDt9O1JheVRyYXZlcnNhbFJlc3BvbnNlIHJheVRyYXZlcnNhbCh2ZWMzIFJheU9yaWdpbiwgdmVjMyBSYXlEaXIpIHtcXG52ZWM0IGZ2b3hlbENvbG9yID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAwLjApO3ZlYzQgZnZveGVsUG9zID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAwLjApO3ZlYzQgZnZveGVsTm9ybWFsID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAwLjApO3ZlYzMgdm94ZWwgPSB3b3JsZFRvVm94ZWwoUmF5T3JpZ2luKTt2ZWMzIF9kaXIgPSBub3JtYWxpemUoUmF5RGlyKTt2ZWMzIHRNYXg7aWYoUmF5RGlyLnggPCAwLjApIHRNYXgueCA9ICh2b3hlbFRvV29ybGRYKHZveGVsLngpLVJheU9yaWdpbi54KS9SYXlEaXIueDtpZihSYXlEaXIueCA+IDAuMCkgdE1heC54ID0gKHZveGVsVG9Xb3JsZFgodm94ZWwueCsxLjApLVJheU9yaWdpbi54KS9SYXlEaXIueDtpZihSYXlEaXIueSA8IDAuMCkgdE1heC55ID0gKHZveGVsVG9Xb3JsZFkodm94ZWwueSktUmF5T3JpZ2luLnkpL1JheURpci55O2lmKFJheURpci55IDwgMC4wKSB0TWF4LnkgPSAodm94ZWxUb1dvcmxkWSh2b3hlbC55KzEuMCktUmF5T3JpZ2luLnkpL1JheURpci55O2lmKFJheURpci56IDwgMC4wKSB0TWF4LnogPSAodm94ZWxUb1dvcmxkWih2b3hlbC56KS1SYXlPcmlnaW4ueikvUmF5RGlyLno7aWYoUmF5RGlyLnogPCAwLjApIHRNYXgueiA9ICh2b3hlbFRvV29ybGRaKHZveGVsLnorMS4wKS1SYXlPcmlnaW4ueikvUmF5RGlyLno7ZmxvYXQgdERlbHRhWCA9IF9yLngvYWJzKFJheURpci54KTtmbG9hdCB0RGVsdGFZID0gX3IueS9hYnMoUmF5RGlyLnkpO2Zsb2F0IHREZWx0YVogPSBfci56L2FicyhSYXlEaXIueik7ZmxvYXQgc3RlcFggPSAxLjA7IGZsb2F0IHN0ZXBZID0gMS4wOyBmbG9hdCBzdGVwWiA9IDEuMDtcXG5mbG9hdCBvdXRYID0gX3IueDsgZmxvYXQgb3V0WSA9IF9yLnk7IGZsb2F0IG91dFogPSBfci56O1xcbmlmKFJheURpci54IDwgMC4wKSB7c3RlcFggPSAtMS4wOyBvdXRYID0gLTEuMDt9aWYoUmF5RGlyLnkgPCAwLjApIHtzdGVwWSA9IC0xLjA7IG91dFkgPSAtMS4wO31pZihSYXlEaXIueiA8IDAuMCkge3N0ZXBaID0gLTEuMDsgb3V0WiA9IC0xLjA7fXZlYzQgY29sb3IgPSB2ZWM0KDAuMCwwLjAsMC4wLDAuMCk7XFxuYm9vbCBjMTsgYm9vbCBjMjsgYm9vbCBjMzsgYm9vbCBpc091dDt2ZWMyIHZpZDtmb3IoaW50IGMgPSAwOyBjIDwgXCIrZStcIioyOyBjKyspIHtcXG5jMSA9IGJvb2wodE1heC54IDwgdE1heC55KTtjMiA9IGJvb2wodE1heC54IDwgdE1heC56KTtjMyA9IGJvb2wodE1heC55IDwgdE1heC56KTtpc091dCA9IGZhbHNlO2lmIChjMSAmJiBjMikge3ZveGVsLnggKz0gc3RlcFg7aWYodm94ZWwueD09b3V0WCkgaXNPdXQ9dHJ1ZTt0TWF4LnggKz0gdERlbHRhWDt9IGVsc2UgaWYoKCAoYzEgJiYgIWMyKSB8fCAoIWMxICYmICFjMykgKSkge3ZveGVsLnogKz0gc3RlcFo7aWYodm94ZWwuej09b3V0WikgaXNPdXQ9dHJ1ZTt0TWF4LnogKz0gdERlbHRhWjt9IGVsc2UgaWYoIWMxICYmIGMzKSB7dm94ZWwueSArPSBzdGVwWTtpZih2b3hlbC55PT1vdXRZKSBpc091dD10cnVlO3RNYXgueSArPSB0RGVsdGFZO31pZihpc091dCA9PSB0cnVlKSBicmVhaztcXG5lbHNlIHtpZigodm94ZWwueCA+PSAwLjAgJiYgdm94ZWwueCA8PSBfclJlcy54ICYmIHZveGVsLnkgPj0gMC4wICYmIHZveGVsLnkgPD0gX3JSZXMueSAmJiB2b3hlbC56ID49IDAuMCAmJiB2b3hlbC56IDw9IF9yUmVzLnopKSB7O1xcbnZpZCA9IGdldElkKHZveGVsKTt2ZWM0IHZjYyA9IGdldFZveGVsX0NvbG9yKHZpZCwgdm94ZWwsIFJheU9yaWdpbik7aWYodmNjLmEgIT0gMC4wKSB7ZnZveGVsQ29sb3IgPSB2Y2M7YnJlYWs7XFxufX19fWZ2b3hlbFBvcyA9IGdldFZveGVsX1Bvcyh2aWQpO2Z2b3hlbE5vcm1hbCA9IGdldFZveGVsX05vcm1hbCh2aWQpO3JldHVybiBSYXlUcmF2ZXJzYWxSZXNwb25zZShmdm94ZWxDb2xvciwgZnZveGVsUG9zLCBmdm94ZWxOb3JtYWwpO31cXG5cIn19LHtrZXk6XCJpc1Bvd2VyT2ZUd29cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gMD09KGUmZS0xKX19LHtrZXk6XCJuZXh0SGlnaGVzdFBvd2VyT2ZUd29cIix2YWx1ZTpmdW5jdGlvbihlKXstLWU7Zm9yKHZhciB0PTE7dDwzMjt0PDw9MSllfD1lPj50O3JldHVybiBlKzF9fSx7a2V5OlwiZ2V0RWxlbWVudFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUsbj0wLHI9MDtcIm9iamVjdFwiPT09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjppKHQpKSYmdm9pZCAwIT09dC50YWdOYW1lOylyKz10Lm9mZnNldFRvcCxuKz10Lm9mZnNldExlZnQsXCJCT0RZXCI9PT10LnRhZ05hbWUudG9VcHBlckNhc2UoKSYmKHQ9MCksXCJvYmplY3RcIj09PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6aSh0KSkmJlwib2JqZWN0XCI9PT1pKHQub2Zmc2V0UGFyZW50KSYmKHQ9dC5vZmZzZXRQYXJlbnQpO3JldHVybnt4Om4seTpyfX19LHtrZXk6XCJnZXRXZWJHTENvbnRleHRGcm9tQ2FudmFzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gV2ViQ0xHTFV0aWxzLmdldFdlYkdMQ29udGV4dEZyb21DYW52YXMoZSx0KX19LHtrZXk6XCJmdWxsU2NyZWVuXCIsdmFsdWU6ZnVuY3Rpb24oKXtkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnR8fGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50P2RvY3VtZW50LmNhbmNlbEZ1bGxTY3JlZW4/ZG9jdW1lbnQuY2FuY2VsRnVsbFNjcmVlbigpOmRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4/ZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOmRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4mJmRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4/ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKCk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuP2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKEVsZW1lbnQuQUxMT1dfS0VZQk9BUkRfSU5QVVQpfX1dKSxlfSgpO3IuVXRpbHM9YSx0LmV4cG9ydHMuVXRpbHM9YX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se3dlYmNsZ2w6MX1dLDIzOltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSl7dGhpcy5nZXRTcmM9ZnVuY3Rpb24oKXtyZXR1cm5bW1wiUkdCXCJdLFwidmFyeWluZyB2ZWM0IHZWTjtcXG52YXJ5aW5nIHZlYzQgdlZUO1xcbnZhcnlpbmcgZmxvYXQgdlZUVTtcXG5cIixcInZlYzQgdnAgPSB2ZXJ0ZXhQb3NbXTtcXG52ZWM0IHZuID0gdmVydGV4Tm9ybWFsW107XFxudmVjNCB2dCA9IHZlcnRleFRleHR1cmVbXTtcXG5mbG9hdCB2dHUgPSB2ZXJ0ZXhUZXh0dXJlVW5pdFtdO1xcbnZWTiA9IHZuO3ZWVCA9IHZ0O3ZWVFUgPSB2dHU7Z2xfUG9zaXRpb24gPSBQTWF0cml4ICogY2FtZXJhV01hdHJpeCAqIG5vZGVXTWF0cml4ICogdnA7XFxuXCIsXCJ2YXJ5aW5nIHZlYzQgdlZOO1xcbnZhcnlpbmcgdmVjNCB2VlQ7XFxudmFyeWluZyBmbG9hdCB2VlRVO1xcblwiLFwidmVjNCB0ZXh0dXJlQ29sb3IgPSB0ZXh0dXJlMkQodGV4QWxiZWRvLCB2VlQueHkpO1xcbnJldHVybiBbdGV4dHVyZUNvbG9yXTtcXG5cIl19fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLG4uVkZQX1JHQj1yLGUuVkZQX1JHQj1yLHQuZXhwb3J0cy5WRlBfUkdCPXJ9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwyNDpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihuKXtcInVzZSBzdHJpY3RcIjtlKFwiLi9BcnJheUdlbmVyYXRvci5jbGFzc1wiKSxlKFwiLi9Db21wb25lbnQuY2xhc3NcIiksZShcIi4vQ29tcG9uZW50X0dQVS5jbGFzc1wiKSxlKFwiLi9Db21wb25lbnRDb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LmNsYXNzXCIpLGUoXCIuL0NvbXBvbmVudEtleWJvYXJkRXZlbnRzLmNsYXNzXCIpLGUoXCIuL0NvbXBvbmVudE1vdXNlRXZlbnRzLmNsYXNzXCIpLGUoXCIuL0NvbXBvbmVudFByb2plY3Rpb24uY2xhc3NcIiksZShcIi4vQ29tcG9uZW50VHJhbnNmb3JtLmNsYXNzXCIpLGUoXCIuL0NvbXBvbmVudFRyYW5zZm9ybVRhcmdldC5jbGFzc1wiKSxlKFwiLi9Db25zdGFudHNcIiksZShcIi4vTWVzaC5jbGFzc1wiKSxlKFwiLi9Ob2RlLmNsYXNzXCIpLGUoXCIuL1Byb2plY3QuY2xhc3NcIiksZShcIi4vU0NFLmNsYXNzXCIpLGUoXCIuL1N0YWdlLmNsYXNzXCIpLGUoXCIuL1N0b3JtTWF0aC5jbGFzc1wiKSxlKFwiLi9TeXN0ZW1FdmVudHMuY2xhc3NcIiksZShcIi4vVXRpbHMuY2xhc3NcIiksZShcIi4vVkZQX1JHQi5jbGFzc1wiKSxlKFwiLi9QcmVmYWJzL0dyaWQvR3JpZC5jbGFzc1wiKSxlKFwiLi9QcmVmYWJzL1NpbXBsZUNhbWVyYS9TaW1wbGVDYW1lcmEuY2xhc3NcIiksZShcIi4vUHJlZmFicy9TaW1wbGVOb2RlL1NpbXBsZU5vZGUuY2xhc3NcIiksdC5leHBvcnRzLkFycmF5R2VuZXJhdG9yPW4uQXJyYXlHZW5lcmF0b3I9QXJyYXlHZW5lcmF0b3IsdC5leHBvcnRzLkNvbXBvbmVudD1uLkNvbXBvbmVudD1Db21wb25lbnQsdC5leHBvcnRzLkNvbXBvbmVudF9HUFU9bi5Db21wb25lbnRfR1BVPUNvbXBvbmVudF9HUFUsdC5leHBvcnRzLkNvbXBvbmVudENvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQ9bi5Db21wb25lbnRDb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0PUNvbXBvbmVudENvbnRyb2xsZXJUcmFuc2Zvcm1UYXJnZXQsdC5leHBvcnRzLkNvbXBvbmVudEtleWJvYXJkRXZlbnRzPW4uQ29tcG9uZW50S2V5Ym9hcmRFdmVudHM9Q29tcG9uZW50S2V5Ym9hcmRFdmVudHMsdC5leHBvcnRzLkNvbXBvbmVudE1vdXNlRXZlbnRzPW4uQ29tcG9uZW50TW91c2VFdmVudHM9Q29tcG9uZW50TW91c2VFdmVudHMsdC5leHBvcnRzLkNvbXBvbmVudFByb2plY3Rpb249bi5Db21wb25lbnRQcm9qZWN0aW9uPUNvbXBvbmVudFByb2plY3Rpb24sdC5leHBvcnRzLkNvbXBvbmVudFRyYW5zZm9ybT1uLkNvbXBvbmVudFRyYW5zZm9ybT1Db21wb25lbnRUcmFuc2Zvcm0sdC5leHBvcnRzLkNvbXBvbmVudFRyYW5zZm9ybVRhcmdldD1uLkNvbXBvbmVudFRyYW5zZm9ybVRhcmdldD1Db21wb25lbnRUcmFuc2Zvcm1UYXJnZXQsdC5leHBvcnRzLkNvbnN0YW50cz1uLkNvbnN0YW50cz1Db25zdGFudHMsdC5leHBvcnRzLk1lc2g9bi5NZXNoPU1lc2gsdC5leHBvcnRzLk5vZGU9bi5Ob2RlPU5vZGUsdC5leHBvcnRzLlByb2plY3Q9bi5Qcm9qZWN0PVByb2plY3QsdC5leHBvcnRzLlNDRT1uLlNDRT1TQ0UsdC5leHBvcnRzLlN0YWdlPW4uU3RhZ2U9U3RhZ2UsdC5leHBvcnRzLlN0b3JtTTE2PW4uU3Rvcm1NMTY9U3Rvcm1NMTYsdC5leHBvcnRzLlN0b3JtVjM9bi5TdG9ybVYzPVN0b3JtVjMsdC5leHBvcnRzLlN5c3RlbUV2ZW50cz1uLlN5c3RlbUV2ZW50cz1TeXN0ZW1FdmVudHMsdC5leHBvcnRzLlV0aWxzPW4uVXRpbHM9VXRpbHMsdC5leHBvcnRzLlZGUF9SR0I9bi5WRlBfUkdCPVZGUF9SR0IsdC5leHBvcnRzLkdyaWQ9bi5HcmlkPUdyaWQsdC5leHBvcnRzLlNpbXBsZUNhbWVyYT1uLlNpbXBsZUNhbWVyYT1TaW1wbGVDYW1lcmEsdC5leHBvcnRzLlNpbXBsZU5vZGU9bi5TaW1wbGVOb2RlPVNpbXBsZU5vZGV9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vQXJyYXlHZW5lcmF0b3IuY2xhc3NcIjoyLFwiLi9Db21wb25lbnQuY2xhc3NcIjozLFwiLi9Db21wb25lbnRDb250cm9sbGVyVHJhbnNmb3JtVGFyZ2V0LmNsYXNzXCI6NCxcIi4vQ29tcG9uZW50S2V5Ym9hcmRFdmVudHMuY2xhc3NcIjo1LFwiLi9Db21wb25lbnRNb3VzZUV2ZW50cy5jbGFzc1wiOjYsXCIuL0NvbXBvbmVudFByb2plY3Rpb24uY2xhc3NcIjo3LFwiLi9Db21wb25lbnRUcmFuc2Zvcm0uY2xhc3NcIjo4LFwiLi9Db21wb25lbnRUcmFuc2Zvcm1UYXJnZXQuY2xhc3NcIjo5LFwiLi9Db21wb25lbnRfR1BVLmNsYXNzXCI6MTAsXCIuL0NvbnN0YW50c1wiOjExLFwiLi9NZXNoLmNsYXNzXCI6MTIsXCIuL05vZGUuY2xhc3NcIjoxMyxcIi4vUHJlZmFicy9HcmlkL0dyaWQuY2xhc3NcIjoxNCxcIi4vUHJlZmFicy9TaW1wbGVDYW1lcmEvU2ltcGxlQ2FtZXJhLmNsYXNzXCI6MTUsXCIuL1ByZWZhYnMvU2ltcGxlTm9kZS9TaW1wbGVOb2RlLmNsYXNzXCI6MTYsXCIuL1Byb2plY3QuY2xhc3NcIjoxNyxcIi4vU0NFLmNsYXNzXCI6MTgsXCIuL1N0YWdlLmNsYXNzXCI6MTksXCIuL1N0b3JtTWF0aC5jbGFzc1wiOjIwLFwiLi9TeXN0ZW1FdmVudHMuY2xhc3NcIjoyMSxcIi4vVXRpbHMuY2xhc3NcIjoyMixcIi4vVkZQX1JHQi5jbGFzc1wiOjIzfV19LHt9LFsyNF0pOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlZGUF9OT0RFID0gdW5kZWZpbmVkO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5yZXF1aXJlKFwic2NlanNcIik7XG5cbnZhciBfZ3JhcGhVdGlsID0gcmVxdWlyZShcIi4vZ3JhcGhVdGlsXCIpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgVkZQX05PREUgPSBleHBvcnRzLlZGUF9OT0RFID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZGUF9OT0RFKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVkZQX05PREUpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhWRlBfTk9ERSwgbnVsbCwgW3tcbiAgICAgICAga2V5OiBcImdldFNyY1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3JjKGN1c3RvbUNvZGUsIGdlb21ldHJ5TGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gW1tcIlJHQlwiXSxcblxuICAgICAgICAgICAgLy/ilojilojilZcgICDilojilojilZfilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWXICDilojilojilZcgICAg4paI4paI4pWXICDilojilojilZfilojilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKVl1xuICAgICAgICAgICAgLy/ilojilojilZEgICDilojilojilZHilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZTilZDilZDilojilojilZfilZrilZDilZDilojilojilZTilZDilZDilZ3ilojilojilZTilZDilZDilZDilZDilZ3ilZrilojilojilZfilojilojilZTilZ0gICAg4paI4paI4pWRICDilojilojilZHilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZdcbiAgICAgICAgICAgIC8v4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4paI4paI4paI4pWXICDilojilojilojilojilojilojilZTilZ0gICDilojilojilZEgICDilojilojilojilojilojilZcgICDilZrilojilojilojilZTilZ0gICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4pWRICDilojilojilZFcbiAgICAgICAgICAgIC8v4pWa4paI4paI4pWXIOKWiOKWiOKVlOKVneKWiOKWiOKVlOKVkOKVkOKVnSAg4paI4paI4pWU4pWQ4pWQ4paI4paI4pWXICAg4paI4paI4pWRICAg4paI4paI4pWU4pWQ4pWQ4pWdICAg4paI4paI4pWU4paI4paI4pWXICAgICDilojilojilZTilZDilZDilojilojilZHilojilojilZTilZDilZDilZ0gIOKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWRXG4gICAgICAgICAgICAvLyDilZrilojilojilojilojilZTilZ0g4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWRICDilojilojilZEgICDilojilojilZEgICDilojilojilojilojilojilojilojilZfilojilojilZTilZ0g4paI4paI4pWXICAgIOKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWRICDilojilojilZHilojilojilojilojilojilojilZTilZ1cbiAgICAgICAgICAgIC8vICDilZrilZDilZDilZDilZ0gIOKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWdICAg4pWa4pWQ4pWdICAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZ0gICAg4pWa4pWQ4pWdICDilZrilZDilZ3ilZrilZDilZDilZDilZDilZDilZDilZ3ilZrilZDilZ0gIOKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVnVxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjNCB2VmVydGV4Q29sb3I7XFxuJyArICd2YXJ5aW5nIHZlYzQgdlZlcnRleENvbG9yTmV0RXJyb3I7XFxuJyArICd2YXJ5aW5nIHZlYzQgdlVWO1xcbicgKyAndmFyeWluZyB2ZWMyIHZWZXJ0ZXhVVjtcXG4nICsgJ3ZhcnlpbmcgZmxvYXQgdlVzZVRleDtcXG4nICsgJ3ZhcnlpbmcgdmVjNCB2V05NYXRyaXg7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZOb2RlSWQ7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZOb2RlSWRPcHBvc2l0ZTtcXG4nICsgJ3ZhcnlpbmcgZmxvYXQgdkRpc3Q7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZWaXNpYmlsaXR5O1xcbicgKyAndmFyeWluZyBmbG9hdCB2SXNTZWxlY3RlZDtcXG4nICsgJ3ZhcnlpbmcgZmxvYXQgdklzSG92ZXI7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZVc2VDcm9zc2hhaXI7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZJc3RhcmdldDtcXG4nICsgJ3ZlYzIgZ2V0MkRmcm9tMUQoZmxvYXQgaWR4LCBmbG9hdCBjb2x1bW5zKSB7JyArICdmbG9hdCBuID0gaWR4L2NvbHVtbnM7JyArICdmbG9hdCByb3cgPSBmbG9hdChpbnQobikpOycgKyAnZmxvYXQgY29sID0gZnJhY3QobikqY29sdW1uczsnICsgJ2Zsb2F0IHRzID0gMS4wL2NvbHVtbnM7JyArICdyZXR1cm4gdmVjMih0cypjb2wsIHRzKnJvdyk7JyArICd9JyArICdtYXQ0IGxvb2tBdCh2ZWMzIGV5ZSwgdmVjMyBjZW50ZXIsIHZlYzMgdXApIHsnICsgJ3ZlYzMgemF4aXMgPSBub3JtYWxpemUoY2VudGVyIC0gZXllKTsnICsgJ3ZlYzMgeGF4aXMgPSBub3JtYWxpemUoY3Jvc3ModXAsIHpheGlzKSk7JyArICd2ZWMzIHlheGlzID0gY3Jvc3MoemF4aXMsIHhheGlzKTsnICsgJ21hdDQgbWF0cml4OycgK1xuICAgICAgICAgICAgLy9Db2x1bW4gTWFqb3JcbiAgICAgICAgICAgICdtYXRyaXhbMF1bMF0gPSB4YXhpcy54OycgKyAnbWF0cml4WzFdWzBdID0geWF4aXMueDsnICsgJ21hdHJpeFsyXVswXSA9IHpheGlzLng7JyArICdtYXRyaXhbM11bMF0gPSAwLjA7JyArICdtYXRyaXhbMF1bMV0gPSB4YXhpcy55OycgKyAnbWF0cml4WzFdWzFdID0geWF4aXMueTsnICsgJ21hdHJpeFsyXVsxXSA9IHpheGlzLnk7JyArICdtYXRyaXhbM11bMV0gPSAwLjA7JyArICdtYXRyaXhbMF1bMl0gPSB4YXhpcy56OycgKyAnbWF0cml4WzFdWzJdID0geWF4aXMuejsnICsgJ21hdHJpeFsyXVsyXSA9IHpheGlzLno7JyArICdtYXRyaXhbM11bMl0gPSAwLjA7JyArICdtYXRyaXhbMF1bM10gPSAtZG90KHhheGlzLCBleWUpOycgKyAnbWF0cml4WzFdWzNdID0gLWRvdCh5YXhpcywgZXllKTsnICsgJ21hdHJpeFsyXVszXSA9IC1kb3QoemF4aXMsIGV5ZSk7JyArICdtYXRyaXhbM11bM10gPSAxLjA7JyArICdyZXR1cm4gbWF0cml4OycgKyAnfScgKyAnbWF0NCB0cmFuc3Bvc2UobWF0NCBtKSB7JyArICdyZXR1cm4gbWF0NCggIG1bMF1bMF0sIG1bMV1bMF0sIG1bMl1bMF0sIG1bM11bMF0sJyArICdtWzBdWzFdLCBtWzFdWzFdLCBtWzJdWzFdLCBtWzNdWzFdLCcgKyAnbVswXVsyXSwgbVsxXVsyXSwgbVsyXVsyXSwgbVszXVsyXSwnICsgJ21bMF1bM10sIG1bMV1bM10sIG1bMl1bM10sIG1bM11bM10pOycgKyAnfScgKyAnbWF0NCByb3RhdGlvbk1hdHJpeCh2ZWMzIGF4aXMsIGZsb2F0IGFuZ2xlKSB7JyArICdheGlzID0gbm9ybWFsaXplKGF4aXMpOycgKyAnZmxvYXQgcyA9IHNpbihhbmdsZSk7JyArICdmbG9hdCBjID0gY29zKGFuZ2xlKTsnICsgJ2Zsb2F0IG9jID0gMS4wIC0gYzsnICsgJ3JldHVybiBtYXQ0KG9jICogYXhpcy54ICogYXhpcy54ICsgYywgICAgICAgICAgIG9jICogYXhpcy54ICogYXhpcy55IC0gYXhpcy56ICogcywgIG9jICogYXhpcy56ICogYXhpcy54ICsgYXhpcy55ICogcywgIDAuMCwnICsgJ29jICogYXhpcy54ICogYXhpcy55ICsgYXhpcy56ICogcywgIG9jICogYXhpcy55ICogYXhpcy55ICsgYywgICAgICAgICAgIG9jICogYXhpcy55ICogYXhpcy56IC0gYXhpcy54ICogcywgIDAuMCwnICsgJ29jICogYXhpcy56ICogYXhpcy54IC0gYXhpcy55ICogcywgIG9jICogYXhpcy55ICogYXhpcy56ICsgYXhpcy54ICogcywgIG9jICogYXhpcy56ICogYXhpcy56ICsgYywgICAgICAgICAgIDAuMCwnICsgJzAuMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEuMCk7JyArICd9JyArIF9ncmFwaFV0aWwuR3JhcGhVdGlscy5hZGpNYXRyaXhfQXV0b2xpbmtfR0xTTEZ1bmN0aW9uU3RyaW5nKGdlb21ldHJ5TGVuZ3RoKSArIFV0aWxzLmRlZ1RvUmFkR0xTTEZ1bmN0aW9uU3RyaW5nKCkgKyBVdGlscy5yYWRUb0RlZ0dMU0xGdW5jdGlvblN0cmluZygpICsgVXRpbHMuY2FydGVzaWFuVG9TcGhlcmljYWxHTFNMRnVuY3Rpb25TdHJpbmcoKSArIFV0aWxzLnNwaGVyaWNhbFRvQ2FydGVzaWFuR0xTTEZ1bmN0aW9uU3RyaW5nKCkgKyBVdGlscy5nZXRWZWN0b3JHTFNMRnVuY3Rpb25TdHJpbmcoKSArICd2ZWMzIGdldFZWKHZlYzMgY3JCLCBmbG9hdCBhY3VtKSB7JyArICd2ZWMzIG9iID0gY2FydGVzaWFuVG9TcGhlcmljYWwoY3JCKTsnICsgJ2Zsb2F0IGFuZ2xlTGF0ID0gb2IueTsnICsgJ2Zsb2F0IGFuZ2xlTG5nID0gb2IuejsnICsgJ2Zsb2F0IGRlc3ZMYXQgPSAwLjA7JyArIC8vICh2ZWNOb2lzZS54KjE4MC4wKS05MC4wXG4gICAgICAgICAgICAnZmxvYXQgZGVzdkxuZyA9IDEwLjA7JyArIC8vICh2ZWNOb2lzZS54KjE4MC4wKS05MC4wXG4gICAgICAgICAgICAvLydhbmdsZUxhdCArPSAoZGVncmVlcypkZXN2TGF0KTsnK1xuICAgICAgICAgICAgJ2FuZ2xlTG5nICs9IChhY3VtKmRlc3ZMbmcpOycgKyAncmV0dXJuIHNwaGVyaWNhbFRvQ2FydGVzaWFuKHZlYzMoMS4wLCBhbmdsZUxhdCwgYW5nbGVMbmcpKTsnICsgJ30nICsgJ2Zsb2F0IGdldE9kZEV2ZW4oZmxvYXQgcmVwZWF0SWQpIHsnICsgJ3JldHVybiAoY2VpbChmcmFjdChyZXBlYXRJZC8yLjApKSA9PSAwLjApID8gMS4wKmZsb29yKHJlcGVhdElkLzIuMCkgOiAtMS4wKmZsb29yKHJlcGVhdElkLzIuMCk7JyArICd9JyArICd2ZWMzIGdldEZpcnN0RGlzcGwoZmxvYXQgbm9kZUlkLCB2ZWM0IGN1cnJlbnRQb3NpdGlvbiwgZmxvYXQgcmVwZWF0SWQpIHsnICsgJ2Zsb2F0IHJlcGVhdERpc3RyaWJ1dGlvbiA9IC0wLjE7JyArXG4gICAgICAgICAgICAvLyBmaXJzdCBjaGVjayBvdXRwdXQgZWRnZXMgb2Ygb3duIG5vZGUgYW5kIHJldHVybiB0aGUgbm9kZSAodGV4dENvb3JkIGZvciBnZXQgcG9zWFlaVykgd2l0aCBtYXggYXZhaWxhYmxlIGFuZ2xlIHRvIHRoZSByaWdodFxuICAgICAgICAgICAgJ3ZlYzQgYWRqTWF0cml4ID0gaWRBZGpNYXRyaXhfQXV0b2xpbmsobm9kZUlkLCBjdXJyZW50UG9zaXRpb24ueHl6KTsnICsgJ3ZlYzMgaW5pdGlhbFZlYyA9IG5vcm1hbGl6ZShwb3NYWVpXW2Fkak1hdHJpeC54eV0ueHl6LWN1cnJlbnRQb3NpdGlvbi54eXopKnZlYzMoMS4wLCAtMS4wLCAxLjApOycgKyAnZmxvYXQgdG90YWxBbmdsZVJlbGF0aW9ucyA9IGFkak1hdHJpeC56OycgK1xuICAgICAgICAgICAgLy8gdGhlbiBmaXJzdCBzdW0gaGFsZiBvZiBhdmFpbGFibGUgYW5nbGUgcmVjZWl2ZWRcbiAgICAgICAgICAgICdpbml0aWFsVmVjID0gZ2V0VlYoaW5pdGlhbFZlYywgKHRvdGFsQW5nbGVSZWxhdGlvbnMvMi4wKSpyZXBlYXREaXN0cmlidXRpb24pOycgK1xuICAgICAgICAgICAgLy8gYW5kIG5vdyBsZWZ0IG9yIHJpZ2h0IChvZGRFdmVuKVxuICAgICAgICAgICAgJ3JldHVybiBnZXRWVihpbml0aWFsVmVjLCBnZXRPZGRFdmVuKHJlcGVhdElkKSp0b3RhbEFuZ2xlUmVsYXRpb25zKjAuMDEpOycgKyAnfScgKyAnZmxvYXQgY2hlY2tMaW5rQXJyb3dWaXNpYmlsaXR5KGZsb2F0IGN1cnJlbnRUaW1lc3RhbXAsIGZsb2F0IGJvcm5EYXRlLCBmbG9hdCBkaWVEYXRlLCBmbG9hdCBib3JuRGF0ZU9wcG9zaXRlLCBmbG9hdCBkaWVEYXRlT3Bwb3NpdGUsIGZsb2F0IGxpbmtCb3JuRGF0ZSwgZmxvYXQgbGlua0RpZURhdGUpIHsnICsgJ2Zsb2F0IHZpc2libGUgPTEuMDsnICsgJ2lmKGRpZURhdGUgIT0gMC4wKSB7JyArICdpZigoY3VycmVudFRpbWVzdGFtcCA8IGJvcm5EYXRlIHx8IGN1cnJlbnRUaW1lc3RhbXAgPiBkaWVEYXRlKSB8fCAoY3VycmVudFRpbWVzdGFtcCA8IGJvcm5EYXRlT3Bwb3NpdGUgfHwgY3VycmVudFRpbWVzdGFtcCA+IGRpZURhdGVPcHBvc2l0ZSkpIHsnICsgJ3Zpc2libGUgPSAwLjA7JyArICd9IGVsc2UgeycgK1xuICAgICAgICAgICAgLy8gbm93IGNoZWNrIGxpbmtcbiAgICAgICAgICAgICdpZihsaW5rRGllRGF0ZSAhPSAwLjApIHsnICsgJ2lmKGN1cnJlbnRUaW1lc3RhbXAgPCBsaW5rQm9ybkRhdGUgfHwgY3VycmVudFRpbWVzdGFtcCA+IGxpbmtEaWVEYXRlKSB7JyArICd2aXNpYmxlID0gMC4wOycgKyAnfScgKyAnfScgKyAnfScgKyAnfSBlbHNlIHsnICtcbiAgICAgICAgICAgIC8vIG5vdyBjaGVjayBsaW5rXG4gICAgICAgICAgICAnaWYobGlua0RpZURhdGUgIT0gMC4wKSB7JyArICdpZihjdXJyZW50VGltZXN0YW1wIDwgbGlua0Jvcm5EYXRlIHx8IGN1cnJlbnRUaW1lc3RhbXAgPiBsaW5rRGllRGF0ZSkgeycgKyAndmlzaWJsZSA9IDAuMDsnICsgJ30nICsgJ30nICsgJ30nICsgJ3JldHVybiB2aXNpYmxlOycgKyAnfScsXG5cbiAgICAgICAgICAgIC8v4paI4paI4pWXICAg4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVlyAg4paI4paI4pWXICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilojilojilZcg4paI4paI4pWXICAg4paI4paI4pWX4paI4paI4paI4paI4paI4paI4pWXICDilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilZdcbiAgICAgICAgICAgIC8v4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4pWa4pWQ4pWQ4paI4paI4pWU4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4pWa4paI4paI4pWX4paI4paI4pWU4pWdICAgIOKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVkSAgIOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVnVxuICAgICAgICAgICAgLy/ilojilojilZEgICDilojilojilZHilojilojilojilojilojilZcgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVnSAgIOKWiOKWiOKVkSAgIOKWiOKWiOKWiOKWiOKWiOKVlyAgIOKVmuKWiOKWiOKWiOKVlOKVnSAgICAg4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4pWRICAgICDilojilojilojilojilojilZdcbiAgICAgICAgICAgIC8v4pWa4paI4paI4pWXIOKWiOKWiOKVlOKVneKWiOKWiOKVlOKVkOKVkOKVnSAg4paI4paI4pWU4pWQ4pWQ4paI4paI4pWXICAg4paI4paI4pWRICAg4paI4paI4pWU4pWQ4pWQ4pWdICAg4paI4paI4pWU4paI4paI4pWXICAgICDilZrilZDilZDilZDilZDilojilojilZHilojilojilZEgICDilojilojilZHilojilojilZEgICDilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZEgICAgIOKWiOKWiOKVlOKVkOKVkOKVnVxuICAgICAgICAgICAgLy8g4pWa4paI4paI4paI4paI4pWU4pWdIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVkSAg4paI4paI4pWRICAg4paI4paI4pWRICAg4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWU4pWdIOKWiOKWiOKVlyAgICDilojilojilojilojilojilojilojilZHilZrilojilojilojilojilojilojilZTilZ3ilZrilojilojilojilojilojilojilZTilZ3ilojilojilZEgIOKWiOKWiOKVkeKVmuKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl1xuICAgICAgICAgICAgLy8gIOKVmuKVkOKVkOKVkOKVnSAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZ0gICDilZrilZDilZ0gICDilZrilZDilZDilZDilZDilZDilZDilZ3ilZrilZDilZ0gIOKVmuKVkOKVnSAgICDilZrilZDilZDilZDilZDilZDilZDilZ0g4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdICDilZrilZDilZDilZDilZDilZDilZ0g4pWa4pWQ4pWdICDilZrilZDilZ0g4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdXG4gICAgICAgICAgICAnZmxvYXQgbm9kZUlkID0gZGF0YVtdLng7JyArICdmbG9hdCBub2RlSWRPcHBvc2l0ZSA9IGRhdGFbXS55OycgKyAnZmxvYXQgY3VycmVudExpbmVWZXJ0ZXggPSBkYXRhW10uejsnICsgLy8gdGhpcyBpcyBpc1RhcmdldCBmb3IgYXJyb3dzXG4gICAgICAgICAgICAnZmxvYXQgcmVwZWF0SWQgPSBkYXRhW10udzsnICsgJ3ZlYzIgeEdlb21ldHJ5Tm9kZSA9IGdldF9nbG9iYWxfaWQobm9kZUlkLCBidWZmZXJOb2Rlc1dpZHRoLCAnICsgZ2VvbWV0cnlMZW5ndGgudG9GaXhlZCgxKSArICcpOycgKyAvLyBidWZmZXJXaWR0aDYsIGdlb21ldHJ5TGVuZ3RoXG4gICAgICAgICAgICAndmVjMiB4R2VvbWV0cnlOb2RlX29wcG9zaXRlID0gZ2V0X2dsb2JhbF9pZChub2RlSWRPcHBvc2l0ZSwgYnVmZmVyTm9kZXNXaWR0aCwgJyArIGdlb21ldHJ5TGVuZ3RoLnRvRml4ZWQoMSkgKyAnKTsnICsgJ3ZlYzIgeEdlb21ldHJ5TGlua3MgPSBnZXRfZ2xvYmFsX2lkKG5vZGVJZCwgYnVmZmVyTGlua3NXaWR0aCwgMi4wKTsnICsgLy8gYnVmZmVyV2lkdGgsIGdlb21ldHJ5TGVuZ3RoXG4gICAgICAgICAgICAndmVjMiB4R2VvbWV0cnlMaW5rc19vcHBvc2l0ZSA9IGdldF9nbG9iYWxfaWQobm9kZUlkT3Bwb3NpdGUsIGJ1ZmZlckxpbmtzV2lkdGgsIDIuMCk7JyArICd2ZWMyIHhHZW9tZXRyeUFycm93cyA9IGdldF9nbG9iYWxfaWQobm9kZUlkLCBidWZmZXJBcnJvd3NXaWR0aCwgMy4wKTsnICsgLy8gYnVmZmVyV2lkdGgsIGdlb21ldHJ5TGVuZ3RoXG4gICAgICAgICAgICAndmVjMiB4R2VvbWV0cnlBcnJvd3Nfb3Bwb3NpdGUgPSBnZXRfZ2xvYmFsX2lkKG5vZGVJZE9wcG9zaXRlLCBidWZmZXJBcnJvd3NXaWR0aCwgMy4wKTsnICsgJ3ZlYzIgeEdlb21ldHJ5VGV4dCA9IGdldF9nbG9iYWxfaWQobm9kZUlkLCBidWZmZXJUZXh0c1dpZHRoLCA0LjAqMTIuMCk7JyArIC8vIGJ1ZmZlcldpZHRoLCBnZW9tZXRyeUxlbmd0aFxuICAgICAgICAgICAgJ3ZlYzIgeEdlb21ldHJ5VGV4dF9vcHBvc2l0ZSA9IGdldF9nbG9iYWxfaWQobm9kZUlkT3Bwb3NpdGUsIGJ1ZmZlclRleHRzV2lkdGgsIDQuMCoxMi4wKTsnICsgJ3ZlYzQgbm9kZVZlcnRleFBvc2l0aW9uID0gbm9kZVZlcnRleFBvc1tdO1xcbicgKyAndmVjNCBub2RlVmVydGV4VGV4ID0gbm9kZVZlcnRleFRleHR1cmVbXTtcXG4nICsgJ2Zsb2F0IGxpbmtCb3JuRGF0ZSA9IGRhdGFDW10ueDsnICsgJ2Zsb2F0IGxpbmtEaWVEYXRlID0gZGF0YUNbXS55OycgKyAnZmxvYXQgYm9ybkRhdGUgPSBkYXRhQlt4R2VvbWV0cnlOb2RlXS54OycgKyAnZmxvYXQgZGllRGF0ZSA9IGRhdGFCW3hHZW9tZXRyeU5vZGVdLnk7JyArICdmbG9hdCBmb3V0cHV0ID0gZGF0YUJbeEdlb21ldHJ5Tm9kZV0uejsnICsgJ2Zsb2F0IGVycm9yID0gZGF0YUZbeEdlb21ldHJ5Tm9kZV0ueDsnICsgJ2Zsb2F0IGJvcm5EYXRlT3Bwb3NpdGUgPSBkYXRhQlt4R2VvbWV0cnlOb2RlX29wcG9zaXRlXS54OycgKyAnZmxvYXQgZGllRGF0ZU9wcG9zaXRlID0gZGF0YUJbeEdlb21ldHJ5Tm9kZV9vcHBvc2l0ZV0ueTsnICsgJ3ZlYzQgY3VycmVudFBvc2l0aW9uID0gcG9zWFlaV1t4R2VvbWV0cnlOb2RlXTtcXG4nICsgJ3ZlYzMgb3Bwb3NpdGVQb3NpdGlvbiA9IHBvc1hZWldbeEdlb21ldHJ5Tm9kZV9vcHBvc2l0ZV0ueHl6O1xcbicgKyAndmVjNCBub2RlVmVydGV4Q29sb3IgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XFxuJyArICd2ZWM0IG5vZGVWZXJ0ZXhDb2xvck5ldEVycm9yID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApO1xcbicgKyAndmVjMyBkaXIgPSBvcHBvc2l0ZVBvc2l0aW9uLXZlYzMoY3VycmVudFBvc2l0aW9uLngsIGN1cnJlbnRQb3NpdGlvbi55LCBjdXJyZW50UG9zaXRpb24ueik7JyArICdmbG9hdCBkaXN0ID0gbGVuZ3RoKGRpcik7JyArICdmbG9hdCB2ZXJ0ZXhDb3VudCA9IDEuMDsnICsgJ2Zsb2F0IGxpbmVJbmNyZW1lbnRzID0gZGlzdC92ZXJ0ZXhDb3VudDsnICsgJ3ZlYzMgZGlyTiA9IG5vcm1hbGl6ZShkaXIpOycgKyAndmVjMyBjciA9IGNyb3NzKGRpck4sIHZlYzMoMC4wLCAxLjAsIDAuMCkpOycgKyAnZmxvYXQgY3VycmVudExpbmVWZXJ0ZXhTUVJUID0gYWJzKCBjdXJyZW50TGluZVZlcnRleC0odmVydGV4Q291bnQvMi4wKSApLyh2ZXJ0ZXhDb3VudC8yLjApOycgKyAnY3VycmVudExpbmVWZXJ0ZXhTUVJUID0gc3FydCgxLjAtY3VycmVudExpbmVWZXJ0ZXhTUVJUKTsnICsgJ3ZWZXJ0ZXhVViA9IHZlYzIoLTEuMCwgLTEuMCk7JyArICd2RGlzdCA9IG1heCgwLjMsIDEuMC0oZGlzdGFuY2UoY3VycmVudFBvc2l0aW9uLnh5eiwgb3Bwb3NpdGVQb3NpdGlvbikqMC4wMSkpO1xcbicgKyAvLyBkaXN0L2FjdW1cblxuICAgICAgICAgICAgJ21hdDQgbm9kZXBvcyA9IG5vZGVXTWF0cml4OycgKyAnaWYoaXNOb2RlID09IDEuMCkgeycgKyAndlZpc2liaWxpdHkgPSAxLjA7JyArICdjdXJyZW50UG9zaXRpb24gKz0gdmVjNCgwLjAsIDAuMSwgMC4wLCAxLjApOycgKyAnbWF0NCBtbSA9IHJvdGF0aW9uTWF0cml4KHZlYzMoMS4wLDAuMCwwLjApLCAoMy4xNDE2LzIuMCkqMy4wKTsnICsgJ25vZGVwb3MgPSBub2RlcG9zKm1tOycgKyAnZmxvYXQgbm9kZUltZ0lkID0gbm9kZUltZ0lkW107JyArICdpZihub2RlSW1nSWQgIT0gLTEuMCkgeycgKyAndlVzZVRleCA9IDEuMDsnICsgJ3ZWZXJ0ZXhVViA9IGdldDJEZnJvbTFEKG5vZGVJbWdJZCwgbm9kZUltZ0NvbHVtbnMpK3ZlYzIobm9kZVZlcnRleFRleHR1cmUueC9ub2RlSW1nQ29sdW1ucyxub2RlVmVydGV4VGV4dHVyZS55L25vZGVJbWdDb2x1bW5zKTsnICsgJ30nICsgJ2lmKGRpZURhdGUgIT0gMC4wICYmIChjdXJyZW50VGltZXN0YW1wIDwgYm9ybkRhdGUgfHwgY3VycmVudFRpbWVzdGFtcCA+IGRpZURhdGUpKSAnICsgJ3ZWaXNpYmlsaXR5ID0gMC4wOycgKyAnaWYoZW5hYmxlTmV1cm9uYWxOZXR3b3JrID09IDEuMCkgeycgKyAnbm9kZVZlcnRleENvbG9yID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApOycgKyAnaWYoZm91dHB1dCA+IDAuMCkgJyArICdub2RlVmVydGV4Q29sb3IgPSB2ZWM0KGFicyhmb3V0cHV0KSwgYWJzKGZvdXRwdXQpLCBhYnMoZm91dHB1dCksIDEuMCk7JyArICdlbHNlIGlmKGZvdXRwdXQgPCAwLjApICcgKyAnbm9kZVZlcnRleENvbG9yID0gdmVjNChhYnMoZm91dHB1dCksIDAuMCwgMC4wLCAxLjApOycgKyAnaWYoZXJyb3IgPiAwLjApICcgKyAnbm9kZVZlcnRleENvbG9yTmV0RXJyb3IgPSB2ZWM0KGFicyhlcnJvciksIDAuMCwgMC4wLCAxLjApOycgKyAnZWxzZSBpZihlcnJvciA8IDAuMCkgJyArICdub2RlVmVydGV4Q29sb3JOZXRFcnJvciA9IHZlYzQoMC4wLCBhYnMoZXJyb3IpLCAwLjAsIDEuMCk7JyArICdlbHNlICcgKyAnbm9kZVZlcnRleENvbG9yTmV0RXJyb3IgPSB2ZWM0KDAuMCwwLjAsMC4wLCAwLjApOycgKyAnfScgKyAndklzU2VsZWN0ZWQgPSAoaWRUb0RyYWcgPT0gZGF0YVtdLngpID8gMS4wIDogMC4wOycgKyAndklzSG92ZXIgPSAoaWRUb0hvdmVyID09IGRhdGFbXS54KSA/IDEuMCA6IDAuMDsnICsgJ30nICsgJ2lmKGlzTGluayA9PSAxLjApIHsnICsgJ2lmKHhHZW9tZXRyeUxpbmtzICE9IHhHZW9tZXRyeUxpbmtzX29wcG9zaXRlKSB7JyArXG4gICAgICAgICAgICAvLyBkaXNwbGFjaW5nIGZyb20gY2VudGVyIHRvIGZpcnN0IHBvaW50XG4gICAgICAgICAgICAnY3VycmVudFBvc2l0aW9uICs9IHZlYzQoZGlyTioobGluZUluY3JlbWVudHMqY3VycmVudExpbmVWZXJ0ZXgpLCAxLjApOycgK1xuXG4gICAgICAgICAgICAvLyBkaXNwbGFjaW5nIGZyb20gZmlyc3QgcG9pbnQgdG8gY3Jvc3MgZGlyZWN0aW9uIChyZXBlYXRJZClcbiAgICAgICAgICAgICdpZihjdXJyZW50TGluZVZlcnRleCAhPSAwLjAgJiYgY3VycmVudExpbmVWZXJ0ZXggIT0gdmVydGV4Q291bnQpICcgKyAnY3VycmVudFBvc2l0aW9uICs9IHZlYzQoY3IqY3VycmVudExpbmVWZXJ0ZXhTUVJUKmdldE9kZEV2ZW4ocmVwZWF0SWQpKjQuMCwgMS4wKTsnICsgJ30gZWxzZSB7JyArIC8vIGlzIEF1dG9saW5rXG4gICAgICAgICAgICAnZmxvYXQgY3VycmVudExpbmVWZXJ0ZXhNTSA9IGFicyggY3VycmVudExpbmVWZXJ0ZXgtKHZlcnRleENvdW50LzIuMCkgKTsnICsgJ2N1cnJlbnRMaW5lVmVydGV4TU0gPSAodmVydGV4Q291bnQvMi4wKS1jdXJyZW50TGluZVZlcnRleE1NOycgK1xuXG4gICAgICAgICAgICAvLyBkaXNwbGFjaW5nIGZyb20gY2VudGVyIHRvIGZpcnN0IHBvaW50XG4gICAgICAgICAgICAndmVjMyBpbml0aWFsVmVjID0gZ2V0Rmlyc3REaXNwbChub2RlSWQsIGN1cnJlbnRQb3NpdGlvbiwgcmVwZWF0SWQpOycgKyAnY3VycmVudFBvc2l0aW9uICs9IHZlYzQoaW5pdGlhbFZlYyooNS4wKmN1cnJlbnRMaW5lVmVydGV4TU0pLCAxLjApOycgK1xuXG4gICAgICAgICAgICAvLyBkaXNwbGFjaW5nIGZyb20gZmlyc3QgcG9pbnQgdG8gY3Jvc3MgZGlyZWN0aW9uIChyZXBlYXRJZClcbiAgICAgICAgICAgICdpZihjdXJyZW50TGluZVZlcnRleCAhPSAwLjAgJiYgY3VycmVudExpbmVWZXJ0ZXggIT0gdmVydGV4Q291bnQpIHsnICsgJ2Zsb2F0IHNpZyA9IChjdXJyZW50TGluZVZlcnRleCA+ICh2ZXJ0ZXhDb3VudC8yLjApKSA/IDEuMCA6IC0xLjA7JyArICd2ZWMzIGNyQiA9IGNyb3NzKHZlYzMoMC4wLCAxLjAsIDAuMCksIGluaXRpYWxWZWMpOycgKyAnZmxvYXQgaGhTQ291bnQgPSAodmVydGV4Q291bnQvMi4wKS8yLjA7JyArICdmbG9hdCBjdXJyZW50TGluZVZlcnRleE1NQiA9IGhoU0NvdW50LShhYnMoY3VycmVudExpbmVWZXJ0ZXhNTS1oaFNDb3VudCkpOycgKyAnY3VycmVudFBvc2l0aW9uICs9IHZlYzQoKGNyQipzaWcpKmN1cnJlbnRMaW5lVmVydGV4TU1CKjEuMCwgMS4wKTsnICsgJ30nICsgJ30nICsgJ3ZWaXNpYmlsaXR5ID0gY2hlY2tMaW5rQXJyb3dWaXNpYmlsaXR5KGN1cnJlbnRUaW1lc3RhbXAsIGJvcm5EYXRlLCBkaWVEYXRlLCBib3JuRGF0ZU9wcG9zaXRlLCBkaWVEYXRlT3Bwb3NpdGUsIGxpbmtCb3JuRGF0ZSwgbGlua0RpZURhdGUpOycgKyAndklzU2VsZWN0ZWQgPSAoaWRUb0RyYWcgPT0gZGF0YVtdLnggfHwgaWRUb0RyYWcgPT0gZGF0YVtdLnkpID8gMS4wIDogMC4wOycgKyAndklzSG92ZXIgPSAoaWRUb0hvdmVyID09IGRhdGFbXS54IHx8IGlkVG9Ib3ZlciA9PSBkYXRhW10ueSkgPyAxLjAgOiAwLjA7JyArICdpZihlbmFibGVOZXVyb25hbE5ldHdvcmsgPT0gMS4wKSB7JyArICdub2RlVmVydGV4Q29sb3IgPSB2ZWM0KGFicyhmb3V0cHV0KSwgYWJzKGZvdXRwdXQpLCBhYnMoZm91dHB1dCksIDEuMCk7JyArICdpZihlcnJvciA+IDAuMCkgJyArICdub2RlVmVydGV4Q29sb3JOZXRFcnJvciA9IHZlYzQoMC4wLCBhYnMoZXJyb3IpLCAwLjAsIDEuMCk7JyArICdlbHNlIGlmKGVycm9yIDwgMC4wKSAnICsgJ25vZGVWZXJ0ZXhDb2xvck5ldEVycm9yID0gdmVjNChhYnMoZXJyb3IpLCAwLjAsIDAuMCwgMS4wKTsnICsgJ2Vsc2UgJyArICdub2RlVmVydGV4Q29sb3JOZXRFcnJvciA9IHZlYzQoMC4wLDAuMCwwLjAsIDAuMCk7JyArICd9JyArICd9JyArICdpZihpc0Fycm93ID09IDEuMCkgeycgKyAndmVjMyBjdXJyZW50UG9zaXRpb25UTVA7JyArICdpZih4R2VvbWV0cnlBcnJvd3MgIT0geEdlb21ldHJ5QXJyb3dzX29wcG9zaXRlKSB7JyArXG4gICAgICAgICAgICAvLyBkaXNwbGFjaW5nIGZyb20gY2VudGVyIHRvIGZpcnN0IHBvaW50XG4gICAgICAgICAgICAnZmxvYXQgY3VycmVudExpbmVWZXJ0ZXhVID0gdmVydGV4Q291bnQtMS4wOycgKyAnY3VycmVudFBvc2l0aW9uVE1QID0gb3Bwb3NpdGVQb3NpdGlvbisoKGRpck4qLTEuMCkqKGxpbmVJbmNyZW1lbnRzKmN1cnJlbnRMaW5lVmVydGV4VSkpOycgK1xuXG4gICAgICAgICAgICAvLyBkaXNwbGFjaW5nIGZyb20gZmlyc3QgcG9pbnQgdG8gY3Jvc3MgZGlyZWN0aW9uIChyZXBlYXRJZClcbiAgICAgICAgICAgICdjdXJyZW50UG9zaXRpb25UTVAgLT0gY3IqKGN1cnJlbnRMaW5lVmVydGV4U1FSVCpnZXRPZGRFdmVuKHJlcGVhdElkKSo0LjApOycgKyAnfSBlbHNlIHsnICsgLy8gaXMgQXV0b2xpbmtcbiAgICAgICAgICAgICdmbG9hdCBjdXJyZW50TGluZVZlcnRleFUgPSB2ZXJ0ZXhDb3VudC0xLjA7JyArICdmbG9hdCBjdXJyZW50TGluZVZlcnRleE1NID0gYWJzKCBjdXJyZW50TGluZVZlcnRleFUtKHZlcnRleENvdW50LzIuMCkgKTsnICsgJ2N1cnJlbnRMaW5lVmVydGV4TU0gPSAodmVydGV4Q291bnQvMi4wKS1jdXJyZW50TGluZVZlcnRleE1NOycgK1xuXG4gICAgICAgICAgICAvLyBkaXNwbGFjaW5nIGZyb20gY2VudGVyIHRvIGZpcnN0IHBvaW50XG4gICAgICAgICAgICAndmVjMyBpbml0aWFsVmVjID0gZ2V0Rmlyc3REaXNwbChub2RlSWQsIGN1cnJlbnRQb3NpdGlvbiwgcmVwZWF0SWQpOycgKyAnY3VycmVudFBvc2l0aW9uVE1QID0gb3Bwb3NpdGVQb3NpdGlvbisoaW5pdGlhbFZlYyooNS4wKmN1cnJlbnRMaW5lVmVydGV4TU0pKTsnICtcblxuICAgICAgICAgICAgLy8gZGlzcGxhY2luZyBmcm9tIGZpcnN0IHBvaW50IHRvIGNyb3NzIGRpcmVjdGlvbiAocmVwZWF0SWQpXG4gICAgICAgICAgICAnaWYoY3VycmVudExpbmVWZXJ0ZXggIT0gMC4wICYmIGN1cnJlbnRMaW5lVmVydGV4ICE9IHZlcnRleENvdW50KSB7JyArICdmbG9hdCBzaWcgPSAoY3VycmVudExpbmVWZXJ0ZXggPiAodmVydGV4Q291bnQvMi4wKSkgPyAxLjAgOiAtMS4wOycgKyAndmVjMyBjckIgPSBjcm9zcyh2ZWMzKDAuMCwgMS4wLCAwLjApLCBpbml0aWFsVmVjKTsnICsgJ2Zsb2F0IGhoU0NvdW50ID0gKHZlcnRleENvdW50LzIuMCkvMi4wOycgKyAnZmxvYXQgY3VycmVudExpbmVWZXJ0ZXhNTUIgPSBoaFNDb3VudC0oYWJzKGN1cnJlbnRMaW5lVmVydGV4TU0taGhTQ291bnQpKTsnICsgJ2N1cnJlbnRQb3NpdGlvblRNUCArPSAoY3JCKnNpZykqY3VycmVudExpbmVWZXJ0ZXhNTUIqMS4wOycgK1xuICAgICAgICAgICAgLy8nY3VycmVudFBvc2l0aW9uVE1QIC09IHZlYzQoKGNyQipzaWcpKihjdXJyZW50TGluZVZlcnRleFNRUlQqKHJlcGVhdElkKzEuMCkqNC4wKSwgMS4wKTsnK1xuICAgICAgICAgICAgJ30nICsgJ30nICsgJ21hdDQgcHAgPSBsb29rQXQoY3VycmVudFBvc2l0aW9uVE1QLCB2ZWMzKGN1cnJlbnRQb3NpdGlvbi54LCBjdXJyZW50UG9zaXRpb24ueSwgY3VycmVudFBvc2l0aW9uLnopLCB2ZWMzKDAuMCwgMS4wLCAwLjApKTsnICsgJ3BwID0gdHJhbnNwb3NlKHBwKTsnICsgJ25vZGVwb3NbMF1bMF0gPSBwcFswXVswXTsnICsgJ25vZGVwb3NbMF1bMV0gPSBwcFsxXVswXTsnICsgJ25vZGVwb3NbMF1bMl0gPSBwcFsyXVswXTsnICsgJ25vZGVwb3NbMV1bMF0gPSBwcFswXVsxXTsnICsgJ25vZGVwb3NbMV1bMV0gPSBwcFsxXVsxXTsnICsgJ25vZGVwb3NbMV1bMl0gPSBwcFsyXVsxXTsnICsgJ25vZGVwb3NbMl1bMF0gPSBwcFswXVsyXTsnICsgJ25vZGVwb3NbMl1bMV0gPSBwcFsxXVsyXTsnICsgJ25vZGVwb3NbMl1bMl0gPSBwcFsyXVsyXTsnICtcblxuICAgICAgICAgICAgLy8gZGlzcGxhY2UgZnJvbSBjZW50ZXIgdG8gbm9kZSBib3JkZXJcbiAgICAgICAgICAgICdkaXIgPSBjdXJyZW50UG9zaXRpb25UTVAtdmVjMyhjdXJyZW50UG9zaXRpb24ueCwgY3VycmVudFBvc2l0aW9uLnksIGN1cnJlbnRQb3NpdGlvbi56KTsnICsgJ2N1cnJlbnRQb3NpdGlvbiArPSB2ZWM0KG5vcm1hbGl6ZShkaXIpLDEuMCkqMi4wOycgKyAndlZpc2liaWxpdHkgPSBjaGVja0xpbmtBcnJvd1Zpc2liaWxpdHkoY3VycmVudFRpbWVzdGFtcCwgYm9ybkRhdGUsIGRpZURhdGUsIGJvcm5EYXRlT3Bwb3NpdGUsIGRpZURhdGVPcHBvc2l0ZSwgbGlua0Jvcm5EYXRlLCBsaW5rRGllRGF0ZSk7JyArICd2SXNTZWxlY3RlZCA9IChpZFRvRHJhZyA9PSBkYXRhW10ueCB8fCBpZFRvRHJhZyA9PSBkYXRhW10ueSkgPyAxLjAgOiAwLjA7JyArICd2SXNIb3ZlciA9IChpZFRvSG92ZXIgPT0gZGF0YVtdLnggfHwgaWRUb0hvdmVyID09IGRhdGFbXS55KSA/IDEuMCA6IDAuMDsnICsgJ30nICsgJ2lmKGlzTm9kZVRleHQgPT0gMS4wKSB7JyArICdmbG9hdCBsZXRJZCA9IGxldHRlcklkW107XFxuJyArICdtYXQ0IG1tID0gcm90YXRpb25NYXRyaXgodmVjMygxLjAsMC4wLDAuMCksICgzLjE0MTYvMi4wKSozLjApOycgKyAnbm9kZXBvcyA9IG5vZGVwb3MqbW07JyArICd2VmVydGV4VVYgPSBnZXQyRGZyb20xRChsZXRJZCwgZm9udEltZ0NvbHVtbnMpK3ZlYzIobm9kZVZlcnRleFRleHR1cmUueC9mb250SW1nQ29sdW1ucyxub2RlVmVydGV4VGV4dHVyZS55L2ZvbnRJbWdDb2x1bW5zKTsnICsgJ25vZGVWZXJ0ZXhQb3NpdGlvbiA9IHZlYzQobm9kZVZlcnRleFBvc2l0aW9uLngqMC4xLCBub2RlVmVydGV4UG9zaXRpb24ueSowLjEsIG5vZGVWZXJ0ZXhQb3NpdGlvbi56KjAuMSwgMS4wKTsnICsgJ2N1cnJlbnRQb3NpdGlvbi56ICs9IDIuNTsnICsgJ3ZWaXNpYmlsaXR5ID0gMS4wOycgKyAndklzU2VsZWN0ZWQgPSAoaWRUb0RyYWcgPT0gZGF0YVtdLngpID8gMS4wIDogMC4wOycgKyAndklzSG92ZXIgPSAoaWRUb0hvdmVyID09IGRhdGFbXS54KSA/IDEuMCA6IDAuMDsnICsgJ30nICsgJ25vZGVwb3NbM11bMF0gPSBjdXJyZW50UG9zaXRpb24ueDsnICsgJ25vZGVwb3NbM11bMV0gPSBjdXJyZW50UG9zaXRpb24ueTsnICsgJ25vZGVwb3NbM11bMl0gPSBjdXJyZW50UG9zaXRpb24uejsnICsgJ21hdDQgbm9kZXBvc0cgPSBub2RlV01hdHJpeDsnICsgJ3ZXTk1hdHJpeCA9IG5vZGVwb3NHICogbm9kZVZlcnRleE5vcm1hbFtdO1xcbicgKyAndlVzZUNyb3NzaGFpciA9IDAuMDsnICsgJ3ZJc3RhcmdldCA9IChjdXJyZW50TGluZVZlcnRleCA9PSAxLjApID8gMS4wIDogMC4wOycgKyBjdXN0b21Db2RlICsgJ3ZWZXJ0ZXhDb2xvciA9IG5vZGVWZXJ0ZXhDb2xvcjsnICsgJ3ZWZXJ0ZXhDb2xvck5ldEVycm9yID0gbm9kZVZlcnRleENvbG9yTmV0RXJyb3I7JyArICd2VVYgPSBub2RlVmVydGV4VGV4dHVyZTsnICsgJ3ZOb2RlSWQgPSBub2RlSWQ7XFxuJyArICd2Tm9kZUlkT3Bwb3NpdGUgPSBub2RlSWRPcHBvc2l0ZTtcXG4nICsgJ2dsX1Bvc2l0aW9uID0gUE1hdHJpeCAqIGNhbWVyYVdNYXRyaXggKiBub2RlcG9zICogbm9kZVZlcnRleFBvc2l0aW9uO1xcbicsXG5cbiAgICAgICAgICAgIC8v4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4pWXICDilojilojilojilojilojilZcgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilZcgICDilojilojilojilZfilojilojilojilojilojilojilojilZfilojilojilojilZcgICDilojilojilZfilojilojilojilojilojilojilojilojilZcgICAg4paI4paI4pWXICDilojilojilZfilojilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKVl1xuICAgICAgICAgICAgLy/ilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZDilZDilZ0g4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWiOKWiOKWiOKWiOKVlyAg4paI4paI4pWR4pWa4pWQ4pWQ4paI4paI4pWU4pWQ4pWQ4pWdICAgIOKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4paI4paI4pWXXG4gICAgICAgICAgICAvL+KWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4pWRICDilojilojilojilZfilojilojilZTilojilojilojilojilZTilojilojilZHilojilojilojilojilojilZcgIOKWiOKWiOKVlOKWiOKWiOKVlyDilojilojilZEgICDilojilojilZEgICAgICAg4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4paI4paI4paI4pWXICDilojilojilojilojilojilojilojilZHilojilojilZEgIOKWiOKWiOKVkVxuICAgICAgICAgICAgLy/ilojilojilZTilZDilZDilZ0gIOKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkeKWiOKWiOKVkSAgIOKWiOKWiOKVkeKWiOKWiOKVkeKVmuKWiOKWiOKVlOKVneKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVnSAg4paI4paI4pWR4pWa4paI4paI4pWX4paI4paI4pWRICAg4paI4paI4pWRICAgICAgIOKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVnSAg4paI4paI4pWU4pWQ4pWQ4paI4paI4pWR4paI4paI4pWRICDilojilojilZFcbiAgICAgICAgICAgIC8v4paI4paI4pWRICAgICDilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWR4pWa4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4pWRIOKVmuKVkOKVnSDilojilojilZHilojilojilojilojilojilojilojilZfilojilojilZEg4pWa4paI4paI4paI4paI4pWRICAg4paI4paI4pWRICAgICAgIOKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWRICDilojilojilZHilojilojilojilojilojilojilZTilZ1cbiAgICAgICAgICAgIC8v4pWa4pWQ4pWdICAgICDilZrilZDilZ0gIOKVmuKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZ0gICAgIOKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWQ4pWQ4pWdICAg4pWa4pWQ4pWdICAgICAgIOKVmuKVkOKVnSAg4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZ3ilZrilZDilZDilZDilZDilZDilZ1cbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzQgdlZlcnRleENvbG9yO1xcbicgKyAndmFyeWluZyB2ZWM0IHZWZXJ0ZXhDb2xvck5ldEVycm9yO1xcbicgKyAndmFyeWluZyB2ZWM0IHZVVjtcXG4nICsgJ3ZhcnlpbmcgdmVjMiB2VmVydGV4VVY7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZVc2VUZXg7XFxuJyArICd2YXJ5aW5nIHZlYzQgdldOTWF0cml4O1xcbicgKyAndmFyeWluZyBmbG9hdCB2Tm9kZUlkO1xcbicgKyAndmFyeWluZyBmbG9hdCB2Tm9kZUlkT3Bwb3NpdGU7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZEaXN0O1xcbicgKyAndmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTtcXG4nICsgJ3ZhcnlpbmcgZmxvYXQgdklzU2VsZWN0ZWQ7XFxuJyArICd2YXJ5aW5nIGZsb2F0IHZJc0hvdmVyO1xcbicgKyAndmFyeWluZyBmbG9hdCB2VXNlQ3Jvc3NoYWlyO1xcbicgKyAndmFyeWluZyBmbG9hdCB2SXN0YXJnZXQ7XFxuJyxcblxuICAgICAgICAgICAgLy/ilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilZcgIOKWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKVlyAgIOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKVlyAgIOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICDilojilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKVlyAgIOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWXXG4gICAgICAgICAgICAvL+KWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKVkOKVkOKVnSDilojilojilojilojilZcg4paI4paI4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4paI4paI4pWXICDilojilojilZHilZrilZDilZDilojilojilZTilZDilZDilZ0gICAg4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4pWQ4paI4paI4pWX4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWdXG4gICAgICAgICAgICAvL+KWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4pWRICDilojilojilojilZfilojilojilZTilojilojilojilojilZTilojilojilZHilojilojilojilojilojilZcgIOKWiOKWiOKVlOKWiOKWiOKVlyDilojilojilZEgICDilojilojilZEgICAgICAg4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4pWRICAg4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4pWRICAgICDilojilojilojilojilojilZdcbiAgICAgICAgICAgIC8v4paI4paI4pWU4pWQ4pWQ4pWdICDilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZHilojilojilZEgICDilojilojilZHilojilojilZHilZrilojilojilZTilZ3ilojilojilZHilojilojilZTilZDilZDilZ0gIOKWiOKWiOKVkeKVmuKWiOKWiOKVl+KWiOKWiOKVkSAgIOKWiOKWiOKVkSAgICAgICDilZrilZDilZDilZDilZDilojilojilZHilojilojilZEgICDilojilojilZHilojilojilZEgICDilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZEgICAgIOKWiOKWiOKVlOKVkOKVkOKVnVxuICAgICAgICAgICAgLy/ilojilojilZEgICAgIOKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4pWRICDilojilojilZHilZrilojilojilojilojilojilojilZTilZ3ilojilojilZEg4pWa4pWQ4pWdIOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVkSDilZrilojilojilojilojilZEgICDilojilojilZEgICAgICAg4paI4paI4paI4paI4paI4paI4paI4pWR4pWa4paI4paI4paI4paI4paI4paI4pWU4pWd4pWa4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4pWRICDilojilojilZHilZrilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilZdcbiAgICAgICAgICAgIC8v4pWa4pWQ4pWdICAgICDilZrilZDilZ0gIOKVmuKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZ0gICAgIOKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVnSAg4pWa4pWQ4pWQ4pWQ4pWdICAg4pWa4pWQ4pWdICAgICAgIOKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZDilZDilZDilZDilZ0gIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZ0gIOKVmuKVkOKVnSDilZrilZDilZDilZDilZDilZDilZ3ilZrilZDilZDilZDilZDilZDilZDilZ1cbiAgICAgICAgICAgICd2ZWM0IGNvbG9yID0gdlZlcnRleENvbG9yO1xcbicgKyAndmVjNCBjb2xvckIgPSB2VmVydGV4Q29sb3JOZXRFcnJvcjtcXG4nICsgJ3ZlYzQgY29sb3JPcmFuZ2UgPSB2ZWM0KDI1NS4wLzI1NS4wLCAxMzEuMC8yNTUuMCwgMC4wLzI1NS4wLCAxLjApOycgKyAndmVjNCBjb2xvck9yYW5nZURhcmsgPSB2ZWM0KDI1NS4wLzI1NS4wLCA4MC4wLzI1NS4wLCAwLjAvMjU1LjAsIDEuMCk7JyArICd2ZWM0IGNvbG9yUHVycGxlID0gdmVjNCgxMzIuMC8yNTUuMCwgMC4wLzI1NS4wLCAyNTUuMC8yNTUuMCwgMS4wKTsnICsgJ3ZlYzQgZmNvbG9yID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApOycgKyAnaWYoaXNOb2RlID09IDEuMCkgeycgKyAnaWYodlVzZVRleCA9PSAxLjApIHsnICsgJ3ZlYzQgdGV4OycgKyAnaWYodlVzZUNyb3NzaGFpciA9PSAxLjApIHsnICsgJ3RleCA9IG5vZGVzSW1nQ3Jvc3NoYWlyW3ZWZXJ0ZXhVVi54eV07JyArICd9IGVsc2UgaWYodklzU2VsZWN0ZWQgPT0gMS4wKSB7JyArICdjb2xvciA9IGNvbG9yT3JhbmdlRGFyazsnICsgJ3RleCA9IG5vZGVzSW1nQ3Jvc3NoYWlyW3ZWZXJ0ZXhVVi54eV07JyArICd9IGVsc2UgaWYodklzSG92ZXIgPT0gMS4wKSB7JyArICdjb2xvciA9IGNvbG9yUHVycGxlOycgKyAndGV4ID0gbm9kZXNJbWdbdlZlcnRleFVWLnh5XTsnICsgJ30gZWxzZSB7JyArICd0ZXggPSBub2Rlc0ltZ1t2VmVydGV4VVYueHldOycgKyAnfScgKyAnY29sb3IgPSAnICsgX2dyYXBoVXRpbC5HcmFwaFV0aWxzLm5vZGVzRHJhd01vZGUoZ2VvbWV0cnlMZW5ndGgpICsgJztcXG4nICsgJ30nICsgJ2lmKGNvbG9yLmEgPCAwLjEpIGRpc2NhcmQ7JyArICdmY29sb3IgPSBjb2xvcjtcXG4nICsgJ2lmKGVuYWJsZU5ldXJvbmFsTmV0d29yayA9PSAxLjApIHsnICtcbiAgICAgICAgICAgIC8vIGhhbGYgdXA6IG91cHV0OyBoYWxmIGRvd246IGVycm9yXG4gICAgICAgICAgICAnaWYodlVWLnkgPiAoMC43KSkgJyArICdmY29sb3IgPSBjb2xvckI7XFxuJyArIC8vIDAuNzUtKGNvbG9yQi53KjEuMCkgICAnZmNvbG9yID0gKHZVVi55IDwgKDAuNSkpID8gY29sb3IgOiAoKGNvbG9yQi53ID09IDAuMCk/Y29sb3I6Y29sb3JCKTtcXG4nK1xuICAgICAgICAgICAgJ30nICsgJ30gZWxzZSBpZihpc0xpbmsgPT0gMS4wKSB7JyArICdpZih2SXNTZWxlY3RlZCA9PSAxLjApICcgKyAnY29sb3IgPSBjb2xvck9yYW5nZTsnICsgJ2Vsc2UgaWYodklzSG92ZXIgPT0gMS4wKSAnICsgJ2NvbG9yID0gY29sb3JQdXJwbGU7JyArICdpZihlbmFibGVOZXVyb25hbE5ldHdvcmsgPT0gMS4wKSB7JyArXG4gICAgICAgICAgICAvLyB3ZWlnaHQgY29sb3JcbiAgICAgICAgICAgICd2ZWMyIHhBZGpNYXRDdXJyZW50ID0gZ2V0X2dsb2JhbF9pZCh2ZWMyKHZOb2RlSWRPcHBvc2l0ZSwgdk5vZGVJZCksIHdpZHRoQWRqTWF0cml4KTsnICsgJ3ZlYzQgcGl4QWRqTWF0QUN1cnJlbnQgPSBhZGphY2VuY3lNYXRyaXhbeEFkak1hdEN1cnJlbnRdO1xcbicgKyAndmVjNCBwaXhBZGpNYXRDQ3VycmVudCA9IGFkamFjZW5jeU1hdHJpeENbeEFkak1hdEN1cnJlbnRdO1xcbicgK1xuXG4gICAgICAgICAgICAvLyB4IHdlaWdodFxuICAgICAgICAgICAgJ2lmKHBpeEFkak1hdEFDdXJyZW50LnogPiAwLjApICcgKyAnZmNvbG9yID0gdmVjNCgwLjAsIHBpeEFkak1hdEFDdXJyZW50LnosIDAuMCwgMS4wKTtcXG4nICsgJ2Vsc2UgJyArICdmY29sb3IgPSB2ZWM0KGFicyhwaXhBZGpNYXRBQ3VycmVudC56KSwgMC4wLCAwLjAsIDEuMCk7XFxuJyArXG5cbiAgICAgICAgICAgIC8qJ2lmKHBpeEFkak1hdENDdXJyZW50LnggPiAwLjApICcrXHJcbiAgICAgICAgICAgICAgICAnZmNvbG9yICo9IHZlYzQoMC4wLCBhYnMocGl4QWRqTWF0Q0N1cnJlbnQueCksIDAuMCwgMS4wKTsnK1xyXG4gICAgICAgICAgICAnZWxzZSBpZihwaXhBZGpNYXRDQ3VycmVudC54IDwgMC4wKSAnK1xyXG4gICAgICAgICAgICAgICAgJ2Zjb2xvciAqPSB2ZWM0KGFicyhwaXhBZGpNYXRDQ3VycmVudC54KSwgMC4wLCAwLjAsIDEuMCk7JytcclxuICAgICAgICAgICAgJ2Vsc2UgJytcclxuICAgICAgICAgICAgICAgICdmY29sb3IgKj0gdmVjNCgwLjAsMC4wLDAuMCwgMC4wKTsnKyovXG5cbiAgICAgICAgICAgIC8vIHggb3V0cHV0XG4gICAgICAgICAgICAnaWYobXVsdGlwbHlPdXRwdXQgPT0gMS4wKSAnICsgJ2Zjb2xvciAqPSB2ZWM0KGNvbG9yLnh5eiwgMS4wKTtcXG4nICsgJ30gZWxzZSAnICsgJ2Zjb2xvciA9IHZlYzQoY29sb3IueHl6LCAxLjApO1xcbicgKyAnfSBlbHNlIGlmKGlzQXJyb3cgPT0gMS4wKSB7JyArICdpZih2SXN0YXJnZXQgPT0gMS4wKSB7JyArICdpZih2SXNTZWxlY3RlZCA9PSAxLjApIHsnICsgJ2NvbG9yID0gdmVjNChjb2xvck9yYW5nZS5yZ2IqdkRpc3QsIDEuMCk7XFxuJyArICd9IGVsc2UgaWYodklzSG92ZXIgPT0gMS4wKSB7JyArICdjb2xvciA9IHZlYzQoY29sb3JQdXJwbGUucmdiKnZEaXN0LCAxLjApO1xcbicgKyAnfScgKyAnfSBlbHNlIHsnICsgJ2NvbG9yID0gdmVjNCgxLjAsIDAuMCwgMC4wLCAwLjApOycgKyAnfScgKyAnZmNvbG9yID0gY29sb3I7XFxuJyArICd9IGVsc2UgaWYoaXNOb2RlVGV4dCA9PSAxLjApIHsnICsgJ2Zjb2xvciA9IGZvbnRzSW1nW3ZWZXJ0ZXhVVi54eV07XFxuJyArICd9JyArICdpZih2VmlzaWJpbGl0eSA9PSAwLjApICcgKyAnZGlzY2FyZDsnICsgJ3JldHVybiBbZmNvbG9yXTsnXTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBWRlBfTk9ERTtcbn0oKTtcblxuZ2xvYmFsLlZGUF9OT0RFID0gVkZQX05PREU7XG5tb2R1bGUuZXhwb3J0cy5WRlBfTk9ERSA9IFZGUF9OT0RFOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBHcmFwaFV0aWxzID0gZXhwb3J0cy5HcmFwaFV0aWxzID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdyYXBoVXRpbHMoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHcmFwaFV0aWxzKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoR3JhcGhVdGlscywgbnVsbCwgW3tcbiAgICAgICAga2V5OiBcIm5vZGVzRHJhd01vZGVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5vZGVzRHJhd01vZGUoZ2VvbWV0cnlMZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChnZW9tZXRyeUxlbmd0aCA9PT0gMSkgcmV0dXJuIFwidmVjNChjb2xvci5yZ2IsIDEuMClcIjtlbHNlIHJldHVybiBcInZlYzQodGV4LnJnYipjb2xvci5yZ2IsIHRleC5hKVwiO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiYWRqTWF0cml4X0ZvcmNlTGF5b3V0X0dMU0xGdW5jdGlvblN0cmluZ1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRqTWF0cml4X0ZvcmNlTGF5b3V0X0dMU0xGdW5jdGlvblN0cmluZyhnZW9tZXRyeUxlbmd0aCwgZWZmZXJlbnRTdGFydCwgZWZmZXJlbnROb2Rlc0NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gJycgKyBcInZlYzMgc3BoZXJpY2FsQ29sbCh2ZWMzIGN1cnJlbnREaXIsIHZlYzMgY3VycmVudERpckIsIHZlYzMgZGlyVG9CTikge1xcbiAgICAgICAgICAgIHZlYzMgY3VycmVudERpck4gPSBub3JtYWxpemUoY3VycmVudERpcik7XFxuICAgICAgICAgICAgZmxvYXQgcFBvaW50ID0gYWJzKGRvdChjdXJyZW50RGlyTiwgZGlyVG9CTikpO1xcbiAgICAgICAgICAgIHZlYzMgcmVmbGVjdFYgPSByZWZsZWN0KGN1cnJlbnREaXJOKi0xLjAsIGRpclRvQk4pO1xcblxcbiAgICAgICAgICAgIHZlYzMgY3VycmVudERpckJOID0gbm9ybWFsaXplKGN1cnJlbnREaXJCKTtcXG4gICAgICAgICAgICBmbG9hdCBwUG9pbnRCID0gYWJzKGRvdChjdXJyZW50RGlyQk4sIGRpclRvQk4pKTtcXG5cXG4gICAgICAgICAgICB2ZWMzIHJlcHVsc2lvbkZvcmNlID0gKHJlZmxlY3RWKi0xLjApKiAoKCgxLjAtcFBvaW50KSpsZW5ndGgoY3VycmVudERpcikpKygocFBvaW50QikqbGVuZ3RoKGN1cnJlbnREaXJCKSkpO1xcblxcbiAgICAgICAgICAgIHJldHVybiAocmVwdWxzaW9uRm9yY2UueCA+IDAuMCAmJiByZXB1bHNpb25Gb3JjZS55ID4gMC4wICYmIHJlcHVsc2lvbkZvcmNlLnogPiAwLjApID8gcmVwdWxzaW9uRm9yY2UgOiBkaXJUb0JOKi0wLjE7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBzdHJ1Y3QgQ2FsY3VsYXRpb25SZXNwb25zZSB7XFxuICAgICAgICAgICAgdmVjMyBhdHJhY3Rpb247XFxuICAgICAgICAgICAgZmxvYXQgYWN1bUF0cmFjdGlvbjtcXG4gICAgICAgICAgICB2ZWMzIHJlcHVsc2lvbjtcXG4gICAgICAgICAgICBmbG9hdCBjb2xsaXNpb25FeGlzdHM7XFxuICAgICAgICAgICAgZmxvYXQgbmV0Q2hpbGRJbnB1dFN1bUE7XFxuICAgICAgICAgICAgZmxvYXQgbmV0UGFyZW50RXJyb3JXZWlnaHRBO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1CO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldFBhcmVudEVycm9yV2VpZ2h0QjtcXG4gICAgICAgICAgICBmbG9hdCBuZXRDaGlsZElucHV0U3VtQztcXG4gICAgICAgICAgICBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEM7XFxuICAgICAgICAgICAgZmxvYXQgbmV0Q2hpbGRJbnB1dFN1bUQ7XFxuICAgICAgICAgICAgZmxvYXQgbmV0UGFyZW50RXJyb3JXZWlnaHREO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1FO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldFBhcmVudEVycm9yV2VpZ2h0RTtcXG4gICAgICAgICAgICBmbG9hdCBuZXRDaGlsZElucHV0U3VtRjtcXG4gICAgICAgICAgICBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEY7XFxuICAgICAgICAgICAgZmxvYXQgbmV0Q2hpbGRJbnB1dFN1bUc7XFxuICAgICAgICAgICAgZmxvYXQgbmV0UGFyZW50RXJyb3JXZWlnaHRHO1xcbiAgICAgICAgfTtcIiArXG5cbiAgICAgICAgICAgIC8vIHBpeEFkak1hdEEgKGJvcm5EYXRlLCBkaWVEYXRlLCB3ZWlnaHQgKHBhcmVudDotMjtjaGlsZDp3KSwgaXNQYXJlbnQgKDEuMDpwYXJlbnQ7MC4wOmNoaWxkKSlcbiAgICAgICAgICAgIC8vIHBpeEFkak1hdEEgKGxpbmtNdWx0aXBsaWVyLCBhY3RpdmF0aW9uRnVuY3Rpb24pXG4gICAgICAgICAgICBcIkNhbGN1bGF0aW9uUmVzcG9uc2UgY2FsY3VsYXRlKGZsb2F0IG5vZGVJZCxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBwaXhBZGpNYXRBQ3VycmVudCwgdmVjNCBwaXhBZGpNYXRBT3Bwb3NpdGUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgcGl4QWRqTWF0QkN1cnJlbnQsIHZlYzQgcGl4QWRqTWF0Qk9wcG9zaXRlLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyIHhHZW9tQ3VycmVudCwgdmVjMiB4R2VvbU9wcG9zaXRlLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzIGN1cnJlbnRQb3MsIHZlYzMgY3VycmVudERpcixcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMyBhdHJhY3Rpb24sIGZsb2F0IGFjdW1BdHJhY3Rpb24sIHZlYzMgcmVwdWxzaW9uLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCBlbmFibGVOZXVyb25hbE5ldHdvcmssXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1BLCBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEEsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1CLCBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEIsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1DLCBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEMsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1ELCBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEQsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1FLCBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1GLCBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEYsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1HLCBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEcpIHtcIiArXG4gICAgICAgICAgICAvLyBwaXhBZGpNYXRBQ3VycmVudFxuICAgICAgICAgICAgXCJmbG9hdCBjdXJyZW50Qm9ybkRhdGUgPSBwaXhBZGpNYXRBQ3VycmVudC54O1xcbiAgICAgICAgICAgIGZsb2F0IGN1cnJlbnREaWVEYXRlID0gcGl4QWRqTWF0QUN1cnJlbnQueTtcXG4gICAgICAgICAgICBmbG9hdCBjdXJyZW50V2VpZ2h0ID0gcGl4QWRqTWF0QUN1cnJlbnQuejtcXG4gICAgICAgICAgICBmbG9hdCBjdXJyZW50SXNQYXJlbnQgPSBwaXhBZGpNYXRBQ3VycmVudC53O1wiICtcblxuICAgICAgICAgICAgLy8gcGl4QWRqTWF0QU9wcG9zaXRlXG4gICAgICAgICAgICBcImZsb2F0IG9wcG9zaXRlQm9ybkRhdGUgPSBwaXhBZGpNYXRBT3Bwb3NpdGUueDtcXG4gICAgICAgICAgICBmbG9hdCBvcHBvc2l0ZURpZURhdGUgPSBwaXhBZGpNYXRBT3Bwb3NpdGUueTtcXG4gICAgICAgICAgICBmbG9hdCBvcHBvc2l0ZVdlaWdodCA9IHBpeEFkak1hdEFPcHBvc2l0ZS56O1xcbiAgICAgICAgICAgIGZsb2F0IG9wcG9zaXRlSXNQYXJlbnQgPSBwaXhBZGpNYXRBT3Bwb3NpdGUudztcIiArXG5cbiAgICAgICAgICAgIC8vIHBpeEFkak1hdEJDdXJyZW50XG4gICAgICAgICAgICBcImZsb2F0IGN1cnJlbnRMaW5rTXVsdGlwbGllciA9IHBpeEFkak1hdEJDdXJyZW50Lng7XFxuICAgICAgICAgICAgZmxvYXQgY3VycmVudEFjdGl2YXRpb25GbiA9IHBpeEFkak1hdEJDdXJyZW50Lnk7XCIgK1xuXG4gICAgICAgICAgICAvLyBwaXhBZGpNYXRCT3Bwb3NpdGVcbiAgICAgICAgICAgIFwiZmxvYXQgb3Bwb3NpdGVMaW5rTXVsdGlwbGllciA9IHBpeEFkak1hdEJPcHBvc2l0ZS54O1xcbiAgICAgICAgICAgIGZsb2F0IG9wcG9zaXRlQWN0aXZhdGlvbkZuID0gcGl4QWRqTWF0Qk9wcG9zaXRlLnk7XCIgK1xuXG4gICAgICAgICAgICAvLyBkYXRhQiBDdXJyZW50XG4gICAgICAgICAgICAvLydmbG9hdCBjdXJyZW50Qm9ybkRhdGUgPSBkYXRhQlt4R2VvbUN1cnJlbnRdLng7JytcbiAgICAgICAgICAgIC8vJ2Zsb2F0IGN1cnJlbnREaWVEYXRlID0gZGF0YUJbeEdlb21DdXJyZW50XS55OycrXG4gICAgICAgICAgICAvLydmbG9hdCBjdXJyZW50TmV0T3V0cHV0ID0gZGF0YUJbeEdlb21DdXJyZW50XS56OycrXG4gICAgICAgICAgICAvLydmbG9hdCBjdXJyZW50TmV0RXJyb3IgPSBkYXRhQlt4R2VvbUN1cnJlbnRdLnc7JytcblxuICAgICAgICAgICAgLy8gZGF0YUIgT3Bwb3NpdGVcbiAgICAgICAgICAgIC8vJ2Zsb2F0IG9wcG9zaXRlQm9ybkRhdGUgPSBkYXRhQlt4R2VvbU9wcG9zaXRlXS54OycrXG4gICAgICAgICAgICAvLydmbG9hdCBvcHBvc2l0ZURpZURhdGUgPSBkYXRhQlt4R2VvbU9wcG9zaXRlXS55OycrXG4gICAgICAgICAgICBcImZsb2F0IG9wcG9zaXRlTmV0T3V0cHV0QSA9IGRhdGFCW3hHZW9tT3Bwb3NpdGVdLno7XFxuICAgICAgICAgICAgZmxvYXQgb3Bwb3NpdGVOZXRFcnJvckEgPSBkYXRhQlt4R2VvbU9wcG9zaXRlXS53O1xcblxcbiAgICAgICAgICAgIGZsb2F0IG9wcG9zaXRlTmV0T3V0cHV0QiA9IGRhdGFGW3hHZW9tT3Bwb3NpdGVdLng7XFxuICAgICAgICAgICAgZmxvYXQgb3Bwb3NpdGVOZXRFcnJvckIgPSBkYXRhRlt4R2VvbU9wcG9zaXRlXS55O1xcbiAgICAgICAgXFxuICAgICAgICAgICAgZmxvYXQgb3Bwb3NpdGVOZXRPdXRwdXRDID0gZGF0YUZbeEdlb21PcHBvc2l0ZV0uejtcXG4gICAgICAgICAgICBmbG9hdCBvcHBvc2l0ZU5ldEVycm9yQyA9IGRhdGFGW3hHZW9tT3Bwb3NpdGVdLnc7XFxuICAgICAgICBcXG4gICAgICAgICAgICBmbG9hdCBvcHBvc2l0ZU5ldE91dHB1dEQgPSBkYXRhR1t4R2VvbU9wcG9zaXRlXS54O1xcbiAgICAgICAgICAgIGZsb2F0IG9wcG9zaXRlTmV0RXJyb3JEID0gZGF0YUdbeEdlb21PcHBvc2l0ZV0ueTtcXG4gICAgICAgIFxcbiAgICAgICAgICAgIGZsb2F0IG9wcG9zaXRlTmV0T3V0cHV0RSA9IGRhdGFHW3hHZW9tT3Bwb3NpdGVdLno7XFxuICAgICAgICAgICAgZmxvYXQgb3Bwb3NpdGVOZXRFcnJvckUgPSBkYXRhR1t4R2VvbU9wcG9zaXRlXS53O1xcbiAgICAgICAgXFxuICAgICAgICAgICAgZmxvYXQgb3Bwb3NpdGVOZXRPdXRwdXRGID0gZGF0YUhbeEdlb21PcHBvc2l0ZV0ueDtcXG4gICAgICAgICAgICBmbG9hdCBvcHBvc2l0ZU5ldEVycm9yRiA9IGRhdGFIW3hHZW9tT3Bwb3NpdGVdLnk7XFxuICAgICAgICBcXG4gICAgICAgICAgICBmbG9hdCBvcHBvc2l0ZU5ldE91dHB1dEcgPSBkYXRhSFt4R2VvbU9wcG9zaXRlXS56O1xcbiAgICAgICAgICAgIGZsb2F0IG9wcG9zaXRlTmV0RXJyb3JHID0gZGF0YUhbeEdlb21PcHBvc2l0ZV0udztcIiArXG5cbiAgICAgICAgICAgIC8vIHBvcyAmIGRpciBDdXJyZW50XG4gICAgICAgICAgICAvLyd2ZWMzIGN1cnJlbnRQb3MgPSBwb3NYWVpXW3hHZW9tQ3VycmVudF0ueHl6O1xcbicrXG4gICAgICAgICAgICAvLyd2ZWMzIGN1cnJlbnREaXIgPSBkaXJbeEdlb21DdXJyZW50XS54eXo7XFxuJytcblxuICAgICAgICAgICAgLy8gcG9zICYgZGlyIE9wcG9zaXRlXG4gICAgICAgICAgICBcInZlYzMgb3Bwb3NpdGVQb3MgPSBwb3NYWVpXW3hHZW9tT3Bwb3NpdGVdLnh5ejtcXG4gICAgICAgICAgICB2ZWMzIG9wcG9zaXRlRGlyID0gZGlyW3hHZW9tT3Bwb3NpdGVdLnh5ejtcIiArXG5cbiAgICAgICAgICAgIC8vIGRpciAvIGRpc3QgdG8gb3Bwb3NpdGVcbiAgICAgICAgICAgICd2ZWMzIGRpclRvT3Bwb3NpdGUgPSAob3Bwb3NpdGVQb3MtY3VycmVudFBvcyk7XFxuJyArICd2ZWMzIGRpclRvT3Bwb3NpdGVOID0gbm9ybWFsaXplKGRpclRvT3Bwb3NpdGUpO1xcbicgKyAnZmxvYXQgZGlzdCA9IGRpc3RhbmNlKG9wcG9zaXRlUG9zLCBjdXJyZW50UG9zKTtcXG4nICsgLy8gbmVhcj0wLjAgOyBmYXI9MS4wXG4gICAgICAgICAgICAnZmxvYXQgZGlzdE4gPSBtYXgoMC4wLGRpc3QpLzEwMDAwMC4wOycgKyAnZmxvYXQgcCA9IDEuMDsnICsgJ2lmKGN1cnJlbnREaWVEYXRlICE9IDAuMCAmJiAoY3VycmVudFRpbWVzdGFtcCA8IGN1cnJlbnRCb3JuRGF0ZSB8fCBjdXJyZW50VGltZXN0YW1wID4gY3VycmVudERpZURhdGUpKSAnICsgJ3AgPSAwLjA7JyArICdpZihvcHBvc2l0ZURpZURhdGUgIT0gMC4wICYmIChjdXJyZW50VGltZXN0YW1wIDwgb3Bwb3NpdGVCb3JuRGF0ZSB8fCBjdXJyZW50VGltZXN0YW1wID4gb3Bwb3NpdGVEaWVEYXRlKSkgJyArICdwID0gMC4wOycgKyAnaWYocCA9PSAxLjApIHsnICsgJ2Zsb2F0IG0xID0gKGVuYWJsZU5ldXJvbmFsTmV0d29yayA9PSAxLjApID8gMC4wIDogNDAwMDAwLjA7JyArICdmbG9hdCBtMiA9IChlbmFibGVOZXVyb25hbE5ldHdvcmsgPT0gMS4wKSA/IDAuMCA6IDQ4LjA7JyArICdpZihjdXJyZW50SXNQYXJlbnQgPT0gMS4wKSB7JyArXG4gICAgICAgICAgICAvLydpZihlbmFibGVOZXVyb25hbE5ldHdvcmsgPT0gMS4wKSAnK1xuICAgICAgICAgICAgJ25ldENoaWxkSW5wdXRTdW1BICs9IG9wcG9zaXRlTmV0T3V0cHV0QSpvcHBvc2l0ZVdlaWdodDsnICsgJ25ldENoaWxkSW5wdXRTdW1CICs9IG9wcG9zaXRlTmV0T3V0cHV0QipvcHBvc2l0ZVdlaWdodDsnICsgJ25ldENoaWxkSW5wdXRTdW1DICs9IG9wcG9zaXRlTmV0T3V0cHV0QypvcHBvc2l0ZVdlaWdodDsnICsgJ25ldENoaWxkSW5wdXRTdW1EICs9IG9wcG9zaXRlTmV0T3V0cHV0RCpvcHBvc2l0ZVdlaWdodDsnICsgJ25ldENoaWxkSW5wdXRTdW1FICs9IG9wcG9zaXRlTmV0T3V0cHV0RSpvcHBvc2l0ZVdlaWdodDsnICsgJ25ldENoaWxkSW5wdXRTdW1GICs9IG9wcG9zaXRlTmV0T3V0cHV0RipvcHBvc2l0ZVdlaWdodDsnICsgJ25ldENoaWxkSW5wdXRTdW1HICs9IG9wcG9zaXRlTmV0T3V0cHV0RypvcHBvc2l0ZVdlaWdodDsnICtcbiAgICAgICAgICAgIC8vJ2Vsc2UgeycrXG4gICAgICAgICAgICAnYXRyYWN0aW9uICs9IGRpclRvT3Bwb3NpdGVOKm1heCgxLjAsIGRpc3ROKmFicyhvcHBvc2l0ZVdlaWdodCkqKG0xLzIuMCkpO1xcbicgKyAncmVwdWxzaW9uICs9IC1kaXJUb09wcG9zaXRlTiptYXgoMS4wLCAoMS4wLWRpc3ROKSphYnMob3Bwb3NpdGVXZWlnaHQpKihtMi8yLjApKTtcXG4nICsgJ2FjdW1BdHJhY3Rpb24gKz0gMS4wO1xcbicgK1xuICAgICAgICAgICAgLy8nfScrXG4gICAgICAgICAgICAnfSBlbHNlIGlmKGN1cnJlbnRJc1BhcmVudCA9PSAwLjUpIHsnICtcbiAgICAgICAgICAgIC8vJ2lmKGVuYWJsZU5ldXJvbmFsTmV0d29yayA9PSAxLjApICcrXG4gICAgICAgICAgICAnbmV0UGFyZW50RXJyb3JXZWlnaHRBICs9IG9wcG9zaXRlTmV0RXJyb3JBKmN1cnJlbnRXZWlnaHQ7JyArICduZXRQYXJlbnRFcnJvcldlaWdodEIgKz0gb3Bwb3NpdGVOZXRFcnJvckIqY3VycmVudFdlaWdodDsnICsgJ25ldFBhcmVudEVycm9yV2VpZ2h0QyArPSBvcHBvc2l0ZU5ldEVycm9yQypjdXJyZW50V2VpZ2h0OycgKyAnbmV0UGFyZW50RXJyb3JXZWlnaHREICs9IG9wcG9zaXRlTmV0RXJyb3JEKmN1cnJlbnRXZWlnaHQ7JyArICduZXRQYXJlbnRFcnJvcldlaWdodEUgKz0gb3Bwb3NpdGVOZXRFcnJvckUqY3VycmVudFdlaWdodDsnICsgJ25ldFBhcmVudEVycm9yV2VpZ2h0RiArPSBvcHBvc2l0ZU5ldEVycm9yRipjdXJyZW50V2VpZ2h0OycgKyAnbmV0UGFyZW50RXJyb3JXZWlnaHRHICs9IG9wcG9zaXRlTmV0RXJyb3JHKmN1cnJlbnRXZWlnaHQ7JyArXG4gICAgICAgICAgICAvLydlbHNlIHsnK1xuICAgICAgICAgICAgJ2F0cmFjdGlvbiArPSBkaXJUb09wcG9zaXRlTiptYXgoMS4wLCBkaXN0TiphYnMoY3VycmVudFdlaWdodCkqbTEpO1xcbicgKyAncmVwdWxzaW9uICs9IC1kaXJUb09wcG9zaXRlTiptYXgoMS4wLCAoMS4wLWRpc3ROKSphYnMoY3VycmVudFdlaWdodCkqbTIpO1xcbicgKyAnYWN1bUF0cmFjdGlvbiArPSAxLjA7XFxuJyArXG4gICAgICAgICAgICAvLyd9JytcbiAgICAgICAgICAgICd9JyArXG5cbiAgICAgICAgICAgIC8vJ2lmKGVuYWJsZU5ldXJvbmFsTmV0d29yayA9PSAwLjApIHsnK1xuICAgICAgICAgICAgJ3JlcHVsc2lvbiArPSAtZGlyVG9PcHBvc2l0ZU4qbWF4KDEuMCwgKDEuMC1kaXN0TikqYWJzKGN1cnJlbnRXZWlnaHQpKihtMi84LjApKTtcXG4nICsgJ2FjdW1BdHJhY3Rpb24gKz0gMS4wO1xcbicgK1xuICAgICAgICAgICAgLy8nfScrXG4gICAgICAgICAgICAnfScgKyAoXCJmbG9hdCBjb2xsaXNpb25FeGlzdHMgPSAwLjA7XFxuICAgICAgICAgICAgaWYoZW5hYmxlRm9yY2VMYXlvdXRDb2xsaXNpb24gPT0gMS4wICYmIGRpc3QgPCA0LjApIHtcXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uRXhpc3RzID0gMS4wO1xcbiAgICAgICAgICAgICAgICBhdHJhY3Rpb24gPSBzcGhlcmljYWxDb2xsKGN1cnJlbnREaXIsIG9wcG9zaXRlRGlyLCBkaXJUb09wcG9zaXRlTik7XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIHJldHVybiBDYWxjdWxhdGlvblJlc3BvbnNlKGF0cmFjdGlvbiwgYWN1bUF0cmFjdGlvbiwgcmVwdWxzaW9uLCBjb2xsaXNpb25FeGlzdHMsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1BLCBuZXRQYXJlbnRFcnJvcldlaWdodEEsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1CLCBuZXRQYXJlbnRFcnJvcldlaWdodEIsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1DLCBuZXRQYXJlbnRFcnJvcldlaWdodEMsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1ELCBuZXRQYXJlbnRFcnJvcldlaWdodEQsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1FLCBuZXRQYXJlbnRFcnJvcldlaWdodEUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1GLCBuZXRQYXJlbnRFcnJvcldlaWdodEYsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1HLCBuZXRQYXJlbnRFcnJvcldlaWdodEcpO1xcbiAgICAgICAgfVxcbiAgICAgICAgc3RydWN0IGlkQWRqTWF0cml4UmVzcG9uc2Uge1xcbiAgICAgICAgICAgIHZlYzMgZm9yY2U7XFxuICAgICAgICAgICAgZmxvYXQgY29sbGlzaW9uRXhpc3RzO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldEZPdXRwdXRBO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldEVycm9yV2VpZ2h0QTtcXG4gICAgICAgICAgICBmbG9hdCBuZXRGT3V0cHV0QjtcXG4gICAgICAgICAgICBmbG9hdCBuZXRFcnJvcldlaWdodEI7XFxuICAgICAgICAgICAgZmxvYXQgbmV0Rk91dHB1dEM7XFxuICAgICAgICAgICAgZmxvYXQgbmV0RXJyb3JXZWlnaHRDO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldEZPdXRwdXREO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldEVycm9yV2VpZ2h0RDtcXG4gICAgICAgICAgICBmbG9hdCBuZXRGT3V0cHV0RTtcXG4gICAgICAgICAgICBmbG9hdCBuZXRFcnJvcldlaWdodEU7XFxuICAgICAgICAgICAgZmxvYXQgbmV0Rk91dHB1dEY7XFxuICAgICAgICAgICAgZmxvYXQgbmV0RXJyb3JXZWlnaHRGO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldEZPdXRwdXRHO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldEVycm9yV2VpZ2h0RztcXG4gICAgICAgIH07XFxuICAgICAgICBmbG9hdCB0YW5oKGZsb2F0IHZhbCkge1xcbiAgICAgICAgICAgIGZsb2F0IHRtcCA9IGV4cCh2YWwpO1xcbiAgICAgICAgICAgIGZsb2F0IHRhbkggPSAodG1wIC0gMS4wIC8gdG1wKSAvICh0bXAgKyAxLjAgLyB0bXApO1xcbiAgICAgICAgICAgIHJldHVybiB0YW5IO1xcbiAgICAgICAgfVxcbiAgICAgICAgZmxvYXQgc2lnbShmbG9hdCB2YWwpIHtcXG4gICAgICAgICAgICByZXR1cm4gKDEuMCAvICgxLjAgKyBleHAoLXZhbCkpKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlkQWRqTWF0cml4UmVzcG9uc2UgaWRBZGpNYXRyaXhfRm9yY2VMYXlvdXQoZmxvYXQgbm9kZUlkLCB2ZWMzIGN1cnJlbnRQb3MsIHZlYzMgY3VycmVudERpciwgZmxvYXQgbnVtT2ZDb25uZWN0aW9ucywgZmxvYXQgY3VycmVudFRpbWVzdGFtcCwgZmxvYXQgYm9ybkRhdGUsIGZsb2F0IGRpZURhdGUsIGZsb2F0IGVuYWJsZU5ldXJvbmFsTmV0d29yaykge1xcbiAgICAgICAgICAgIHZlYzMgYXRyYWN0aW9uID0gdmVjMygwLjAsIDAuMCwgMC4wKTtcXG4gICAgICAgICAgICBmbG9hdCBhY3VtQXRyYWN0aW9uID0gMS4wO1xcbiAgICAgICAgICAgIHZlYzMgcmVwdWxzaW9uID0gdmVjMygwLjAsIDAuMCwgMC4wKTtcXG5cXG4gICAgICAgICAgICBmbG9hdCBjb2xsaXNpb25FeGlzdHMgPSAwLjA7XFxuICAgICAgICAgICAgdmVjMyBmb3JjZSA9IHZlYzMoMC4wLCAwLjAsIDAuMCk7XFxuXFxuXFxuICAgICAgICAgICAgZmxvYXQgbmV0Q2hpbGRJbnB1dFN1bUEgPSAwLjA7XFxuICAgICAgICAgICAgZmxvYXQgZm91dHB1dEEgPSAwLjA7XFxuICAgICAgICAgICAgZmxvYXQgbmV0UGFyZW50RXJyb3JXZWlnaHRBID0gMC4wO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1CID0gMC4wO1xcbiAgICAgICAgICAgIGZsb2F0IGZvdXRwdXRCID0gMC4wO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldFBhcmVudEVycm9yV2VpZ2h0QiA9IDAuMDtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBmbG9hdCBuZXRDaGlsZElucHV0U3VtQyA9IDAuMDtcXG4gICAgICAgICAgICBmbG9hdCBmb3V0cHV0QyA9IDAuMDtcXG4gICAgICAgICAgICBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEMgPSAwLjA7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgZmxvYXQgbmV0Q2hpbGRJbnB1dFN1bUQgPSAwLjA7XFxuICAgICAgICAgICAgZmxvYXQgZm91dHB1dEQgPSAwLjA7XFxuICAgICAgICAgICAgZmxvYXQgbmV0UGFyZW50RXJyb3JXZWlnaHREID0gMC4wO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGZsb2F0IG5ldENoaWxkSW5wdXRTdW1FID0gMC4wO1xcbiAgICAgICAgICAgIGZsb2F0IGZvdXRwdXRFID0gMC4wO1xcbiAgICAgICAgICAgIGZsb2F0IG5ldFBhcmVudEVycm9yV2VpZ2h0RSA9IDAuMDtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBmbG9hdCBuZXRDaGlsZElucHV0U3VtRiA9IDAuMDtcXG4gICAgICAgICAgICBmbG9hdCBmb3V0cHV0RiA9IDAuMDtcXG4gICAgICAgICAgICBmbG9hdCBuZXRQYXJlbnRFcnJvcldlaWdodEYgPSAwLjA7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgZmxvYXQgbmV0Q2hpbGRJbnB1dFN1bUcgPSAwLjA7XFxuICAgICAgICAgICAgZmxvYXQgZm91dHB1dEcgPSAwLjA7XFxuICAgICAgICAgICAgZmxvYXQgbmV0UGFyZW50RXJyb3JXZWlnaHRHID0gMC4wO1xcbiAgICAgICAgICAgIFxcblxcbiAgICAgICAgICAgIGlmKG5vZGVJZCA8IG5vZGVzQ291bnQpIHtcXG4gICAgICAgICAgICAgICAgZmxvYXQgY3VycmVudEFjdGl2YXRpb25GbiA9IDAuMDtcXG4gICAgICAgICAgICAgICAgdmVjMiB4R2VvbUN1cnJlbnQgPSBnZXRfZ2xvYmFsX2lkKG5vZGVJZCwgdUJ1ZmZlcldpZHRoLCBcIiArIGdlb21ldHJ5TGVuZ3RoLnRvRml4ZWQoMSkgKyBcIik7XFxuICAgICAgICAgICAgICAgIGZvcihpbnQgbj0wOyBuIDwgNDA5NjsgbisrKSB7XFxuICAgICAgICAgICAgICAgICAgICBpZihmbG9hdChuKSA+PSBub2Rlc0NvdW50KSB7YnJlYWs7fVxcbiAgICAgICAgICAgICAgICAgICAgaWYoZmxvYXQobikgIT0gbm9kZUlkKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiB4R2VvbU9wcG9zaXRlID0gZ2V0X2dsb2JhbF9pZChmbG9hdChuKSwgdUJ1ZmZlcldpZHRoLCBcIiArIGdlb21ldHJ5TGVuZ3RoLnRvRml4ZWQoMSkgKyBcIik7XFxuXFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiB4QWRqTWF0Q3VycmVudCA9IGdldF9nbG9iYWxfaWQodmVjMihmbG9hdChuKSwgbm9kZUlkKSwgd2lkdGhBZGpNYXRyaXgpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIgeEFkak1hdE9wcG9zaXRlID0gZ2V0X2dsb2JhbF9pZCh2ZWMyKG5vZGVJZCwgZmxvYXQobikpLCB3aWR0aEFkak1hdHJpeCk7XFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBwaXhBZGpNYXRBQ3VycmVudCA9IGFkamFjZW5jeU1hdHJpeFt4QWRqTWF0Q3VycmVudF07XFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBwaXhBZGpNYXRBT3Bwb3NpdGUgPSBhZGphY2VuY3lNYXRyaXhbeEFkak1hdE9wcG9zaXRlXTtcXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHBpeEFkak1hdEJDdXJyZW50ID0gYWRqYWNlbmN5TWF0cml4Qlt4QWRqTWF0Q3VycmVudF07XFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBwaXhBZGpNYXRCT3Bwb3NpdGUgPSBhZGphY2VuY3lNYXRyaXhCW3hBZGpNYXRPcHBvc2l0ZV07XFxuXFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FsY3VsYXRpb25SZXNwb25zZSBjYWxjUmVzcG9uc2UgPSBjYWxjdWxhdGUobm9kZUlkLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGl4QWRqTWF0QUN1cnJlbnQsIHBpeEFkak1hdEFPcHBvc2l0ZSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpeEFkak1hdEJDdXJyZW50LCBwaXhBZGpNYXRCT3Bwb3NpdGUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4R2VvbUN1cnJlbnQsIHhHZW9tT3Bwb3NpdGUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9zLCBjdXJyZW50RGlyLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXRyYWN0aW9uLCBhY3VtQXRyYWN0aW9uLCByZXB1bHNpb24sXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVOZXVyb25hbE5ldHdvcmssXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRDaGlsZElucHV0U3VtQSwgbmV0UGFyZW50RXJyb3JXZWlnaHRBLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0Q2hpbGRJbnB1dFN1bUIsIG5ldFBhcmVudEVycm9yV2VpZ2h0QixcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1DLCBuZXRQYXJlbnRFcnJvcldlaWdodEMsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRDaGlsZElucHV0U3VtRCwgbmV0UGFyZW50RXJyb3JXZWlnaHRELFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0Q2hpbGRJbnB1dFN1bUUsIG5ldFBhcmVudEVycm9yV2VpZ2h0RSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1GLCBuZXRQYXJlbnRFcnJvcldlaWdodEYsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRDaGlsZElucHV0U3VtRywgbmV0UGFyZW50RXJyb3JXZWlnaHRHKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHJhY3Rpb24gPSBjYWxjUmVzcG9uc2UuYXRyYWN0aW9uO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdW1BdHJhY3Rpb24gPSBjYWxjUmVzcG9uc2UuYWN1bUF0cmFjdGlvbjtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXB1bHNpb24gPSBjYWxjUmVzcG9uc2UucmVwdWxzaW9uO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1BID0gY2FsY1Jlc3BvbnNlLm5ldENoaWxkSW5wdXRTdW1BO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0QSA9IGNhbGNSZXNwb25zZS5uZXRQYXJlbnRFcnJvcldlaWdodEE7XFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0Q2hpbGRJbnB1dFN1bUIgPSBjYWxjUmVzcG9uc2UubmV0Q2hpbGRJbnB1dFN1bUI7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRCID0gY2FsY1Jlc3BvbnNlLm5ldFBhcmVudEVycm9yV2VpZ2h0QjtcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXRDaGlsZElucHV0U3VtQyA9IGNhbGNSZXNwb25zZS5uZXRDaGlsZElucHV0U3VtQztcXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXRQYXJlbnRFcnJvcldlaWdodEMgPSBjYWxjUmVzcG9uc2UubmV0UGFyZW50RXJyb3JXZWlnaHRDO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1EID0gY2FsY1Jlc3BvbnNlLm5ldENoaWxkSW5wdXRTdW1EO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RCA9IGNhbGNSZXNwb25zZS5uZXRQYXJlbnRFcnJvcldlaWdodEQ7XFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0Q2hpbGRJbnB1dFN1bUUgPSBjYWxjUmVzcG9uc2UubmV0Q2hpbGRJbnB1dFN1bUU7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRFID0gY2FsY1Jlc3BvbnNlLm5ldFBhcmVudEVycm9yV2VpZ2h0RTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXRDaGlsZElucHV0U3VtRiA9IGNhbGNSZXNwb25zZS5uZXRDaGlsZElucHV0U3VtRjtcXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXRQYXJlbnRFcnJvcldlaWdodEYgPSBjYWxjUmVzcG9uc2UubmV0UGFyZW50RXJyb3JXZWlnaHRGO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldENoaWxkSW5wdXRTdW1HID0gY2FsY1Jlc3BvbnNlLm5ldENoaWxkSW5wdXRTdW1HO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RyA9IGNhbGNSZXNwb25zZS5uZXRQYXJlbnRFcnJvcldlaWdodEc7XFxuXFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2FsY1Jlc3BvbnNlLmNvbGxpc2lvbkV4aXN0cyA9PSAxLjApIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uRXhpc3RzID0gMS4wO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JjZSA9IGNhbGNSZXNwb25zZS5hdHJhY3Rpb247XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkaWVEYXRlICE9IDAuMCkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50VGltZXN0YW1wIDwgYm9ybkRhdGUgfHwgY3VycmVudFRpbWVzdGFtcCA+IGRpZURhdGUpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlID0gdmVjMygwLjAsIDAuMCwgMC4wKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgICAgIGlmKGNvbGxpc2lvbkV4aXN0cyA9PSAwLjApIHtcXG4gICAgICAgICAgICAgICAgICAgIGZvcmNlICs9IChhdHJhY3Rpb24vYWN1bUF0cmFjdGlvbikqMS4wO1xcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UgKz0gKHJlcHVsc2lvbi9hY3VtQXRyYWN0aW9uKSoxLjA7XFxuICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgaWYoZW5hYmxlTmV1cm9uYWxOZXR3b3JrID09IDEuMCkge1xcbiAgICAgICAgICAgICAgICAgICAgXCIgKyBHcmFwaFV0aWxzLmVmZmVyZW50Tm9kZXNTdHIoZWZmZXJlbnRTdGFydCwgZWZmZXJlbnROb2Rlc0NvdW50KSArIFwiXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgcmV0dXJuIGlkQWRqTWF0cml4UmVzcG9uc2UodmVjMyhmb3JjZSksIGNvbGxpc2lvbkV4aXN0cyxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEEsIG5ldFBhcmVudEVycm9yV2VpZ2h0QSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEIsIG5ldFBhcmVudEVycm9yV2VpZ2h0QixcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEMsIG5ldFBhcmVudEVycm9yV2VpZ2h0QyxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEQsIG5ldFBhcmVudEVycm9yV2VpZ2h0RCxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEUsIG5ldFBhcmVudEVycm9yV2VpZ2h0RSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEYsIG5ldFBhcmVudEVycm9yV2VpZ2h0RixcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEcsIG5ldFBhcmVudEVycm9yV2VpZ2h0Ryk7XFxuICAgICAgICB9XCIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZWZmZXJlbnROb2Rlc1N0clwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZWZmZXJlbnROb2Rlc1N0cihlZmZlcmVudFN0YXJ0LCBlZmZlcmVudE5vZGVzQ291bnQpIHtcbiAgICAgICAgICAgIHZhciBzdHIgPSBcIlxcbiAgICAgICAgICAgIGlmKG5vZGVJZCA8IGFmZmVyZW50Tm9kZXNDb3VudCkge1xcbiAgICAgICAgICAgICAgICBmb3IoZmxvYXQgbj0wLjA7IG4gPCAxMDI0LjA7IG4rPTEuMCkge1xcbiAgICAgICAgICAgICAgICAgICAgaWYobiA+PSBhZmZlcmVudE5vZGVzQ291bnQpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIGlmKG5vZGVJZCA9PSBuKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEEgPSBhZmZlcmVudE5vZGVzQVtpbnQobildO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdXRwdXRCID0gYWZmZXJlbnROb2Rlc0JbaW50KG4pXTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3V0cHV0QyA9IGFmZmVyZW50Tm9kZXNDW2ludChuKV07XFxuICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEQgPSBhZmZlcmVudE5vZGVzRFtpbnQobildO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdXRwdXRFID0gYWZmZXJlbnROb2Rlc0VbaW50KG4pXTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3V0cHV0RiA9IGFmZmVyZW50Tm9kZXNGW2ludChuKV07XFxuICAgICAgICAgICAgICAgICAgICAgICAgZm91dHB1dEcgPSBhZmZlcmVudE5vZGVzR1tpbnQobildO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgZm91dHB1dEEgPSBtYXgoMC4wLCBuZXRDaGlsZElucHV0U3VtQSk7IFwiICsgXCJcXG4gICAgICAgICAgICAgICAgZm91dHB1dEIgPSBtYXgoMC4wLCBuZXRDaGlsZElucHV0U3VtQik7XFxuICAgICAgICAgICAgICAgIGZvdXRwdXRDID0gbWF4KDAuMCwgbmV0Q2hpbGRJbnB1dFN1bUMpO1xcbiAgICAgICAgICAgICAgICBmb3V0cHV0RCA9IG1heCgwLjAsIG5ldENoaWxkSW5wdXRTdW1EKTtcXG4gICAgICAgICAgICAgICAgZm91dHB1dEUgPSBtYXgoMC4wLCBuZXRDaGlsZElucHV0U3VtRSk7XFxuICAgICAgICAgICAgICAgIGZvdXRwdXRGID0gbWF4KDAuMCwgbmV0Q2hpbGRJbnB1dFN1bUYpO1xcbiAgICAgICAgICAgICAgICBmb3V0cHV0RyA9IG1heCgwLjAsIG5ldENoaWxkSW5wdXRTdW1HKTtcXG4gICAgICAgICAgICB9XCI7XG5cbiAgICAgICAgICAgIHN0ciArPSBcIlxcbiAgICAgICAgaWYobm9kZUlkID09IFwiICsgZWZmZXJlbnRTdGFydC50b0ZpeGVkKDEpICsgKFwiKSB7XFxuICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRBID0gKGVmZmVyZW50Tm9kZXNBWzBdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtQS1lZmZlcmVudE5vZGVzQVswXSA6IDAuMDtcXG4gICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRCID0gKGVmZmVyZW50Tm9kZXNCWzBdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtQi1lZmZlcmVudE5vZGVzQlswXSA6IDAuMDtcXG4gICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRDID0gKGVmZmVyZW50Tm9kZXNDWzBdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtQy1lZmZlcmVudE5vZGVzQ1swXSA6IDAuMDtcXG4gICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHREID0gKGVmZmVyZW50Tm9kZXNEWzBdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtRC1lZmZlcmVudE5vZGVzRFswXSA6IDAuMDtcXG4gICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRFID0gKGVmZmVyZW50Tm9kZXNFWzBdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtRS1lZmZlcmVudE5vZGVzRVswXSA6IDAuMDtcXG4gICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRGID0gKGVmZmVyZW50Tm9kZXNGWzBdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtRi1lZmZlcmVudE5vZGVzRlswXSA6IDAuMDtcXG4gICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRHID0gKGVmZmVyZW50Tm9kZXNHWzBdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtRy1lZmZlcmVudE5vZGVzR1swXSA6IDAuMDtcXG4gICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICB9XCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgbiA9IGVmZmVyZW50U3RhcnQgKyAxOyBuIDwgZWZmZXJlbnRTdGFydCArIGVmZmVyZW50Tm9kZXNDb3VudDsgbisrKSB7XG4gICAgICAgICAgICAgICAgc3RyICs9IFwiXFxuICAgICAgICAgICAgZWxzZSBpZihub2RlSWQgPT0gXCIgKyBuLnRvRml4ZWQoMSkgKyBcIikge1xcbiAgICAgICAgICAgICAgICBuZXRQYXJlbnRFcnJvcldlaWdodEEgPSAoZWZmZXJlbnROb2Rlc0FbXCIgKyBNYXRoLnJvdW5kKG4gLSBlZmZlcmVudFN0YXJ0KSArIFwiXSAhPSAwLjApID8gbmV0Q2hpbGRJbnB1dFN1bUEtZWZmZXJlbnROb2Rlc0FbXCIgKyBNYXRoLnJvdW5kKG4gLSBlZmZlcmVudFN0YXJ0KSArIChcIl0gOiAwLjA7XFxuICAgICAgICAgICAgICAgIFwiICsgXCJcXG4gICAgICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRCID0gKGVmZmVyZW50Tm9kZXNCW1wiKSArIE1hdGgucm91bmQobiAtIGVmZmVyZW50U3RhcnQpICsgXCJdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtQi1lZmZlcmVudE5vZGVzQltcIiArIE1hdGgucm91bmQobiAtIGVmZmVyZW50U3RhcnQpICsgKFwiXSA6IDAuMDtcXG4gICAgICAgICAgICAgICAgXCIgKyBcIlxcbiAgICAgICAgICAgICAgICBuZXRQYXJlbnRFcnJvcldlaWdodEMgPSAoZWZmZXJlbnROb2Rlc0NbXCIpICsgTWF0aC5yb3VuZChuIC0gZWZmZXJlbnRTdGFydCkgKyBcIl0gIT0gMC4wKSA/IG5ldENoaWxkSW5wdXRTdW1DLWVmZmVyZW50Tm9kZXNDW1wiICsgTWF0aC5yb3VuZChuIC0gZWZmZXJlbnRTdGFydCkgKyAoXCJdIDogMC4wO1xcbiAgICAgICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RCA9IChlZmZlcmVudE5vZGVzRFtcIikgKyBNYXRoLnJvdW5kKG4gLSBlZmZlcmVudFN0YXJ0KSArIFwiXSAhPSAwLjApID8gbmV0Q2hpbGRJbnB1dFN1bUQtZWZmZXJlbnROb2Rlc0RbXCIgKyBNYXRoLnJvdW5kKG4gLSBlZmZlcmVudFN0YXJ0KSArIChcIl0gOiAwLjA7XFxuICAgICAgICAgICAgICAgIFwiICsgXCJcXG4gICAgICAgICAgICAgICAgbmV0UGFyZW50RXJyb3JXZWlnaHRFID0gKGVmZmVyZW50Tm9kZXNFW1wiKSArIE1hdGgucm91bmQobiAtIGVmZmVyZW50U3RhcnQpICsgXCJdICE9IDAuMCkgPyBuZXRDaGlsZElucHV0U3VtRS1lZmZlcmVudE5vZGVzRVtcIiArIE1hdGgucm91bmQobiAtIGVmZmVyZW50U3RhcnQpICsgKFwiXSA6IDAuMDtcXG4gICAgICAgICAgICAgICAgXCIgKyBcIlxcbiAgICAgICAgICAgICAgICBuZXRQYXJlbnRFcnJvcldlaWdodEYgPSAoZWZmZXJlbnROb2Rlc0ZbXCIpICsgTWF0aC5yb3VuZChuIC0gZWZmZXJlbnRTdGFydCkgKyBcIl0gIT0gMC4wKSA/IG5ldENoaWxkSW5wdXRTdW1GLWVmZmVyZW50Tm9kZXNGW1wiICsgTWF0aC5yb3VuZChuIC0gZWZmZXJlbnRTdGFydCkgKyAoXCJdIDogMC4wO1xcbiAgICAgICAgICAgICAgICBcIiArIFwiXFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RyA9IChlZmZlcmVudE5vZGVzR1tcIikgKyBNYXRoLnJvdW5kKG4gLSBlZmZlcmVudFN0YXJ0KSArIFwiXSAhPSAwLjApID8gbmV0Q2hpbGRJbnB1dFN1bUctZWZmZXJlbnROb2Rlc0dbXCIgKyBNYXRoLnJvdW5kKG4gLSBlZmZlcmVudFN0YXJ0KSArIChcIl0gOiAwLjA7XFxuICAgICAgICAgICAgICAgIFwiICsgXCJcXG4gICAgICAgICAgICB9XCIpO1xuICAgICAgICAgICAgfXN0ciArPSBcIlxcbiAgICAgICAgZWxzZSB7XFxuICAgICAgICAgICAgaWYoZm91dHB1dEEgPD0gMC4wKSB7XFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0QSA9IDAuMDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYoZm91dHB1dEIgPD0gMC4wKSB7XFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0QiA9IDAuMDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYoZm91dHB1dEMgPD0gMC4wKSB7XFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0QyA9IDAuMDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYoZm91dHB1dEQgPD0gMC4wKSB7XFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RCA9IDAuMDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYoZm91dHB1dEUgPD0gMC4wKSB7XFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RSA9IDAuMDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYoZm91dHB1dEYgPD0gMC4wKSB7XFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RiA9IDAuMDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYoZm91dHB1dEcgPD0gMC4wKSB7XFxuICAgICAgICAgICAgICAgIG5ldFBhcmVudEVycm9yV2VpZ2h0RyA9IDAuMDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XCI7XG5cbiAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJhZGpNYXRyaXhfQXV0b2xpbmtfR0xTTEZ1bmN0aW9uU3RyaW5nXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGpNYXRyaXhfQXV0b2xpbmtfR0xTTEZ1bmN0aW9uU3RyaW5nKGdlb21ldHJ5TGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gJycgKyAnZmxvYXQgR2V0QW5nbGUodmVjMyBBLCB2ZWMzIEIpIHsnICsgLy8gZnJvbSAtMTgwLjAgdG8gMTgwLjBcbiAgICAgICAgICAgICd2ZWMzIGNyID0gY3Jvc3MoQSwgQik7JyArICdmbG9hdCBkID0gZG90KEEsIEIpOycgKyAnaWYoY3IueSA8IDAuMCkgeycgKyAnaWYoZCA+IDAuMCkgeycgKyAnZCA9ICAgICAgICAoMS4wLWQpKjkwLjA7JyArICd9IGVsc2UgeycgKyAnZCA9IDkwLjArICAoYWJzKGQpKjkwLjApOycgKyAnfScgKyAnfSBlbHNlIHsnICsgJ2lmKGQgPiAwLjApIHsnICsgJ2QgPSAyNzAuMCsgKGQqOTAuMCk7JyArICd9IGVsc2UgeycgKyAnZCA9IDE4MC4wKyAoKDEuMC1hYnMoZCkpKjkwLjApOycgKyAnfScgKyAnfScgKyAncmV0dXJuIGQ7JyArICd9JyArICd2ZWM0IGlkQWRqTWF0cml4X0F1dG9saW5rKGZsb2F0IG5vZGVJZCwgdmVjMyBjdXJyZW50UG9zKSB7XFxuJyArXG4gICAgICAgICAgICAvLyBJTklUIFZBUlNcbiAgICAgICAgICAgICd2ZWMyIHRvdGFsSURyZWxhdGlvbiA9IHZlYzIoMC4wLCAwLjApOycgKyAnZmxvYXQgdG90YWxBbmdsZVJlbGF0aW9ucyA9IDAuMDsnICtcbiAgICAgICAgICAgIC8vIEVORCBJTklUIFZBUlNcblxuICAgICAgICAgICAgJ2lmKG5vZGVJZCA8IG5vZGVzQ291bnQpIHtcXG4nICsgJ2ZvcihpbnQgbj0wOyBuIDwgNDA5NjsgbisrKSB7XFxuJyArICdpZihmbG9hdChuKSA+PSBub2Rlc0NvdW50KSBicmVhaztcXG4nICsgJ2lmKGZsb2F0KG4pICE9IG5vZGVJZCkgeycgKyAndmVjMiB4QWRqTWF0Q3VycmVudCA9IGdldF9nbG9iYWxfaWQodmVjMihmbG9hdChuKSwgbm9kZUlkKSwgd2lkdGhBZGpNYXRyaXgpOycgKyAndmVjNCBwaXhBZGpNYXRBQ3VycmVudCA9IGFkamFjZW5jeU1hdHJpeFt4QWRqTWF0Q3VycmVudF07XFxuJyArXG5cbiAgICAgICAgICAgIC8vIFJFTEFUSU9OIEZPVU5EXG4gICAgICAgICAgICAnaWYocGl4QWRqTWF0QUN1cnJlbnQueCA+IDAuMCkgeycgKyAndmVjMiB4R2VvbU9wcG9zaXRlID0gZ2V0X2dsb2JhbF9pZChmbG9hdChuKSwgdUJ1ZmZlcldpZHRoLCAnICsgZ2VvbWV0cnlMZW5ndGgudG9GaXhlZCgxKSArICcpO1xcbicgKyAndmVjMyBjdXJyZW50UG9zQiA9IHBvc1hZWldbeEdlb21PcHBvc2l0ZV0ueHl6O1xcbicgKyAndmVjMyBkaXJUb0JOID0gbm9ybWFsaXplKGN1cnJlbnRQb3NCLWN1cnJlbnRQb3MpO1xcbicgKyAndmVjMiBJRHJlbGF0aW9uID0gdmVjMigwLjAsIDAuMCk7JyArICdmbG9hdCBhbmdsZVJlbGF0aW9ucyA9IDM2MC4wOycgKyAnaWYobm9kZUlkIDwgbm9kZXNDb3VudCkge1xcbicgKyAnZm9yKGludCBuQj0wOyBuQiA8IDQwOTY7IG5CKyspIHtcXG4nICsgJ2lmKGZsb2F0KG5CKSA+PSBub2Rlc0NvdW50KSBicmVhaztcXG4nICsgJ2lmKGZsb2F0KG5CKSAhPSBmbG9hdChuKSAmJiBmbG9hdChuQikgIT0gbm9kZUlkKSB7JyArICd2ZWMyIHhBZGpNYXRDdXJyZW50QiA9IGdldF9nbG9iYWxfaWQodmVjMihmbG9hdChuQiksIG5vZGVJZCksIHdpZHRoQWRqTWF0cml4KTsnICsgJ3ZlYzQgcGl4QWRqTWF0QUN1cnJlbnRfQiA9IGFkamFjZW5jeU1hdHJpeFt4QWRqTWF0Q3VycmVudEJdO1xcbicgKyAnaWYocGl4QWRqTWF0QUN1cnJlbnRfQi54ID4gMC4wKSB7JyArICd2ZWMyIHhHZW9tX29wcG9CID0gZ2V0X2dsb2JhbF9pZChmbG9hdChuQiksIHVCdWZmZXJXaWR0aCwgJyArIGdlb21ldHJ5TGVuZ3RoLnRvRml4ZWQoMSkgKyAnKTtcXG4nICsgJ3ZlYzMgY3VycmVudFBvc0JCID0gcG9zWFlaV1t4R2VvbV9vcHBvQl0ueHl6O1xcbicgKyAndmVjMyBkaXJUb0JCTiA9IG5vcm1hbGl6ZShjdXJyZW50UG9zQkItY3VycmVudFBvcyk7XFxuJyArICdmbG9hdCBhbmdsZSA9IEdldEFuZ2xlKGRpclRvQk4sZGlyVG9CQk4pOycgKyAnaWYoYW5nbGUgPiAwLjAgJiYgYW5nbGUgPCBhbmdsZVJlbGF0aW9ucykgeycgKyAnSURyZWxhdGlvbiA9IHhHZW9tX29wcG9COycgKyAnYW5nbGVSZWxhdGlvbnMgPSBhbmdsZTsnICsgJ30nICsgJ30nICsgJ30nICsgJ30nICsgJ30nICsgJ2lmKGFuZ2xlUmVsYXRpb25zIDwgMzYwLjAgJiYgYW5nbGVSZWxhdGlvbnMgPiB0b3RhbEFuZ2xlUmVsYXRpb25zKSB7JyArICd0b3RhbElEcmVsYXRpb24gPSBJRHJlbGF0aW9uOycgKyAndG90YWxBbmdsZVJlbGF0aW9ucyA9IGFuZ2xlUmVsYXRpb25zOycgKyAnfScgKyAnfScgK1xuICAgICAgICAgICAgLy8gRU5EIFJFTEFUSU9OIEZPVU5EXG5cbiAgICAgICAgICAgICd9JyArICd9JyArXG4gICAgICAgICAgICAvLyBTVU1NQVRJT05cbiAgICAgICAgICAgIC8vIEVORCBTVU1NQVRJT05cblxuICAgICAgICAgICAgJ30nICsgJ3JldHVybiB2ZWM0KHRvdGFsSURyZWxhdGlvbiwgdG90YWxBbmdsZVJlbGF0aW9ucywgMC4wKTsnICsgJ30nO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdyYXBoVXRpbHM7XG59KCk7XG5cbmdsb2JhbC5HcmFwaFV0aWxzID0gR3JhcGhVdGlscztcbm1vZHVsZS5leHBvcnRzLkdyYXBoVXRpbHMgPSBHcmFwaFV0aWxzOyJdfQ==
